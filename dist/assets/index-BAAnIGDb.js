function ov(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in e)){const a=Object.getOwnPropertyDescriptor(n,r);a&&Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();var Pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function cv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),s}var vp={exports:{}},No={},wp={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oi=Symbol.for("react.element"),uv=Symbol.for("react.portal"),dv=Symbol.for("react.fragment"),hv=Symbol.for("react.strict_mode"),fv=Symbol.for("react.profiler"),mv=Symbol.for("react.provider"),pv=Symbol.for("react.context"),gv=Symbol.for("react.forward_ref"),xv=Symbol.for("react.suspense"),yv=Symbol.for("react.memo"),vv=Symbol.for("react.lazy"),ph=Symbol.iterator;function wv(e){return e===null||typeof e!="object"?null:(e=ph&&e[ph]||e["@@iterator"],typeof e=="function"?e:null)}var bp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jp=Object.assign,_p={};function yr(e,t,s){this.props=e,this.context=t,this.refs=_p,this.updater=s||bp}yr.prototype.isReactComponent={};yr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};yr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Np(){}Np.prototype=yr.prototype;function _u(e,t,s){this.props=e,this.context=t,this.refs=_p,this.updater=s||bp}var Nu=_u.prototype=new Np;Nu.constructor=_u;jp(Nu,yr.prototype);Nu.isPureReactComponent=!0;var gh=Array.isArray,kp=Object.prototype.hasOwnProperty,ku={current:null},Sp={key:!0,ref:!0,__self:!0,__source:!0};function Cp(e,t,s){var n,r={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)kp.call(t,n)&&!Sp.hasOwnProperty(n)&&(r[n]=t[n]);var l=arguments.length-2;if(l===1)r.children=s;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:Oi,type:e,key:a,ref:o,props:r,_owner:ku.current}}function bv(e,t){return{$$typeof:Oi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Su(e){return typeof e=="object"&&e!==null&&e.$$typeof===Oi}function jv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var xh=/\/+/g;function sl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jv(""+e.key):t.toString(36)}function Sa(e,t,s,n,r){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Oi:case uv:o=!0}}if(o)return o=e,r=r(o),e=n===""?"."+sl(o,0):n,gh(r)?(s="",e!=null&&(s=e.replace(xh,"$&/")+"/"),Sa(r,t,s,"",function(u){return u})):r!=null&&(Su(r)&&(r=bv(r,s+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(xh,"$&/")+"/")+e)),t.push(r)),1;if(o=0,n=n===""?".":n+":",gh(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+sl(a,l);o+=Sa(a,t,s,c,r)}else if(c=wv(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+sl(a,l++),o+=Sa(a,t,s,c,r);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Xi(e,t,s){if(e==null)return e;var n=[],r=0;return Sa(e,n,"","",function(a){return t.call(s,a,r++)}),n}function _v(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var it={current:null},Ca={transition:null},Nv={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:Ca,ReactCurrentOwner:ku};function Ep(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Xi,forEach:function(e,t,s){Xi(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Xi(e,function(){t++}),t},toArray:function(e){return Xi(e,function(t){return t})||[]},only:function(e){if(!Su(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ie.Component=yr;ie.Fragment=dv;ie.Profiler=fv;ie.PureComponent=_u;ie.StrictMode=hv;ie.Suspense=xv;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nv;ie.act=Ep;ie.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=jp({},e.props),r=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=ku.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)kp.call(t,c)&&!Sp.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Oi,type:e.type,key:r,ref:a,props:n,_owner:o}};ie.createContext=function(e){return e={$$typeof:pv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mv,_context:e},e.Consumer=e};ie.createElement=Cp;ie.createFactory=function(e){var t=Cp.bind(null,e);return t.type=e,t};ie.createRef=function(){return{current:null}};ie.forwardRef=function(e){return{$$typeof:gv,render:e}};ie.isValidElement=Su;ie.lazy=function(e){return{$$typeof:vv,_payload:{_status:-1,_result:e},_init:_v}};ie.memo=function(e,t){return{$$typeof:yv,type:e,compare:t===void 0?null:t}};ie.startTransition=function(e){var t=Ca.transition;Ca.transition={};try{e()}finally{Ca.transition=t}};ie.unstable_act=Ep;ie.useCallback=function(e,t){return it.current.useCallback(e,t)};ie.useContext=function(e){return it.current.useContext(e)};ie.useDebugValue=function(){};ie.useDeferredValue=function(e){return it.current.useDeferredValue(e)};ie.useEffect=function(e,t){return it.current.useEffect(e,t)};ie.useId=function(){return it.current.useId()};ie.useImperativeHandle=function(e,t,s){return it.current.useImperativeHandle(e,t,s)};ie.useInsertionEffect=function(e,t){return it.current.useInsertionEffect(e,t)};ie.useLayoutEffect=function(e,t){return it.current.useLayoutEffect(e,t)};ie.useMemo=function(e,t){return it.current.useMemo(e,t)};ie.useReducer=function(e,t,s){return it.current.useReducer(e,t,s)};ie.useRef=function(e){return it.current.useRef(e)};ie.useState=function(e){return it.current.useState(e)};ie.useSyncExternalStore=function(e,t,s){return it.current.useSyncExternalStore(e,t,s)};ie.useTransition=function(){return it.current.useTransition()};ie.version="18.3.1";wp.exports=ie;var g=wp.exports;const ci=lv(g),kv=ov({__proto__:null,default:ci},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv=g,Cv=Symbol.for("react.element"),Ev=Symbol.for("react.fragment"),Tv=Object.prototype.hasOwnProperty,Pv=Sv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rv={key:!0,ref:!0,__self:!0,__source:!0};function Tp(e,t,s){var n,r={},a=null,o=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Tv.call(t,n)&&!Rv.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)r[n]===void 0&&(r[n]=t[n]);return{$$typeof:Cv,type:e,key:a,ref:o,props:r,_owner:Pv.current}}No.Fragment=Ev;No.jsx=Tp;No.jsxs=Tp;vp.exports=No;var i=vp.exports,Pp={exports:{}},bt={},Rp={exports:{}},Ap={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,j){var P=N.length;N.push(j);e:for(;0<P;){var O=P-1>>>1,z=N[O];if(0<r(z,j))N[O]=j,N[P]=z,P=O;else break e}}function s(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var j=N[0],P=N.pop();if(P!==j){N[0]=P;e:for(var O=0,z=N.length,G=z>>>1;O<G;){var ae=2*(O+1)-1,de=N[ae],Q=ae+1,re=N[Q];if(0>r(de,P))Q<z&&0>r(re,de)?(N[O]=re,N[Q]=P,O=Q):(N[O]=de,N[ae]=P,O=ae);else if(Q<z&&0>r(re,P))N[O]=re,N[Q]=P,O=Q;else break e}}return j}function r(N,j){var P=N.sortIndex-j.sortIndex;return P!==0?P:N.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,w=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(N){for(var j=s(u);j!==null;){if(j.callback===null)n(u);else if(j.startTime<=N)n(u),j.sortIndex=j.expirationTime,t(c,j);else break;j=s(u)}}function _(N){if(y=!1,v(N),!w)if(s(c)!==null)w=!0,te(k);else{var j=s(u);j!==null&&Z(_,j.startTime-N)}}function k(N,j){w=!1,y&&(y=!1,m(C),C=-1),p=!0;var P=f;try{for(v(j),h=s(c);h!==null&&(!(h.expirationTime>j)||N&&!D());){var O=h.callback;if(typeof O=="function"){h.callback=null,f=h.priorityLevel;var z=O(h.expirationTime<=j);j=e.unstable_now(),typeof z=="function"?h.callback=z:h===s(c)&&n(c),v(j)}else n(c);h=s(c)}if(h!==null)var G=!0;else{var ae=s(u);ae!==null&&Z(_,ae.startTime-j),G=!1}return G}finally{h=null,f=P,p=!1}}var S=!1,A=null,C=-1,L=5,R=-1;function D(){return!(e.unstable_now()-R<L)}function T(){if(A!==null){var N=e.unstable_now();R=N;var j=!0;try{j=A(!0,N)}finally{j?U():(S=!1,A=null)}}else S=!1}var U;if(typeof x=="function")U=function(){x(T)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,H=V.port2;V.port1.onmessage=T,U=function(){H.postMessage(null)}}else U=function(){b(T,0)};function te(N){A=N,S||(S=!0,U())}function Z(N,j){C=b(function(){N(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){w||p||(w=!0,te(k))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(N){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var P=f;f=j;try{return N()}finally{f=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,j){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var P=f;f=N;try{return j()}finally{f=P}},e.unstable_scheduleCallback=function(N,j,P){var O=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?O+P:O):P=O,N){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=P+z,N={id:d++,callback:j,priorityLevel:N,startTime:P,expirationTime:z,sortIndex:-1},P>O?(N.sortIndex=P,t(u,N),s(c)===null&&N===s(u)&&(y?(m(C),C=-1):y=!0,Z(_,P-O))):(N.sortIndex=z,t(c,N),w||p||(w=!0,te(k))),N},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(N){var j=f;return function(){var P=f;f=j;try{return N.apply(this,arguments)}finally{f=P}}}})(Ap);Rp.exports=Ap;var Av=Rp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv=g,vt=Av;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lp=new Set,ui={};function jn(e,t){rr(e,t),rr(e+"Capture",t)}function rr(e,t){for(ui[e]=t,e=0;e<t.length;e++)Lp.add(t[e])}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jl=Object.prototype.hasOwnProperty,Mv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yh={},vh={};function Dv(e){return Jl.call(vh,e)?!0:Jl.call(yh,e)?!1:Mv.test(e)?vh[e]=!0:(yh[e]=!0,!1)}function $v(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ov(e,t,s,n){if(t===null||typeof t>"u"||$v(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function at(e,t,s,n,r,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){He[e]=new at(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];He[t]=new at(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){He[e]=new at(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){He[e]=new at(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){He[e]=new at(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){He[e]=new at(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){He[e]=new at(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){He[e]=new at(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){He[e]=new at(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cu=/[\-:]([a-z])/g;function Eu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cu,Eu);He[t]=new at(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cu,Eu);He[t]=new at(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cu,Eu);He[t]=new at(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){He[e]=new at(e,1,!1,e.toLowerCase(),null,!1,!1)});He.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){He[e]=new at(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tu(e,t,s,n){var r=He.hasOwnProperty(t)?He[t]:null;(r!==null?r.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ov(t,s,r,n)&&(s=null),n||r===null?Dv(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):r.mustUseProperty?e[r.propertyName]=s===null?r.type===3?!1:"":s:(t=r.attributeName,n=r.attributeNamespace,s===null?e.removeAttribute(t):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var gs=Lv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ea=Symbol.for("react.element"),Mn=Symbol.for("react.portal"),Dn=Symbol.for("react.fragment"),Pu=Symbol.for("react.strict_mode"),Xl=Symbol.for("react.profiler"),Mp=Symbol.for("react.provider"),Dp=Symbol.for("react.context"),Ru=Symbol.for("react.forward_ref"),ec=Symbol.for("react.suspense"),tc=Symbol.for("react.suspense_list"),Au=Symbol.for("react.memo"),js=Symbol.for("react.lazy"),$p=Symbol.for("react.offscreen"),wh=Symbol.iterator;function Cr(e){return e===null||typeof e!="object"?null:(e=wh&&e[wh]||e["@@iterator"],typeof e=="function"?e:null)}var ke=Object.assign,nl;function Or(e){if(nl===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);nl=t&&t[1]||""}return`
`+nl+e}var rl=!1;function il(e,t){if(!e||rl)return"";rl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),a=n.stack.split(`
`),o=r.length-1,l=a.length-1;1<=o&&0<=l&&r[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==a[l]){var c=`
`+r[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{rl=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Or(e):""}function Iv(e){switch(e.tag){case 5:return Or(e.type);case 16:return Or("Lazy");case 13:return Or("Suspense");case 19:return Or("SuspenseList");case 0:case 2:case 15:return e=il(e.type,!1),e;case 11:return e=il(e.type.render,!1),e;case 1:return e=il(e.type,!0),e;default:return""}}function sc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Dn:return"Fragment";case Mn:return"Portal";case Xl:return"Profiler";case Pu:return"StrictMode";case ec:return"Suspense";case tc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dp:return(e.displayName||"Context")+".Consumer";case Mp:return(e._context.displayName||"Context")+".Provider";case Ru:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Au:return t=e.displayName||null,t!==null?t:sc(e.type)||"Memo";case js:t=e._payload,e=e._init;try{return sc(e(t))}catch{}}return null}function zv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sc(t);case 8:return t===Pu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Op(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fv(e){var t=Op(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ta(e){e._valueTracker||(e._valueTracker=Fv(e))}function Ip(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=Op(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function Ba(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nc(e,t){var s=t.checked;return ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function bh(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=Fs(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zp(e,t){t=t.checked,t!=null&&Tu(e,"checked",t,!1)}function rc(e,t){zp(e,t);var s=Fs(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ic(e,t.type,s):t.hasOwnProperty("defaultValue")&&ic(e,t.type,Fs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jh(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function ic(e,t,s){(t!=="number"||Ba(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ir=Array.isArray;function Qn(e,t,s,n){if(e=e.options,t){t={};for(var r=0;r<s.length;r++)t["$"+s[r]]=!0;for(s=0;s<e.length;s++)r=t.hasOwnProperty("$"+e[s].value),e[s].selected!==r&&(e[s].selected=r),r&&n&&(e[s].defaultSelected=!0)}else{for(s=""+Fs(s),t=null,r=0;r<e.length;r++){if(e[r].value===s){e[r].selected=!0,n&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function ac(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return ke({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _h(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(F(92));if(Ir(s)){if(1<s.length)throw Error(F(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Fs(s)}}function Fp(e,t){var s=Fs(t.value),n=Fs(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function Nh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Up(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Up(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sa,Bp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,r){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(sa=sa||document.createElement("div"),sa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=sa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function di(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Uv=["Webkit","ms","Moz","O"];Object.keys(Wr).forEach(function(e){Uv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wr[t]=Wr[e]})});function Vp(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Wr.hasOwnProperty(e)&&Wr[e]?(""+t).trim():t+"px"}function qp(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=Vp(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,r):e[s]=r}}var Bv=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lc(e,t){if(t){if(Bv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function cc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uc=null;function Lu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dc=null,Jn=null,Xn=null;function kh(e){if(e=Fi(e)){if(typeof dc!="function")throw Error(F(280));var t=e.stateNode;t&&(t=To(t),dc(e.stateNode,e.type,t))}}function Hp(e){Jn?Xn?Xn.push(e):Xn=[e]:Jn=e}function Wp(){if(Jn){var e=Jn,t=Xn;if(Xn=Jn=null,kh(e),t)for(e=0;e<t.length;e++)kh(t[e])}}function Gp(e,t){return e(t)}function Kp(){}var al=!1;function Zp(e,t,s){if(al)return e(t,s);al=!0;try{return Gp(e,t,s)}finally{al=!1,(Jn!==null||Xn!==null)&&(Kp(),Wp())}}function hi(e,t){var s=e.stateNode;if(s===null)return null;var n=To(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(F(231,t,typeof s));return s}var hc=!1;if(us)try{var Er={};Object.defineProperty(Er,"passive",{get:function(){hc=!0}}),window.addEventListener("test",Er,Er),window.removeEventListener("test",Er,Er)}catch{hc=!1}function Vv(e,t,s,n,r,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(s,u)}catch(d){this.onError(d)}}var Gr=!1,Va=null,qa=!1,fc=null,qv={onError:function(e){Gr=!0,Va=e}};function Hv(e,t,s,n,r,a,o,l,c){Gr=!1,Va=null,Vv.apply(qv,arguments)}function Wv(e,t,s,n,r,a,o,l,c){if(Hv.apply(this,arguments),Gr){if(Gr){var u=Va;Gr=!1,Va=null}else throw Error(F(198));qa||(qa=!0,fc=u)}}function _n(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Yp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sh(e){if(_n(e)!==e)throw Error(F(188))}function Gv(e){var t=e.alternate;if(!t){if(t=_n(e),t===null)throw Error(F(188));return t!==e?null:e}for(var s=e,n=t;;){var r=s.return;if(r===null)break;var a=r.alternate;if(a===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===s)return Sh(r),e;if(a===n)return Sh(r),t;a=a.sibling}throw Error(F(188))}if(s.return!==n.return)s=r,n=a;else{for(var o=!1,l=r.child;l;){if(l===s){o=!0,s=r,n=a;break}if(l===n){o=!0,n=r,s=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===s){o=!0,s=a,n=r;break}if(l===n){o=!0,n=a,s=r;break}l=l.sibling}if(!o)throw Error(F(189))}}if(s.alternate!==n)throw Error(F(190))}if(s.tag!==3)throw Error(F(188));return s.stateNode.current===s?e:t}function Qp(e){return e=Gv(e),e!==null?Jp(e):null}function Jp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jp(e);if(t!==null)return t;e=e.sibling}return null}var Xp=vt.unstable_scheduleCallback,Ch=vt.unstable_cancelCallback,Kv=vt.unstable_shouldYield,Zv=vt.unstable_requestPaint,Te=vt.unstable_now,Yv=vt.unstable_getCurrentPriorityLevel,Mu=vt.unstable_ImmediatePriority,eg=vt.unstable_UserBlockingPriority,Ha=vt.unstable_NormalPriority,Qv=vt.unstable_LowPriority,tg=vt.unstable_IdlePriority,ko=null,Yt=null;function Jv(e){if(Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(ko,e,void 0,(e.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:tw,Xv=Math.log,ew=Math.LN2;function tw(e){return e>>>=0,e===0?32:31-(Xv(e)/ew|0)|0}var na=64,ra=4194304;function zr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wa(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,r=e.suspendedLanes,a=e.pingedLanes,o=s&268435455;if(o!==0){var l=o&~r;l!==0?n=zr(l):(a&=o,a!==0&&(n=zr(a)))}else o=s&~r,o!==0?n=zr(o):a!==0&&(n=zr(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&r)&&(r=n&-n,a=t&-t,r>=a||r===16&&(a&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-Ft(t),r=1<<s,n|=e[s],t&=~r;return n}function sw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nw(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Ft(a),l=1<<o,c=r[o];c===-1?(!(l&s)||l&n)&&(r[o]=sw(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function mc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sg(){var e=na;return na<<=1,!(na&4194240)&&(na=64),e}function ol(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ii(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ft(t),e[t]=s}function rw(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var r=31-Ft(s),a=1<<r;t[r]=0,n[r]=-1,e[r]=-1,s&=~a}}function Du(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-Ft(s),r=1<<n;r&t|e[n]&t&&(e[n]|=t),s&=~r}}var ue=0;function ng(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var rg,$u,ig,ag,og,pc=!1,ia=[],As=null,Ls=null,Ms=null,fi=new Map,mi=new Map,ks=[],iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Eh(e,t){switch(e){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":fi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mi.delete(t.pointerId)}}function Tr(e,t,s,n,r,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[r]},t!==null&&(t=Fi(t),t!==null&&$u(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function aw(e,t,s,n,r){switch(t){case"focusin":return As=Tr(As,e,t,s,n,r),!0;case"dragenter":return Ls=Tr(Ls,e,t,s,n,r),!0;case"mouseover":return Ms=Tr(Ms,e,t,s,n,r),!0;case"pointerover":var a=r.pointerId;return fi.set(a,Tr(fi.get(a)||null,e,t,s,n,r)),!0;case"gotpointercapture":return a=r.pointerId,mi.set(a,Tr(mi.get(a)||null,e,t,s,n,r)),!0}return!1}function lg(e){var t=on(e.target);if(t!==null){var s=_n(t);if(s!==null){if(t=s.tag,t===13){if(t=Yp(s),t!==null){e.blockedOn=t,og(e.priority,function(){ig(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ea(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=gc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);uc=n,s.target.dispatchEvent(n),uc=null}else return t=Fi(s),t!==null&&$u(t),e.blockedOn=s,!1;t.shift()}return!0}function Th(e,t,s){Ea(e)&&s.delete(t)}function ow(){pc=!1,As!==null&&Ea(As)&&(As=null),Ls!==null&&Ea(Ls)&&(Ls=null),Ms!==null&&Ea(Ms)&&(Ms=null),fi.forEach(Th),mi.forEach(Th)}function Pr(e,t){e.blockedOn===t&&(e.blockedOn=null,pc||(pc=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,ow)))}function pi(e){function t(r){return Pr(r,e)}if(0<ia.length){Pr(ia[0],e);for(var s=1;s<ia.length;s++){var n=ia[s];n.blockedOn===e&&(n.blockedOn=null)}}for(As!==null&&Pr(As,e),Ls!==null&&Pr(Ls,e),Ms!==null&&Pr(Ms,e),fi.forEach(t),mi.forEach(t),s=0;s<ks.length;s++)n=ks[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<ks.length&&(s=ks[0],s.blockedOn===null);)lg(s),s.blockedOn===null&&ks.shift()}var er=gs.ReactCurrentBatchConfig,Ga=!0;function lw(e,t,s,n){var r=ue,a=er.transition;er.transition=null;try{ue=1,Ou(e,t,s,n)}finally{ue=r,er.transition=a}}function cw(e,t,s,n){var r=ue,a=er.transition;er.transition=null;try{ue=4,Ou(e,t,s,n)}finally{ue=r,er.transition=a}}function Ou(e,t,s,n){if(Ga){var r=gc(e,t,s,n);if(r===null)xl(e,t,n,Ka,s),Eh(e,n);else if(aw(r,e,t,s,n))n.stopPropagation();else if(Eh(e,n),t&4&&-1<iw.indexOf(e)){for(;r!==null;){var a=Fi(r);if(a!==null&&rg(a),a=gc(e,t,s,n),a===null&&xl(e,t,n,Ka,s),a===r)break;r=a}r!==null&&n.stopPropagation()}else xl(e,t,n,null,s)}}var Ka=null;function gc(e,t,s,n){if(Ka=null,e=Lu(n),e=on(e),e!==null)if(t=_n(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Yp(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ka=e,null}function cg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yv()){case Mu:return 1;case eg:return 4;case Ha:case Qv:return 16;case tg:return 536870912;default:return 16}default:return 16}}var Ts=null,Iu=null,Ta=null;function ug(){if(Ta)return Ta;var e,t=Iu,s=t.length,n,r="value"in Ts?Ts.value:Ts.textContent,a=r.length;for(e=0;e<s&&t[e]===r[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===r[a-n];n++);return Ta=r.slice(e,1<n?1-n:void 0)}function Pa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function aa(){return!0}function Ph(){return!1}function jt(e){function t(s,n,r,a,o){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?aa:Ph,this.isPropagationStopped=Ph,this}return ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),t}var vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zu=jt(vr),zi=ke({},vr,{view:0,detail:0}),uw=jt(zi),ll,cl,Rr,So=ke({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rr&&(Rr&&e.type==="mousemove"?(ll=e.screenX-Rr.screenX,cl=e.screenY-Rr.screenY):cl=ll=0,Rr=e),ll)},movementY:function(e){return"movementY"in e?e.movementY:cl}}),Rh=jt(So),dw=ke({},So,{dataTransfer:0}),hw=jt(dw),fw=ke({},zi,{relatedTarget:0}),ul=jt(fw),mw=ke({},vr,{animationName:0,elapsedTime:0,pseudoElement:0}),pw=jt(mw),gw=ke({},vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xw=jt(gw),yw=ke({},vr,{data:0}),Ah=jt(yw),vw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ww={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bw[e])?!!t[e]:!1}function Fu(){return jw}var _w=ke({},zi,{key:function(e){if(e.key){var t=vw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Pa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ww[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fu,charCode:function(e){return e.type==="keypress"?Pa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nw=jt(_w),kw=ke({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lh=jt(kw),Sw=ke({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fu}),Cw=jt(Sw),Ew=ke({},vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tw=jt(Ew),Pw=ke({},So,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rw=jt(Pw),Aw=[9,13,27,32],Uu=us&&"CompositionEvent"in window,Kr=null;us&&"documentMode"in document&&(Kr=document.documentMode);var Lw=us&&"TextEvent"in window&&!Kr,dg=us&&(!Uu||Kr&&8<Kr&&11>=Kr),Mh=" ",Dh=!1;function hg(e,t){switch(e){case"keyup":return Aw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $n=!1;function Mw(e,t){switch(e){case"compositionend":return fg(t);case"keypress":return t.which!==32?null:(Dh=!0,Mh);case"textInput":return e=t.data,e===Mh&&Dh?null:e;default:return null}}function Dw(e,t){if($n)return e==="compositionend"||!Uu&&hg(e,t)?(e=ug(),Ta=Iu=Ts=null,$n=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dg&&t.locale!=="ko"?null:t.data;default:return null}}var $w={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $h(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$w[e.type]:t==="textarea"}function mg(e,t,s,n){Hp(n),t=Za(t,"onChange"),0<t.length&&(s=new zu("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Zr=null,gi=null;function Ow(e){kg(e,0)}function Co(e){var t=zn(e);if(Ip(t))return e}function Iw(e,t){if(e==="change")return t}var pg=!1;if(us){var dl;if(us){var hl="oninput"in document;if(!hl){var Oh=document.createElement("div");Oh.setAttribute("oninput","return;"),hl=typeof Oh.oninput=="function"}dl=hl}else dl=!1;pg=dl&&(!document.documentMode||9<document.documentMode)}function Ih(){Zr&&(Zr.detachEvent("onpropertychange",gg),gi=Zr=null)}function gg(e){if(e.propertyName==="value"&&Co(gi)){var t=[];mg(t,gi,e,Lu(e)),Zp(Ow,t)}}function zw(e,t,s){e==="focusin"?(Ih(),Zr=t,gi=s,Zr.attachEvent("onpropertychange",gg)):e==="focusout"&&Ih()}function Fw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Co(gi)}function Uw(e,t){if(e==="click")return Co(t)}function Bw(e,t){if(e==="input"||e==="change")return Co(t)}function Vw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:Vw;function xi(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!Jl.call(t,r)||!qt(e[r],t[r]))return!1}return!0}function zh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fh(e,t){var s=zh(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=zh(s)}}function xg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yg(){for(var e=window,t=Ba();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Ba(e.document)}return t}function Bu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qw(e){var t=yg(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&xg(s.ownerDocument.documentElement,s)){if(n!==null&&Bu(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=s.textContent.length,a=Math.min(n.start,r);n=n.end===void 0?a:Math.min(n.end,r),!e.extend&&a>n&&(r=n,n=a,a=r),r=Fh(s,a);var o=Fh(s,n);r&&o&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hw=us&&"documentMode"in document&&11>=document.documentMode,On=null,xc=null,Yr=null,yc=!1;function Uh(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;yc||On==null||On!==Ba(n)||(n=On,"selectionStart"in n&&Bu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Yr&&xi(Yr,n)||(Yr=n,n=Za(xc,"onSelect"),0<n.length&&(t=new zu("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=On)))}function oa(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var In={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionend:oa("Transition","TransitionEnd")},fl={},vg={};us&&(vg=document.createElement("div").style,"AnimationEvent"in window||(delete In.animationend.animation,delete In.animationiteration.animation,delete In.animationstart.animation),"TransitionEvent"in window||delete In.transitionend.transition);function Eo(e){if(fl[e])return fl[e];if(!In[e])return e;var t=In[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in vg)return fl[e]=t[s];return e}var wg=Eo("animationend"),bg=Eo("animationiteration"),jg=Eo("animationstart"),_g=Eo("transitionend"),Ng=new Map,Bh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(e,t){Ng.set(e,t),jn(t,[e])}for(var ml=0;ml<Bh.length;ml++){var pl=Bh[ml],Ww=pl.toLowerCase(),Gw=pl[0].toUpperCase()+pl.slice(1);qs(Ww,"on"+Gw)}qs(wg,"onAnimationEnd");qs(bg,"onAnimationIteration");qs(jg,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(_g,"onTransitionEnd");rr("onMouseEnter",["mouseout","mouseover"]);rr("onMouseLeave",["mouseout","mouseover"]);rr("onPointerEnter",["pointerout","pointerover"]);rr("onPointerLeave",["pointerout","pointerover"]);jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function Vh(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,Wv(n,t,void 0,e),e.currentTarget=null}function kg(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],r=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&r.isPropagationStopped())break e;Vh(r,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&r.isPropagationStopped())break e;Vh(r,l,u),a=c}}}if(qa)throw e=fc,qa=!1,fc=null,e}function xe(e,t){var s=t[_c];s===void 0&&(s=t[_c]=new Set);var n=e+"__bubble";s.has(n)||(Sg(t,e,2,!1),s.add(n))}function gl(e,t,s){var n=0;t&&(n|=4),Sg(s,e,n,t)}var la="_reactListening"+Math.random().toString(36).slice(2);function yi(e){if(!e[la]){e[la]=!0,Lp.forEach(function(s){s!=="selectionchange"&&(Kw.has(s)||gl(s,!1,e),gl(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[la]||(t[la]=!0,gl("selectionchange",!1,t))}}function Sg(e,t,s,n){switch(cg(t)){case 1:var r=lw;break;case 4:r=cw;break;default:r=Ou}s=r.bind(null,t,s,e),r=void 0,!hc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),n?r!==void 0?e.addEventListener(t,s,{capture:!0,passive:r}):e.addEventListener(t,s,!0):r!==void 0?e.addEventListener(t,s,{passive:r}):e.addEventListener(t,s,!1)}function xl(e,t,s,n,r){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=on(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}Zp(function(){var u=a,d=Lu(s),h=[];e:{var f=Ng.get(e);if(f!==void 0){var p=zu,w=e;switch(e){case"keypress":if(Pa(s)===0)break e;case"keydown":case"keyup":p=Nw;break;case"focusin":w="focus",p=ul;break;case"focusout":w="blur",p=ul;break;case"beforeblur":case"afterblur":p=ul;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Rh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=hw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Cw;break;case wg:case bg:case jg:p=pw;break;case _g:p=Tw;break;case"scroll":p=uw;break;case"wheel":p=Rw;break;case"copy":case"cut":case"paste":p=xw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Lh}var y=(t&4)!==0,b=!y&&e==="scroll",m=y?f!==null?f+"Capture":null:f;y=[];for(var x=u,v;x!==null;){v=x;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,m!==null&&(_=hi(x,m),_!=null&&y.push(vi(x,_,v)))),b)break;x=x.return}0<y.length&&(f=new p(f,w,null,s,d),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&s!==uc&&(w=s.relatedTarget||s.fromElement)&&(on(w)||w[ds]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(w=s.relatedTarget||s.toElement,p=u,w=w?on(w):null,w!==null&&(b=_n(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(p=null,w=u),p!==w)){if(y=Rh,_="onMouseLeave",m="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=Lh,_="onPointerLeave",m="onPointerEnter",x="pointer"),b=p==null?f:zn(p),v=w==null?f:zn(w),f=new y(_,x+"leave",p,s,d),f.target=b,f.relatedTarget=v,_=null,on(d)===u&&(y=new y(m,x+"enter",w,s,d),y.target=v,y.relatedTarget=b,_=y),b=_,p&&w)t:{for(y=p,m=w,x=0,v=y;v;v=Tn(v))x++;for(v=0,_=m;_;_=Tn(_))v++;for(;0<x-v;)y=Tn(y),x--;for(;0<v-x;)m=Tn(m),v--;for(;x--;){if(y===m||m!==null&&y===m.alternate)break t;y=Tn(y),m=Tn(m)}y=null}else y=null;p!==null&&qh(h,f,p,y,!1),w!==null&&b!==null&&qh(h,b,w,y,!0)}}e:{if(f=u?zn(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=Iw;else if($h(f))if(pg)k=Bw;else{k=Fw;var S=zw}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Uw);if(k&&(k=k(e,u))){mg(h,k,s,d);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&ic(f,"number",f.value)}switch(S=u?zn(u):window,e){case"focusin":($h(S)||S.contentEditable==="true")&&(On=S,xc=u,Yr=null);break;case"focusout":Yr=xc=On=null;break;case"mousedown":yc=!0;break;case"contextmenu":case"mouseup":case"dragend":yc=!1,Uh(h,s,d);break;case"selectionchange":if(Hw)break;case"keydown":case"keyup":Uh(h,s,d)}var A;if(Uu)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else $n?hg(e,s)&&(C="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(C="onCompositionStart");C&&(dg&&s.locale!=="ko"&&($n||C!=="onCompositionStart"?C==="onCompositionEnd"&&$n&&(A=ug()):(Ts=d,Iu="value"in Ts?Ts.value:Ts.textContent,$n=!0)),S=Za(u,C),0<S.length&&(C=new Ah(C,e,null,s,d),h.push({event:C,listeners:S}),A?C.data=A:(A=fg(s),A!==null&&(C.data=A)))),(A=Lw?Mw(e,s):Dw(e,s))&&(u=Za(u,"onBeforeInput"),0<u.length&&(d=new Ah("onBeforeInput","beforeinput",null,s,d),h.push({event:d,listeners:u}),d.data=A))}kg(h,t)})}function vi(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Za(e,t){for(var s=t+"Capture",n=[];e!==null;){var r=e,a=r.stateNode;r.tag===5&&a!==null&&(r=a,a=hi(e,s),a!=null&&n.unshift(vi(e,a,r)),a=hi(e,t),a!=null&&n.push(vi(e,a,r))),e=e.return}return n}function Tn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qh(e,t,s,n,r){for(var a=t._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,r?(c=hi(s,a),c!=null&&o.unshift(vi(s,c,l))):r||(c=hi(s,a),c!=null&&o.push(vi(s,c,l)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var Zw=/\r\n?/g,Yw=/\u0000|\uFFFD/g;function Hh(e){return(typeof e=="string"?e:""+e).replace(Zw,`
`).replace(Yw,"")}function ca(e,t,s){if(t=Hh(t),Hh(e)!==t&&s)throw Error(F(425))}function Ya(){}var vc=null,wc=null;function bc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jc=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,Wh=typeof Promise=="function"?Promise:void 0,Jw=typeof queueMicrotask=="function"?queueMicrotask:typeof Wh<"u"?function(e){return Wh.resolve(null).then(e).catch(Xw)}:jc;function Xw(e){setTimeout(function(){throw e})}function yl(e,t){var s=t,n=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){e.removeChild(r),pi(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);pi(t)}function Ds(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var wr=Math.random().toString(36).slice(2),Kt="__reactFiber$"+wr,wi="__reactProps$"+wr,ds="__reactContainer$"+wr,_c="__reactEvents$"+wr,e1="__reactListeners$"+wr,t1="__reactHandles$"+wr;function on(e){var t=e[Kt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[ds]||s[Kt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Gh(e);e!==null;){if(s=e[Kt])return s;e=Gh(e)}return t}e=s,s=e.parentNode}return null}function Fi(e){return e=e[Kt]||e[ds],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function To(e){return e[wi]||null}var Nc=[],Fn=-1;function Hs(e){return{current:e}}function ye(e){0>Fn||(e.current=Nc[Fn],Nc[Fn]=null,Fn--)}function me(e,t){Fn++,Nc[Fn]=e.current,e.current=t}var Us={},Xe=Hs(Us),dt=Hs(!1),gn=Us;function ir(e,t){var s=e.type.contextTypes;if(!s)return Us;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r={},a;for(a in s)r[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function ht(e){return e=e.childContextTypes,e!=null}function Qa(){ye(dt),ye(Xe)}function Kh(e,t,s){if(Xe.current!==Us)throw Error(F(168));me(Xe,t),me(dt,s)}function Cg(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in t))throw Error(F(108,zv(e)||"Unknown",r));return ke({},s,n)}function Ja(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Us,gn=Xe.current,me(Xe,e),me(dt,dt.current),!0}function Zh(e,t,s){var n=e.stateNode;if(!n)throw Error(F(169));s?(e=Cg(e,t,gn),n.__reactInternalMemoizedMergedChildContext=e,ye(dt),ye(Xe),me(Xe,e)):ye(dt),me(dt,s)}var ns=null,Po=!1,vl=!1;function Eg(e){ns===null?ns=[e]:ns.push(e)}function s1(e){Po=!0,Eg(e)}function Ws(){if(!vl&&ns!==null){vl=!0;var e=0,t=ue;try{var s=ns;for(ue=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}ns=null,Po=!1}catch(r){throw ns!==null&&(ns=ns.slice(e+1)),Xp(Mu,Ws),r}finally{ue=t,vl=!1}}return null}var Un=[],Bn=0,Xa=null,eo=0,St=[],Ct=0,xn=null,rs=1,is="";function en(e,t){Un[Bn++]=eo,Un[Bn++]=Xa,Xa=e,eo=t}function Tg(e,t,s){St[Ct++]=rs,St[Ct++]=is,St[Ct++]=xn,xn=e;var n=rs;e=is;var r=32-Ft(n)-1;n&=~(1<<r),s+=1;var a=32-Ft(t)+r;if(30<a){var o=r-r%5;a=(n&(1<<o)-1).toString(32),n>>=o,r-=o,rs=1<<32-Ft(t)+r|s<<r|n,is=a+e}else rs=1<<a|s<<r|n,is=e}function Vu(e){e.return!==null&&(en(e,1),Tg(e,1,0))}function qu(e){for(;e===Xa;)Xa=Un[--Bn],Un[Bn]=null,eo=Un[--Bn],Un[Bn]=null;for(;e===xn;)xn=St[--Ct],St[Ct]=null,is=St[--Ct],St[Ct]=null,rs=St[--Ct],St[Ct]=null}var xt=null,gt=null,be=!1,zt=null;function Pg(e,t){var s=Et(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Yh(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xt=e,gt=Ds(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xt=e,gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=xn!==null?{id:rs,overflow:is}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Et(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,xt=e,gt=null,!0):!1;default:return!1}}function kc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sc(e){if(be){var t=gt;if(t){var s=t;if(!Yh(e,t)){if(kc(e))throw Error(F(418));t=Ds(s.nextSibling);var n=xt;t&&Yh(e,t)?Pg(n,s):(e.flags=e.flags&-4097|2,be=!1,xt=e)}}else{if(kc(e))throw Error(F(418));e.flags=e.flags&-4097|2,be=!1,xt=e}}}function Qh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function ua(e){if(e!==xt)return!1;if(!be)return Qh(e),be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bc(e.type,e.memoizedProps)),t&&(t=gt)){if(kc(e))throw Rg(),Error(F(418));for(;t;)Pg(e,t),t=Ds(t.nextSibling)}if(Qh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){gt=Ds(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}gt=null}}else gt=xt?Ds(e.stateNode.nextSibling):null;return!0}function Rg(){for(var e=gt;e;)e=Ds(e.nextSibling)}function ar(){gt=xt=null,be=!1}function Hu(e){zt===null?zt=[e]:zt.push(e)}var n1=gs.ReactCurrentBatchConfig;function Ar(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(F(309));var n=s.stateNode}if(!n)throw Error(F(147,e));var r=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=r.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(F(284));if(!s._owner)throw Error(F(290,e))}return e}function da(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jh(e){var t=e._init;return t(e._payload)}function Ag(e){function t(m,x){if(e){var v=m.deletions;v===null?(m.deletions=[x],m.flags|=16):v.push(x)}}function s(m,x){if(!e)return null;for(;x!==null;)t(m,x),x=x.sibling;return null}function n(m,x){for(m=new Map;x!==null;)x.key!==null?m.set(x.key,x):m.set(x.index,x),x=x.sibling;return m}function r(m,x){return m=zs(m,x),m.index=0,m.sibling=null,m}function a(m,x,v){return m.index=v,e?(v=m.alternate,v!==null?(v=v.index,v<x?(m.flags|=2,x):v):(m.flags|=2,x)):(m.flags|=1048576,x)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,x,v,_){return x===null||x.tag!==6?(x=Sl(v,m.mode,_),x.return=m,x):(x=r(x,v),x.return=m,x)}function c(m,x,v,_){var k=v.type;return k===Dn?d(m,x,v.props.children,_,v.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===js&&Jh(k)===x.type)?(_=r(x,v.props),_.ref=Ar(m,x,v),_.return=m,_):(_=Oa(v.type,v.key,v.props,null,m.mode,_),_.ref=Ar(m,x,v),_.return=m,_)}function u(m,x,v,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=Cl(v,m.mode,_),x.return=m,x):(x=r(x,v.children||[]),x.return=m,x)}function d(m,x,v,_,k){return x===null||x.tag!==7?(x=fn(v,m.mode,_,k),x.return=m,x):(x=r(x,v),x.return=m,x)}function h(m,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Sl(""+x,m.mode,v),x.return=m,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ea:return v=Oa(x.type,x.key,x.props,null,m.mode,v),v.ref=Ar(m,null,x),v.return=m,v;case Mn:return x=Cl(x,m.mode,v),x.return=m,x;case js:var _=x._init;return h(m,_(x._payload),v)}if(Ir(x)||Cr(x))return x=fn(x,m.mode,v,null),x.return=m,x;da(m,x)}return null}function f(m,x,v,_){var k=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:l(m,x,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ea:return v.key===k?c(m,x,v,_):null;case Mn:return v.key===k?u(m,x,v,_):null;case js:return k=v._init,f(m,x,k(v._payload),_)}if(Ir(v)||Cr(v))return k!==null?null:d(m,x,v,_,null);da(m,v)}return null}function p(m,x,v,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(v)||null,l(x,m,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ea:return m=m.get(_.key===null?v:_.key)||null,c(x,m,_,k);case Mn:return m=m.get(_.key===null?v:_.key)||null,u(x,m,_,k);case js:var S=_._init;return p(m,x,v,S(_._payload),k)}if(Ir(_)||Cr(_))return m=m.get(v)||null,d(x,m,_,k,null);da(x,_)}return null}function w(m,x,v,_){for(var k=null,S=null,A=x,C=x=0,L=null;A!==null&&C<v.length;C++){A.index>C?(L=A,A=null):L=A.sibling;var R=f(m,A,v[C],_);if(R===null){A===null&&(A=L);break}e&&A&&R.alternate===null&&t(m,A),x=a(R,x,C),S===null?k=R:S.sibling=R,S=R,A=L}if(C===v.length)return s(m,A),be&&en(m,C),k;if(A===null){for(;C<v.length;C++)A=h(m,v[C],_),A!==null&&(x=a(A,x,C),S===null?k=A:S.sibling=A,S=A);return be&&en(m,C),k}for(A=n(m,A);C<v.length;C++)L=p(A,m,C,v[C],_),L!==null&&(e&&L.alternate!==null&&A.delete(L.key===null?C:L.key),x=a(L,x,C),S===null?k=L:S.sibling=L,S=L);return e&&A.forEach(function(D){return t(m,D)}),be&&en(m,C),k}function y(m,x,v,_){var k=Cr(v);if(typeof k!="function")throw Error(F(150));if(v=k.call(v),v==null)throw Error(F(151));for(var S=k=null,A=x,C=x=0,L=null,R=v.next();A!==null&&!R.done;C++,R=v.next()){A.index>C?(L=A,A=null):L=A.sibling;var D=f(m,A,R.value,_);if(D===null){A===null&&(A=L);break}e&&A&&D.alternate===null&&t(m,A),x=a(D,x,C),S===null?k=D:S.sibling=D,S=D,A=L}if(R.done)return s(m,A),be&&en(m,C),k;if(A===null){for(;!R.done;C++,R=v.next())R=h(m,R.value,_),R!==null&&(x=a(R,x,C),S===null?k=R:S.sibling=R,S=R);return be&&en(m,C),k}for(A=n(m,A);!R.done;C++,R=v.next())R=p(A,m,C,R.value,_),R!==null&&(e&&R.alternate!==null&&A.delete(R.key===null?C:R.key),x=a(R,x,C),S===null?k=R:S.sibling=R,S=R);return e&&A.forEach(function(T){return t(m,T)}),be&&en(m,C),k}function b(m,x,v,_){if(typeof v=="object"&&v!==null&&v.type===Dn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ea:e:{for(var k=v.key,S=x;S!==null;){if(S.key===k){if(k=v.type,k===Dn){if(S.tag===7){s(m,S.sibling),x=r(S,v.props.children),x.return=m,m=x;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===js&&Jh(k)===S.type){s(m,S.sibling),x=r(S,v.props),x.ref=Ar(m,S,v),x.return=m,m=x;break e}s(m,S);break}else t(m,S);S=S.sibling}v.type===Dn?(x=fn(v.props.children,m.mode,_,v.key),x.return=m,m=x):(_=Oa(v.type,v.key,v.props,null,m.mode,_),_.ref=Ar(m,x,v),_.return=m,m=_)}return o(m);case Mn:e:{for(S=v.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){s(m,x.sibling),x=r(x,v.children||[]),x.return=m,m=x;break e}else{s(m,x);break}else t(m,x);x=x.sibling}x=Cl(v,m.mode,_),x.return=m,m=x}return o(m);case js:return S=v._init,b(m,x,S(v._payload),_)}if(Ir(v))return w(m,x,v,_);if(Cr(v))return y(m,x,v,_);da(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(s(m,x.sibling),x=r(x,v),x.return=m,m=x):(s(m,x),x=Sl(v,m.mode,_),x.return=m,m=x),o(m)):s(m,x)}return b}var or=Ag(!0),Lg=Ag(!1),to=Hs(null),so=null,Vn=null,Wu=null;function Gu(){Wu=Vn=so=null}function Ku(e){var t=to.current;ye(to),e._currentValue=t}function Cc(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function tr(e,t){so=e,Wu=Vn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ut=!0),e.firstContext=null)}function Rt(e){var t=e._currentValue;if(Wu!==e)if(e={context:e,memoizedValue:t,next:null},Vn===null){if(so===null)throw Error(F(308));Vn=e,so.dependencies={lanes:0,firstContext:e}}else Vn=Vn.next=e;return t}var ln=null;function Zu(e){ln===null?ln=[e]:ln.push(e)}function Mg(e,t,s,n){var r=t.interleaved;return r===null?(s.next=s,Zu(t)):(s.next=r.next,r.next=s),t.interleaved=s,hs(e,n)}function hs(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var _s=!1;function Yu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function as(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $s(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ce&2){var r=n.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),n.pending=t,hs(e,s)}return r=n.interleaved,r===null?(t.next=t,Zu(n)):(t.next=r.next,r.next=t),n.interleaved=t,hs(e,s)}function Ra(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Du(e,s)}}function Xh(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?r=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?r=a=t:a=a.next=t}else r=a=t;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function no(e,t,s,n){var r=e.updateQueue;_s=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=r.baseState;o=0,d=u=c=null,l=a;do{var f=l.lane,p=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,y=l;switch(f=t,p=s,y.tag){case 1:if(w=y.payload,typeof w=="function"){h=w.call(p,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,f=typeof w=="function"?w.call(p,h,f):w,f==null)break e;h=ke({},h,f);break e;case 2:_s=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,t=r.shared.interleaved,t!==null){r=t;do o|=r.lane,r=r.next;while(r!==t)}else a===null&&(r.shared.lanes=0);vn|=o,e.lanes=o,e.memoizedState=h}}function ef(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(F(191,r));r.call(n)}}}var Ui={},Qt=Hs(Ui),bi=Hs(Ui),ji=Hs(Ui);function cn(e){if(e===Ui)throw Error(F(174));return e}function Qu(e,t){switch(me(ji,t),me(bi,e),me(Qt,Ui),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=oc(t,e)}ye(Qt),me(Qt,t)}function lr(){ye(Qt),ye(bi),ye(ji)}function $g(e){cn(ji.current);var t=cn(Qt.current),s=oc(t,e.type);t!==s&&(me(bi,e),me(Qt,s))}function Ju(e){bi.current===e&&(ye(Qt),ye(bi))}var je=Hs(0);function ro(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var wl=[];function Xu(){for(var e=0;e<wl.length;e++)wl[e]._workInProgressVersionPrimary=null;wl.length=0}var Aa=gs.ReactCurrentDispatcher,bl=gs.ReactCurrentBatchConfig,yn=0,Ne=null,Le=null,ze=null,io=!1,Qr=!1,_i=0,r1=0;function Ke(){throw Error(F(321))}function ed(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!qt(e[s],t[s]))return!1;return!0}function td(e,t,s,n,r,a){if(yn=a,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Aa.current=e===null||e.memoizedState===null?l1:c1,e=s(n,r),Qr){a=0;do{if(Qr=!1,_i=0,25<=a)throw Error(F(301));a+=1,ze=Le=null,t.updateQueue=null,Aa.current=u1,e=s(n,r)}while(Qr)}if(Aa.current=ao,t=Le!==null&&Le.next!==null,yn=0,ze=Le=Ne=null,io=!1,t)throw Error(F(300));return e}function sd(){var e=_i!==0;return _i=0,e}function Gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Ne.memoizedState=ze=e:ze=ze.next=e,ze}function At(){if(Le===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=ze===null?Ne.memoizedState:ze.next;if(t!==null)ze=t,Le=e;else{if(e===null)throw Error(F(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},ze===null?Ne.memoizedState=ze=e:ze=ze.next=e}return ze}function Ni(e,t){return typeof t=="function"?t(e):t}function jl(e){var t=At(),s=t.queue;if(s===null)throw Error(F(311));s.lastRenderedReducer=e;var n=Le,r=n.baseQueue,a=s.pending;if(a!==null){if(r!==null){var o=r.next;r.next=a.next,a.next=o}n.baseQueue=r=a,s.pending=null}if(r!==null){a=r.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((yn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Ne.lanes|=d,vn|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,qt(n,t.memoizedState)||(ut=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){r=e;do a=r.lane,Ne.lanes|=a,vn|=a,r=r.next;while(r!==e)}else r===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function _l(e){var t=At(),s=t.queue;if(s===null)throw Error(F(311));s.lastRenderedReducer=e;var n=s.dispatch,r=s.pending,a=t.memoizedState;if(r!==null){s.pending=null;var o=r=r.next;do a=e(a,o.action),o=o.next;while(o!==r);qt(a,t.memoizedState)||(ut=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),s.lastRenderedState=a}return[a,n]}function Og(){}function Ig(e,t){var s=Ne,n=At(),r=t(),a=!qt(n.memoizedState,r);if(a&&(n.memoizedState=r,ut=!0),n=n.queue,nd(Ug.bind(null,s,n,e),[e]),n.getSnapshot!==t||a||ze!==null&&ze.memoizedState.tag&1){if(s.flags|=2048,ki(9,Fg.bind(null,s,n,r,t),void 0,null),Fe===null)throw Error(F(349));yn&30||zg(s,t,r)}return r}function zg(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Fg(e,t,s,n){t.value=s,t.getSnapshot=n,Bg(t)&&Vg(e)}function Ug(e,t,s){return s(function(){Bg(t)&&Vg(e)})}function Bg(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!qt(e,s)}catch{return!0}}function Vg(e){var t=hs(e,1);t!==null&&Ut(t,e,1,-1)}function tf(e){var t=Gt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:e},t.queue=e,e=e.dispatch=o1.bind(null,Ne,e),[t.memoizedState,e]}function ki(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function qg(){return At().memoizedState}function La(e,t,s,n){var r=Gt();Ne.flags|=e,r.memoizedState=ki(1|t,s,void 0,n===void 0?null:n)}function Ro(e,t,s,n){var r=At();n=n===void 0?null:n;var a=void 0;if(Le!==null){var o=Le.memoizedState;if(a=o.destroy,n!==null&&ed(n,o.deps)){r.memoizedState=ki(t,s,a,n);return}}Ne.flags|=e,r.memoizedState=ki(1|t,s,a,n)}function sf(e,t){return La(8390656,8,e,t)}function nd(e,t){return Ro(2048,8,e,t)}function Hg(e,t){return Ro(4,2,e,t)}function Wg(e,t){return Ro(4,4,e,t)}function Gg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Kg(e,t,s){return s=s!=null?s.concat([e]):null,Ro(4,4,Gg.bind(null,t,e),s)}function rd(){}function Zg(e,t){var s=At();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&ed(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function Yg(e,t){var s=At();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&ed(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function Qg(e,t,s){return yn&21?(qt(s,t)||(s=sg(),Ne.lanes|=s,vn|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ut=!0),e.memoizedState=s)}function i1(e,t){var s=ue;ue=s!==0&&4>s?s:4,e(!0);var n=bl.transition;bl.transition={};try{e(!1),t()}finally{ue=s,bl.transition=n}}function Jg(){return At().memoizedState}function a1(e,t,s){var n=Is(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Xg(e))e0(t,s);else if(s=Mg(e,t,s,n),s!==null){var r=rt();Ut(s,e,n,r),t0(s,t,n)}}function o1(e,t,s){var n=Is(e),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Xg(e))e0(t,r);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,s);if(r.hasEagerState=!0,r.eagerState=l,qt(l,o)){var c=t.interleaved;c===null?(r.next=r,Zu(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}s=Mg(e,t,r,n),s!==null&&(r=rt(),Ut(s,e,n,r),t0(s,t,n))}}function Xg(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function e0(e,t){Qr=io=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function t0(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Du(e,s)}}var ao={readContext:Rt,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},l1={readContext:Rt,useCallback:function(e,t){return Gt().memoizedState=[e,t===void 0?null:t],e},useContext:Rt,useEffect:sf,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,La(4194308,4,Gg.bind(null,t,e),s)},useLayoutEffect:function(e,t){return La(4194308,4,e,t)},useInsertionEffect:function(e,t){return La(4,2,e,t)},useMemo:function(e,t){var s=Gt();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=Gt();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=a1.bind(null,Ne,e),[n.memoizedState,e]},useRef:function(e){var t=Gt();return e={current:e},t.memoizedState=e},useState:tf,useDebugValue:rd,useDeferredValue:function(e){return Gt().memoizedState=e},useTransition:function(){var e=tf(!1),t=e[0];return e=i1.bind(null,e[1]),Gt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=Ne,r=Gt();if(be){if(s===void 0)throw Error(F(407));s=s()}else{if(s=t(),Fe===null)throw Error(F(349));yn&30||zg(n,t,s)}r.memoizedState=s;var a={value:s,getSnapshot:t};return r.queue=a,sf(Ug.bind(null,n,a,e),[e]),n.flags|=2048,ki(9,Fg.bind(null,n,a,s,t),void 0,null),s},useId:function(){var e=Gt(),t=Fe.identifierPrefix;if(be){var s=is,n=rs;s=(n&~(1<<32-Ft(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=_i++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=r1++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},c1={readContext:Rt,useCallback:Zg,useContext:Rt,useEffect:nd,useImperativeHandle:Kg,useInsertionEffect:Hg,useLayoutEffect:Wg,useMemo:Yg,useReducer:jl,useRef:qg,useState:function(){return jl(Ni)},useDebugValue:rd,useDeferredValue:function(e){var t=At();return Qg(t,Le.memoizedState,e)},useTransition:function(){var e=jl(Ni)[0],t=At().memoizedState;return[e,t]},useMutableSource:Og,useSyncExternalStore:Ig,useId:Jg,unstable_isNewReconciler:!1},u1={readContext:Rt,useCallback:Zg,useContext:Rt,useEffect:nd,useImperativeHandle:Kg,useInsertionEffect:Hg,useLayoutEffect:Wg,useMemo:Yg,useReducer:_l,useRef:qg,useState:function(){return _l(Ni)},useDebugValue:rd,useDeferredValue:function(e){var t=At();return Le===null?t.memoizedState=e:Qg(t,Le.memoizedState,e)},useTransition:function(){var e=_l(Ni)[0],t=At().memoizedState;return[e,t]},useMutableSource:Og,useSyncExternalStore:Ig,useId:Jg,unstable_isNewReconciler:!1};function $t(e,t){if(e&&e.defaultProps){t=ke({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Ec(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:ke({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ao={isMounted:function(e){return(e=e._reactInternals)?_n(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=rt(),r=Is(e),a=as(n,r);a.payload=t,s!=null&&(a.callback=s),t=$s(e,a,r),t!==null&&(Ut(t,e,r,n),Ra(t,e,r))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=rt(),r=Is(e),a=as(n,r);a.tag=1,a.payload=t,s!=null&&(a.callback=s),t=$s(e,a,r),t!==null&&(Ut(t,e,r,n),Ra(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=rt(),n=Is(e),r=as(s,n);r.tag=2,t!=null&&(r.callback=t),t=$s(e,r,n),t!==null&&(Ut(t,e,n,s),Ra(t,e,n))}};function nf(e,t,s,n,r,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!xi(s,n)||!xi(r,a):!0}function s0(e,t,s){var n=!1,r=Us,a=t.contextType;return typeof a=="object"&&a!==null?a=Rt(a):(r=ht(t)?gn:Xe.current,n=t.contextTypes,a=(n=n!=null)?ir(e,r):Us),t=new t(s,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ao,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function rf(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&Ao.enqueueReplaceState(t,t.state,null)}function Tc(e,t,s,n){var r=e.stateNode;r.props=s,r.state=e.memoizedState,r.refs={},Yu(e);var a=t.contextType;typeof a=="object"&&a!==null?r.context=Rt(a):(a=ht(t)?gn:Xe.current,r.context=ir(e,a)),r.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Ec(e,t,a,s),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Ao.enqueueReplaceState(r,r.state,null),no(e,s,r,n),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function cr(e,t){try{var s="",n=t;do s+=Iv(n),n=n.return;while(n);var r=s}catch(a){r=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:r,digest:null}}function Nl(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Pc(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var d1=typeof WeakMap=="function"?WeakMap:Map;function n0(e,t,s){s=as(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){lo||(lo=!0,Fc=n),Pc(e,t)},s}function r0(e,t,s){s=as(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var r=t.value;s.payload=function(){return n(r)},s.callback=function(){Pc(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){Pc(e,t),typeof n!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function af(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new d1;var r=new Set;n.set(t,r)}else r=n.get(t),r===void 0&&(r=new Set,n.set(t,r));r.has(s)||(r.add(s),e=k1.bind(null,e,t,s),t.then(e,e))}function of(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lf(e,t,s,n,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=as(-1,1),t.tag=2,$s(s,t,1))),s.lanes|=1),e)}var h1=gs.ReactCurrentOwner,ut=!1;function st(e,t,s,n){t.child=e===null?Lg(t,null,s,n):or(t,e.child,s,n)}function cf(e,t,s,n,r){s=s.render;var a=t.ref;return tr(t,r),n=td(e,t,s,n,a,r),s=sd(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,fs(e,t,r)):(be&&s&&Vu(t),t.flags|=1,st(e,t,n,r),t.child)}function uf(e,t,s,n,r){if(e===null){var a=s.type;return typeof a=="function"&&!hd(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=a,i0(e,t,a,n,r)):(e=Oa(s.type,null,n,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&r)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:xi,s(o,n)&&e.ref===t.ref)return fs(e,t,r)}return t.flags|=1,e=zs(a,n),e.ref=t.ref,e.return=t,t.child=e}function i0(e,t,s,n,r){if(e!==null){var a=e.memoizedProps;if(xi(a,n)&&e.ref===t.ref)if(ut=!1,t.pendingProps=n=a,(e.lanes&r)!==0)e.flags&131072&&(ut=!0);else return t.lanes=e.lanes,fs(e,t,r)}return Rc(e,t,s,n,r)}function a0(e,t,s){var n=t.pendingProps,r=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Hn,pt),pt|=s;else{if(!(s&1073741824))return e=a!==null?a.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,me(Hn,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:s,me(Hn,pt),pt|=n}else a!==null?(n=a.baseLanes|s,t.memoizedState=null):n=s,me(Hn,pt),pt|=n;return st(e,t,r,s),t.child}function o0(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Rc(e,t,s,n,r){var a=ht(s)?gn:Xe.current;return a=ir(t,a),tr(t,r),s=td(e,t,s,n,a,r),n=sd(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,fs(e,t,r)):(be&&n&&Vu(t),t.flags|=1,st(e,t,s,r),t.child)}function df(e,t,s,n,r){if(ht(s)){var a=!0;Ja(t)}else a=!1;if(tr(t,r),t.stateNode===null)Ma(e,t),s0(t,s,n),Tc(t,s,n,r),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=s.contextType;typeof u=="object"&&u!==null?u=Rt(u):(u=ht(s)?gn:Xe.current,u=ir(t,u));var d=s.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&rf(t,o,n,u),_s=!1;var f=t.memoizedState;o.state=f,no(t,n,o,r),c=t.memoizedState,l!==n||f!==c||dt.current||_s?(typeof d=="function"&&(Ec(t,s,d,n),c=t.memoizedState),(l=_s||nf(t,s,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Dg(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:$t(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Rt(c):(c=ht(s)?gn:Xe.current,c=ir(t,c));var p=s.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&rf(t,o,n,c),_s=!1,f=t.memoizedState,o.state=f,no(t,n,o,r);var w=t.memoizedState;l!==h||f!==w||dt.current||_s?(typeof p=="function"&&(Ec(t,s,p,n),w=t.memoizedState),(u=_s||nf(t,s,u,n,f,w,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,w,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),o.props=n,o.state=w,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Ac(e,t,s,n,a,r)}function Ac(e,t,s,n,r,a){o0(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return r&&Zh(t,s,!1),fs(e,t,a);n=t.stateNode,h1.current=t;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=or(t,e.child,null,a),t.child=or(t,null,l,a)):st(e,t,l,a),t.memoizedState=n.state,r&&Zh(t,s,!0),t.child}function l0(e){var t=e.stateNode;t.pendingContext?Kh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kh(e,t.context,!1),Qu(e,t.containerInfo)}function hf(e,t,s,n,r){return ar(),Hu(r),t.flags|=256,st(e,t,s,n),t.child}var Lc={dehydrated:null,treeContext:null,retryLane:0};function Mc(e){return{baseLanes:e,cachePool:null,transitions:null}}function c0(e,t,s){var n=t.pendingProps,r=je.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(r&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),me(je,r&1),e===null)return Sc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Do(o,n,0,null),e=fn(e,n,s,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Mc(s),t.memoizedState=Lc,e):id(t,o));if(r=e.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return f1(e,t,o,n,l,r,s);if(a){a=n.fallback,o=t.mode,r=e.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==r?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=zs(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?a=zs(l,a):(a=fn(a,o,s,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?Mc(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~s,t.memoizedState=Lc,n}return a=e.child,e=a.sibling,n=zs(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function id(e,t){return t=Do({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ha(e,t,s,n){return n!==null&&Hu(n),or(t,e.child,null,s),e=id(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function f1(e,t,s,n,r,a,o){if(s)return t.flags&256?(t.flags&=-257,n=Nl(Error(F(422))),ha(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,r=t.mode,n=Do({mode:"visible",children:n.children},r,0,null),a=fn(a,r,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&or(t,e.child,null,o),t.child.memoizedState=Mc(o),t.memoizedState=Lc,a);if(!(t.mode&1))return ha(e,t,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(F(419)),n=Nl(a,n,void 0),ha(e,t,o,n)}if(l=(o&e.childLanes)!==0,ut||l){if(n=Fe,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==a.retryLane&&(a.retryLane=r,hs(e,r),Ut(n,e,r,-1))}return dd(),n=Nl(Error(F(421))),ha(e,t,o,n)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=S1.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,gt=Ds(r.nextSibling),xt=t,be=!0,zt=null,e!==null&&(St[Ct++]=rs,St[Ct++]=is,St[Ct++]=xn,rs=e.id,is=e.overflow,xn=t),t=id(t,n.children),t.flags|=4096,t)}function ff(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Cc(e.return,t,s)}function kl(e,t,s,n,r){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=r)}function u0(e,t,s){var n=t.pendingProps,r=n.revealOrder,a=n.tail;if(st(e,t,n.children,s),n=je.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ff(e,s,t);else if(e.tag===19)ff(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(me(je,n),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(s=t.child,r=null;s!==null;)e=s.alternate,e!==null&&ro(e)===null&&(r=s),s=s.sibling;s=r,s===null?(r=t.child,t.child=null):(r=s.sibling,s.sibling=null),kl(t,!1,r,s,a);break;case"backwards":for(s=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&ro(e)===null){t.child=r;break}e=r.sibling,r.sibling=s,s=r,r=e}kl(t,!0,s,null,a);break;case"together":kl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ma(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fs(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),vn|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,s=zs(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=zs(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function m1(e,t,s){switch(t.tag){case 3:l0(t),ar();break;case 5:$g(t);break;case 1:ht(t.type)&&Ja(t);break;case 4:Qu(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,r=t.memoizedProps.value;me(to,n._currentValue),n._currentValue=r;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(me(je,je.current&1),t.flags|=128,null):s&t.child.childLanes?c0(e,t,s):(me(je,je.current&1),e=fs(e,t,s),e!==null?e.sibling:null);me(je,je.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return u0(e,t,s);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),me(je,je.current),n)break;return null;case 22:case 23:return t.lanes=0,a0(e,t,s)}return fs(e,t,s)}var d0,Dc,h0,f0;d0=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Dc=function(){};h0=function(e,t,s,n){var r=e.memoizedProps;if(r!==n){e=t.stateNode,cn(Qt.current);var a=null;switch(s){case"input":r=nc(e,r),n=nc(e,n),a=[];break;case"select":r=ke({},r,{value:void 0}),n=ke({},n,{value:void 0}),a=[];break;case"textarea":r=ac(e,r),n=ac(e,n),a=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ya)}lc(s,n);var o;s=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ui.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(a||(a=[]),a.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ui.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&xe("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}s&&(a=a||[]).push("style",s);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};f0=function(e,t,s,n){s!==n&&(t.flags|=4)};function Lr(e,t){if(!be)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var r=e.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function p1(e,t,s){var n=t.pendingProps;switch(qu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return ht(t.type)&&Qa(),Ze(t),null;case 3:return n=t.stateNode,lr(),ye(dt),ye(Xe),Xu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ua(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zt!==null&&(Vc(zt),zt=null))),Dc(e,t),Ze(t),null;case 5:Ju(t);var r=cn(ji.current);if(s=t.type,e!==null&&t.stateNode!=null)h0(e,t,s,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(F(166));return Ze(t),null}if(e=cn(Qt.current),ua(t)){n=t.stateNode,s=t.type;var a=t.memoizedProps;switch(n[Kt]=t,n[wi]=a,e=(t.mode&1)!==0,s){case"dialog":xe("cancel",n),xe("close",n);break;case"iframe":case"object":case"embed":xe("load",n);break;case"video":case"audio":for(r=0;r<Fr.length;r++)xe(Fr[r],n);break;case"source":xe("error",n);break;case"img":case"image":case"link":xe("error",n),xe("load",n);break;case"details":xe("toggle",n);break;case"input":bh(n,a),xe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},xe("invalid",n);break;case"textarea":_h(n,a),xe("invalid",n)}lc(s,a),r=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&ca(n.textContent,l,e),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&ca(n.textContent,l,e),r=["children",""+l]):ui.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&xe("scroll",n)}switch(s){case"input":ta(n),jh(n,a,!0);break;case"textarea":ta(n),Nh(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ya)}n=r,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Up(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),s==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[Kt]=t,e[wi]=n,d0(e,t,!1,!1),t.stateNode=e;e:{switch(o=cc(s,n),s){case"dialog":xe("cancel",e),xe("close",e),r=n;break;case"iframe":case"object":case"embed":xe("load",e),r=n;break;case"video":case"audio":for(r=0;r<Fr.length;r++)xe(Fr[r],e);r=n;break;case"source":xe("error",e),r=n;break;case"img":case"image":case"link":xe("error",e),xe("load",e),r=n;break;case"details":xe("toggle",e),r=n;break;case"input":bh(e,n),r=nc(e,n),xe("invalid",e);break;case"option":r=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},r=ke({},n,{value:void 0}),xe("invalid",e);break;case"textarea":_h(e,n),r=ac(e,n),xe("invalid",e);break;default:r=n}lc(s,r),l=r;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?qp(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Bp(e,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&di(e,c):typeof c=="number"&&di(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ui.hasOwnProperty(a)?c!=null&&a==="onScroll"&&xe("scroll",e):c!=null&&Tu(e,a,c,o))}switch(s){case"input":ta(e),jh(e,n,!1);break;case"textarea":ta(e),Nh(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Fs(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Qn(e,!!n.multiple,a,!1):n.defaultValue!=null&&Qn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=Ya)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(e&&t.stateNode!=null)f0(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(F(166));if(s=cn(ji.current),cn(Qt.current),ua(t)){if(n=t.stateNode,s=t.memoizedProps,n[Kt]=t,(a=n.nodeValue!==s)&&(e=xt,e!==null))switch(e.tag){case 3:ca(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ca(n.nodeValue,s,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Kt]=t,t.stateNode=n}return Ze(t),null;case 13:if(ye(je),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(be&&gt!==null&&t.mode&1&&!(t.flags&128))Rg(),ar(),t.flags|=98560,a=!1;else if(a=ua(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(F(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(F(317));a[Kt]=t}else ar(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),a=!1}else zt!==null&&(Vc(zt),zt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||je.current&1?Me===0&&(Me=3):dd())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return lr(),Dc(e,t),e===null&&yi(t.stateNode.containerInfo),Ze(t),null;case 10:return Ku(t.type._context),Ze(t),null;case 17:return ht(t.type)&&Qa(),Ze(t),null;case 19:if(ye(je),a=t.memoizedState,a===null)return Ze(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)Lr(a,!1);else{if(Me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ro(e),o!==null){for(t.flags|=128,Lr(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)a=s,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return me(je,je.current&1|2),t.child}e=e.sibling}a.tail!==null&&Te()>ur&&(t.flags|=128,n=!0,Lr(a,!1),t.lanes=4194304)}else{if(!n)if(e=ro(o),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Lr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!be)return Ze(t),null}else 2*Te()-a.renderingStartTime>ur&&s!==1073741824&&(t.flags|=128,n=!0,Lr(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(s=a.last,s!==null?s.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Te(),t.sibling=null,s=je.current,me(je,n?s&1|2:s&1),t):(Ze(t),null);case 22:case 23:return ud(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?pt&1073741824&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function g1(e,t){switch(qu(t),t.tag){case 1:return ht(t.type)&&Qa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return lr(),ye(dt),ye(Xe),Xu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ju(t),null;case 13:if(ye(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));ar()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ye(je),null;case 4:return lr(),null;case 10:return Ku(t.type._context),null;case 22:case 23:return ud(),null;case 24:return null;default:return null}}var fa=!1,Qe=!1,x1=typeof WeakSet=="function"?WeakSet:Set,q=null;function qn(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ce(e,t,n)}else s.current=null}function $c(e,t,s){try{s()}catch(n){Ce(e,t,n)}}var mf=!1;function y1(e,t){if(vc=Ga,e=yg(),Bu(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==s||r!==0&&h.nodeType!==3||(l=o+r),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===s&&++u===r&&(l=o),f===a&&++d===n&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(wc={focusedElem:e,selectionRange:s},Ga=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,b=w.memoizedState,m=t.stateNode,x=m.getSnapshotBeforeUpdate(t.elementType===t.type?y:$t(t.type,y),b);m.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(_){Ce(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return w=mf,mf=!1,w}function Jr(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,a!==void 0&&$c(t,s,a)}r=r.next}while(r!==n)}}function Lo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function Oc(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function m0(e){var t=e.alternate;t!==null&&(e.alternate=null,m0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Kt],delete t[wi],delete t[_c],delete t[e1],delete t[t1])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function p0(e){return e.tag===5||e.tag===3||e.tag===4}function pf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||p0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ic(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Ya));else if(n!==4&&(e=e.child,e!==null))for(Ic(e,t,s),e=e.sibling;e!==null;)Ic(e,t,s),e=e.sibling}function zc(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(zc(e,t,s),e=e.sibling;e!==null;)zc(e,t,s),e=e.sibling}var Ue=null,Ot=!1;function ys(e,t,s){for(s=s.child;s!==null;)g0(e,t,s),s=s.sibling}function g0(e,t,s){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(ko,s)}catch{}switch(s.tag){case 5:Qe||qn(s,t);case 6:var n=Ue,r=Ot;Ue=null,ys(e,t,s),Ue=n,Ot=r,Ue!==null&&(Ot?(e=Ue,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Ue.removeChild(s.stateNode));break;case 18:Ue!==null&&(Ot?(e=Ue,s=s.stateNode,e.nodeType===8?yl(e.parentNode,s):e.nodeType===1&&yl(e,s),pi(e)):yl(Ue,s.stateNode));break;case 4:n=Ue,r=Ot,Ue=s.stateNode.containerInfo,Ot=!0,ys(e,t,s),Ue=n,Ot=r;break;case 0:case 11:case 14:case 15:if(!Qe&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var a=r,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&$c(s,t,o),r=r.next}while(r!==n)}ys(e,t,s);break;case 1:if(!Qe&&(qn(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Ce(s,t,l)}ys(e,t,s);break;case 21:ys(e,t,s);break;case 22:s.mode&1?(Qe=(n=Qe)||s.memoizedState!==null,ys(e,t,s),Qe=n):ys(e,t,s);break;default:ys(e,t,s)}}function gf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new x1),t.forEach(function(n){var r=C1.bind(null,e,n);s.has(n)||(s.add(n),n.then(r,r))})}}function Mt(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ue=l.stateNode,Ot=!1;break e;case 3:Ue=l.stateNode.containerInfo,Ot=!0;break e;case 4:Ue=l.stateNode.containerInfo,Ot=!0;break e}l=l.return}if(Ue===null)throw Error(F(160));g0(a,o,r),Ue=null,Ot=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Ce(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)x0(t,e),t=t.sibling}function x0(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mt(t,e),Ht(e),n&4){try{Jr(3,e,e.return),Lo(3,e)}catch(y){Ce(e,e.return,y)}try{Jr(5,e,e.return)}catch(y){Ce(e,e.return,y)}}break;case 1:Mt(t,e),Ht(e),n&512&&s!==null&&qn(s,s.return);break;case 5:if(Mt(t,e),Ht(e),n&512&&s!==null&&qn(s,s.return),e.flags&32){var r=e.stateNode;try{di(r,"")}catch(y){Ce(e,e.return,y)}}if(n&4&&(r=e.stateNode,r!=null)){var a=e.memoizedProps,o=s!==null?s.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&zp(r,a),cc(l,o);var u=cc(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?qp(r,h):d==="dangerouslySetInnerHTML"?Bp(r,h):d==="children"?di(r,h):Tu(r,d,h,u)}switch(l){case"input":rc(r,a);break;case"textarea":Fp(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Qn(r,!!a.multiple,p,!1):f!==!!a.multiple&&(a.defaultValue!=null?Qn(r,!!a.multiple,a.defaultValue,!0):Qn(r,!!a.multiple,a.multiple?[]:"",!1))}r[wi]=a}catch(y){Ce(e,e.return,y)}}break;case 6:if(Mt(t,e),Ht(e),n&4){if(e.stateNode===null)throw Error(F(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(y){Ce(e,e.return,y)}}break;case 3:if(Mt(t,e),Ht(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{pi(t.containerInfo)}catch(y){Ce(e,e.return,y)}break;case 4:Mt(t,e),Ht(e);break;case 13:Mt(t,e),Ht(e),r=e.child,r.flags&8192&&(a=r.memoizedState!==null,r.stateNode.isHidden=a,!a||r.alternate!==null&&r.alternate.memoizedState!==null||(ld=Te())),n&4&&gf(e);break;case 22:if(d=s!==null&&s.memoizedState!==null,e.mode&1?(Qe=(u=Qe)||d,Mt(t,e),Qe=u):Mt(t,e),Ht(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(q=e,d=e.child;d!==null;){for(h=q=d;q!==null;){switch(f=q,p=f.child,f.tag){case 0:case 11:case 14:case 15:Jr(4,f,f.return);break;case 1:qn(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){n=f,s=f.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){Ce(n,s,y)}}break;case 5:qn(f,f.return);break;case 22:if(f.memoizedState!==null){yf(h);continue}}p!==null?(p.return=f,q=p):yf(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Vp("display",o))}catch(y){Ce(e,e.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){Ce(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Mt(t,e),Ht(e),n&4&&gf(e);break;case 21:break;default:Mt(t,e),Ht(e)}}function Ht(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(p0(s)){var n=s;break e}s=s.return}throw Error(F(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(di(r,""),n.flags&=-33);var a=pf(e);zc(e,a,r);break;case 3:case 4:var o=n.stateNode.containerInfo,l=pf(e);Ic(e,l,o);break;default:throw Error(F(161))}}catch(c){Ce(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function v1(e,t,s){q=e,y0(e)}function y0(e,t,s){for(var n=(e.mode&1)!==0;q!==null;){var r=q,a=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||fa;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Qe;l=fa;var u=Qe;if(fa=o,(Qe=c)&&!u)for(q=r;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?vf(r):c!==null?(c.return=o,q=c):vf(r);for(;a!==null;)q=a,y0(a),a=a.sibling;q=r,fa=l,Qe=u}xf(e)}else r.subtreeFlags&8772&&a!==null?(a.return=r,q=a):xf(e)}}function xf(e){for(;q!==null;){var t=q;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Qe||Lo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Qe)if(s===null)n.componentDidMount();else{var r=t.elementType===t.type?s.memoizedProps:$t(t.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&ef(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}ef(t,o,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&pi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Qe||t.flags&512&&Oc(t)}catch(f){Ce(t,t.return,f)}}if(t===e){q=null;break}if(s=t.sibling,s!==null){s.return=t.return,q=s;break}q=t.return}}function yf(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var s=t.sibling;if(s!==null){s.return=t.return,q=s;break}q=t.return}}function vf(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Lo(4,t)}catch(c){Ce(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var r=t.return;try{n.componentDidMount()}catch(c){Ce(t,r,c)}}var a=t.return;try{Oc(t)}catch(c){Ce(t,a,c)}break;case 5:var o=t.return;try{Oc(t)}catch(c){Ce(t,o,c)}}}catch(c){Ce(t,t.return,c)}if(t===e){q=null;break}var l=t.sibling;if(l!==null){l.return=t.return,q=l;break}q=t.return}}var w1=Math.ceil,oo=gs.ReactCurrentDispatcher,ad=gs.ReactCurrentOwner,Tt=gs.ReactCurrentBatchConfig,ce=0,Fe=null,Re=null,Ve=0,pt=0,Hn=Hs(0),Me=0,Si=null,vn=0,Mo=0,od=0,Xr=null,lt=null,ld=0,ur=1/0,ts=null,lo=!1,Fc=null,Os=null,ma=!1,Ps=null,co=0,ei=0,Uc=null,Da=-1,$a=0;function rt(){return ce&6?Te():Da!==-1?Da:Da=Te()}function Is(e){return e.mode&1?ce&2&&Ve!==0?Ve&-Ve:n1.transition!==null?($a===0&&($a=sg()),$a):(e=ue,e!==0||(e=window.event,e=e===void 0?16:cg(e.type)),e):1}function Ut(e,t,s,n){if(50<ei)throw ei=0,Uc=null,Error(F(185));Ii(e,s,n),(!(ce&2)||e!==Fe)&&(e===Fe&&(!(ce&2)&&(Mo|=s),Me===4&&Ss(e,Ve)),ft(e,n),s===1&&ce===0&&!(t.mode&1)&&(ur=Te()+500,Po&&Ws()))}function ft(e,t){var s=e.callbackNode;nw(e,t);var n=Wa(e,e===Fe?Ve:0);if(n===0)s!==null&&Ch(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&Ch(s),t===1)e.tag===0?s1(wf.bind(null,e)):Eg(wf.bind(null,e)),Jw(function(){!(ce&6)&&Ws()}),s=null;else{switch(ng(n)){case 1:s=Mu;break;case 4:s=eg;break;case 16:s=Ha;break;case 536870912:s=tg;break;default:s=Ha}s=S0(s,v0.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function v0(e,t){if(Da=-1,$a=0,ce&6)throw Error(F(327));var s=e.callbackNode;if(sr()&&e.callbackNode!==s)return null;var n=Wa(e,e===Fe?Ve:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=uo(e,n);else{t=n;var r=ce;ce|=2;var a=b0();(Fe!==e||Ve!==t)&&(ts=null,ur=Te()+500,hn(e,t));do try{_1();break}catch(l){w0(e,l)}while(!0);Gu(),oo.current=a,ce=r,Re!==null?t=0:(Fe=null,Ve=0,t=Me)}if(t!==0){if(t===2&&(r=mc(e),r!==0&&(n=r,t=Bc(e,r))),t===1)throw s=Si,hn(e,0),Ss(e,n),ft(e,Te()),s;if(t===6)Ss(e,n);else{if(r=e.current.alternate,!(n&30)&&!b1(r)&&(t=uo(e,n),t===2&&(a=mc(e),a!==0&&(n=a,t=Bc(e,a))),t===1))throw s=Si,hn(e,0),Ss(e,n),ft(e,Te()),s;switch(e.finishedWork=r,e.finishedLanes=n,t){case 0:case 1:throw Error(F(345));case 2:tn(e,lt,ts);break;case 3:if(Ss(e,n),(n&130023424)===n&&(t=ld+500-Te(),10<t)){if(Wa(e,0)!==0)break;if(r=e.suspendedLanes,(r&n)!==n){rt(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=jc(tn.bind(null,e,lt,ts),t);break}tn(e,lt,ts);break;case 4:if(Ss(e,n),(n&4194240)===n)break;for(t=e.eventTimes,r=-1;0<n;){var o=31-Ft(n);a=1<<o,o=t[o],o>r&&(r=o),n&=~a}if(n=r,n=Te()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*w1(n/1960))-n,10<n){e.timeoutHandle=jc(tn.bind(null,e,lt,ts),n);break}tn(e,lt,ts);break;case 5:tn(e,lt,ts);break;default:throw Error(F(329))}}}return ft(e,Te()),e.callbackNode===s?v0.bind(null,e):null}function Bc(e,t){var s=Xr;return e.current.memoizedState.isDehydrated&&(hn(e,t).flags|=256),e=uo(e,t),e!==2&&(t=lt,lt=s,t!==null&&Vc(t)),e}function Vc(e){lt===null?lt=e:lt.push.apply(lt,e)}function b1(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],a=r.getSnapshot;r=r.value;try{if(!qt(a(),r))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ss(e,t){for(t&=~od,t&=~Mo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Ft(t),n=1<<s;e[s]=-1,t&=~n}}function wf(e){if(ce&6)throw Error(F(327));sr();var t=Wa(e,0);if(!(t&1))return ft(e,Te()),null;var s=uo(e,t);if(e.tag!==0&&s===2){var n=mc(e);n!==0&&(t=n,s=Bc(e,n))}if(s===1)throw s=Si,hn(e,0),Ss(e,t),ft(e,Te()),s;if(s===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,tn(e,lt,ts),ft(e,Te()),null}function cd(e,t){var s=ce;ce|=1;try{return e(t)}finally{ce=s,ce===0&&(ur=Te()+500,Po&&Ws())}}function wn(e){Ps!==null&&Ps.tag===0&&!(ce&6)&&sr();var t=ce;ce|=1;var s=Tt.transition,n=ue;try{if(Tt.transition=null,ue=1,e)return e()}finally{ue=n,Tt.transition=s,ce=t,!(ce&6)&&Ws()}}function ud(){pt=Hn.current,ye(Hn)}function hn(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Qw(s)),Re!==null)for(s=Re.return;s!==null;){var n=s;switch(qu(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Qa();break;case 3:lr(),ye(dt),ye(Xe),Xu();break;case 5:Ju(n);break;case 4:lr();break;case 13:ye(je);break;case 19:ye(je);break;case 10:Ku(n.type._context);break;case 22:case 23:ud()}s=s.return}if(Fe=e,Re=e=zs(e.current,null),Ve=pt=t,Me=0,Si=null,od=Mo=vn=0,lt=Xr=null,ln!==null){for(t=0;t<ln.length;t++)if(s=ln[t],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,a=s.pending;if(a!==null){var o=a.next;a.next=r,n.next=o}s.pending=n}ln=null}return e}function w0(e,t){do{var s=Re;try{if(Gu(),Aa.current=ao,io){for(var n=Ne.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}io=!1}if(yn=0,ze=Le=Ne=null,Qr=!1,_i=0,ad.current=null,s===null||s.return===null){Me=1,Si=t,Re=null;break}e:{var a=e,o=s.return,l=s,c=t;if(t=Ve,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=of(o);if(p!==null){p.flags&=-257,lf(p,o,l,a,t),p.mode&1&&af(a,u,t),t=p,c=u;var w=t.updateQueue;if(w===null){var y=new Set;y.add(c),t.updateQueue=y}else w.add(c);break e}else{if(!(t&1)){af(a,u,t),dd();break e}c=Error(F(426))}}else if(be&&l.mode&1){var b=of(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),lf(b,o,l,a,t),Hu(cr(c,l));break e}}a=c=cr(c,l),Me!==4&&(Me=2),Xr===null?Xr=[a]:Xr.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var m=n0(a,c,t);Xh(a,m);break e;case 1:l=c;var x=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Os===null||!Os.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var _=r0(a,l,t);Xh(a,_);break e}}a=a.return}while(a!==null)}_0(s)}catch(k){t=k,Re===s&&s!==null&&(Re=s=s.return);continue}break}while(!0)}function b0(){var e=oo.current;return oo.current=ao,e===null?ao:e}function dd(){(Me===0||Me===3||Me===2)&&(Me=4),Fe===null||!(vn&268435455)&&!(Mo&268435455)||Ss(Fe,Ve)}function uo(e,t){var s=ce;ce|=2;var n=b0();(Fe!==e||Ve!==t)&&(ts=null,hn(e,t));do try{j1();break}catch(r){w0(e,r)}while(!0);if(Gu(),ce=s,oo.current=n,Re!==null)throw Error(F(261));return Fe=null,Ve=0,Me}function j1(){for(;Re!==null;)j0(Re)}function _1(){for(;Re!==null&&!Kv();)j0(Re)}function j0(e){var t=k0(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?_0(e):Re=t,ad.current=null}function _0(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=g1(s,t),s!==null){s.flags&=32767,Re=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Re=null;return}}else if(s=p1(s,t,pt),s!==null){Re=s;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);Me===0&&(Me=5)}function tn(e,t,s){var n=ue,r=Tt.transition;try{Tt.transition=null,ue=1,N1(e,t,s,n)}finally{Tt.transition=r,ue=n}return null}function N1(e,t,s,n){do sr();while(Ps!==null);if(ce&6)throw Error(F(327));s=e.finishedWork;var r=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var a=s.lanes|s.childLanes;if(rw(e,a),e===Fe&&(Re=Fe=null,Ve=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ma||(ma=!0,S0(Ha,function(){return sr(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=Tt.transition,Tt.transition=null;var o=ue;ue=1;var l=ce;ce|=4,ad.current=null,y1(e,s),x0(s,e),qw(wc),Ga=!!vc,wc=vc=null,e.current=s,v1(s),Zv(),ce=l,ue=o,Tt.transition=a}else e.current=s;if(ma&&(ma=!1,Ps=e,co=r),a=e.pendingLanes,a===0&&(Os=null),Jv(s.stateNode),ft(e,Te()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)r=t[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(lo)throw lo=!1,e=Fc,Fc=null,e;return co&1&&e.tag!==0&&sr(),a=e.pendingLanes,a&1?e===Uc?ei++:(ei=0,Uc=e):ei=0,Ws(),null}function sr(){if(Ps!==null){var e=ng(co),t=Tt.transition,s=ue;try{if(Tt.transition=null,ue=16>e?16:e,Ps===null)var n=!1;else{if(e=Ps,Ps=null,co=0,ce&6)throw Error(F(331));var r=ce;for(ce|=4,q=e.current;q!==null;){var a=q,o=a.child;if(q.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(q=u;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:Jr(8,d,a)}var h=d.child;if(h!==null)h.return=d,q=h;else for(;q!==null;){d=q;var f=d.sibling,p=d.return;if(m0(d),d===u){q=null;break}if(f!==null){f.return=p,q=f;break}q=p}}}var w=a.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}q=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,q=o;else e:for(;q!==null;){if(a=q,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Jr(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,q=m;break e}q=a.return}}var x=e.current;for(q=x;q!==null;){o=q;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,q=v;else e:for(o=x;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Lo(9,l)}}catch(k){Ce(l,l.return,k)}if(l===o){q=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,q=_;break e}q=l.return}}if(ce=r,Ws(),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(ko,e)}catch{}n=!0}return n}finally{ue=s,Tt.transition=t}}return!1}function bf(e,t,s){t=cr(s,t),t=n0(e,t,1),e=$s(e,t,1),t=rt(),e!==null&&(Ii(e,1,t),ft(e,t))}function Ce(e,t,s){if(e.tag===3)bf(e,e,s);else for(;t!==null;){if(t.tag===3){bf(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Os===null||!Os.has(n))){e=cr(s,e),e=r0(t,e,1),t=$s(t,e,1),e=rt(),t!==null&&(Ii(t,1,e),ft(t,e));break}}t=t.return}}function k1(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=rt(),e.pingedLanes|=e.suspendedLanes&s,Fe===e&&(Ve&s)===s&&(Me===4||Me===3&&(Ve&130023424)===Ve&&500>Te()-ld?hn(e,0):od|=s),ft(e,t)}function N0(e,t){t===0&&(e.mode&1?(t=ra,ra<<=1,!(ra&130023424)&&(ra=4194304)):t=1);var s=rt();e=hs(e,t),e!==null&&(Ii(e,t,s),ft(e,s))}function S1(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),N0(e,s)}function C1(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(F(314))}n!==null&&n.delete(t),N0(e,s)}var k0;k0=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||dt.current)ut=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return ut=!1,m1(e,t,s);ut=!!(e.flags&131072)}else ut=!1,be&&t.flags&1048576&&Tg(t,eo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ma(e,t),e=t.pendingProps;var r=ir(t,Xe.current);tr(t,s),r=td(null,t,n,e,r,s);var a=sd();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ht(n)?(a=!0,Ja(t)):a=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Yu(t),r.updater=Ao,t.stateNode=r,r._reactInternals=t,Tc(t,n,e,s),t=Ac(null,t,n,!0,a,s)):(t.tag=0,be&&a&&Vu(t),st(null,t,r,s),t=t.child),t;case 16:n=t.elementType;e:{switch(Ma(e,t),e=t.pendingProps,r=n._init,n=r(n._payload),t.type=n,r=t.tag=T1(n),e=$t(n,e),r){case 0:t=Rc(null,t,n,e,s);break e;case 1:t=df(null,t,n,e,s);break e;case 11:t=cf(null,t,n,e,s);break e;case 14:t=uf(null,t,n,$t(n.type,e),s);break e}throw Error(F(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:$t(n,r),Rc(e,t,n,r,s);case 1:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:$t(n,r),df(e,t,n,r,s);case 3:e:{if(l0(t),e===null)throw Error(F(387));n=t.pendingProps,a=t.memoizedState,r=a.element,Dg(e,t),no(t,n,null,s);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){r=cr(Error(F(423)),t),t=hf(e,t,n,s,r);break e}else if(n!==r){r=cr(Error(F(424)),t),t=hf(e,t,n,s,r);break e}else for(gt=Ds(t.stateNode.containerInfo.firstChild),xt=t,be=!0,zt=null,s=Lg(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ar(),n===r){t=fs(e,t,s);break e}st(e,t,n,s)}t=t.child}return t;case 5:return $g(t),e===null&&Sc(t),n=t.type,r=t.pendingProps,a=e!==null?e.memoizedProps:null,o=r.children,bc(n,r)?o=null:a!==null&&bc(n,a)&&(t.flags|=32),o0(e,t),st(e,t,o,s),t.child;case 6:return e===null&&Sc(t),null;case 13:return c0(e,t,s);case 4:return Qu(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=or(t,null,n,s):st(e,t,n,s),t.child;case 11:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:$t(n,r),cf(e,t,n,r,s);case 7:return st(e,t,t.pendingProps,s),t.child;case 8:return st(e,t,t.pendingProps.children,s),t.child;case 12:return st(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,me(to,n._currentValue),n._currentValue=o,a!==null)if(qt(a.value,o)){if(a.children===r.children&&!dt.current){t=fs(e,t,s);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=as(-1,s&-s),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),Cc(a.return,s,t),l.lanes|=s;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(F(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Cc(o,s,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}st(e,t,r.children,s),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,tr(t,s),r=Rt(r),n=n(r),t.flags|=1,st(e,t,n,s),t.child;case 14:return n=t.type,r=$t(n,t.pendingProps),r=$t(n.type,r),uf(e,t,n,r,s);case 15:return i0(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:$t(n,r),Ma(e,t),t.tag=1,ht(n)?(e=!0,Ja(t)):e=!1,tr(t,s),s0(t,n,r),Tc(t,n,r,s),Ac(null,t,n,!0,e,s);case 19:return u0(e,t,s);case 22:return a0(e,t,s)}throw Error(F(156,t.tag))};function S0(e,t){return Xp(e,t)}function E1(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,t,s,n){return new E1(e,t,s,n)}function hd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function T1(e){if(typeof e=="function")return hd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ru)return 11;if(e===Au)return 14}return 2}function zs(e,t){var s=e.alternate;return s===null?(s=Et(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Oa(e,t,s,n,r,a){var o=2;if(n=e,typeof e=="function")hd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Dn:return fn(s.children,r,a,t);case Pu:o=8,r|=8;break;case Xl:return e=Et(12,s,t,r|2),e.elementType=Xl,e.lanes=a,e;case ec:return e=Et(13,s,t,r),e.elementType=ec,e.lanes=a,e;case tc:return e=Et(19,s,t,r),e.elementType=tc,e.lanes=a,e;case $p:return Do(s,r,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Mp:o=10;break e;case Dp:o=9;break e;case Ru:o=11;break e;case Au:o=14;break e;case js:o=16,n=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=Et(o,s,t,r),t.elementType=e,t.type=n,t.lanes=a,t}function fn(e,t,s,n){return e=Et(7,e,n,t),e.lanes=s,e}function Do(e,t,s,n){return e=Et(22,e,n,t),e.elementType=$p,e.lanes=s,e.stateNode={isHidden:!1},e}function Sl(e,t,s){return e=Et(6,e,null,t),e.lanes=s,e}function Cl(e,t,s){return t=Et(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function P1(e,t,s,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ol(0),this.expirationTimes=ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ol(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function fd(e,t,s,n,r,a,o,l,c){return e=new P1(e,t,s,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Et(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yu(a),e}function R1(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function C0(e){if(!e)return Us;e=e._reactInternals;e:{if(_n(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var s=e.type;if(ht(s))return Cg(e,s,t)}return t}function E0(e,t,s,n,r,a,o,l,c){return e=fd(s,n,!0,e,r,a,o,l,c),e.context=C0(null),s=e.current,n=rt(),r=Is(s),a=as(n,r),a.callback=t??null,$s(s,a,r),e.current.lanes=r,Ii(e,r,n),ft(e,n),e}function $o(e,t,s,n){var r=t.current,a=rt(),o=Is(r);return s=C0(s),t.context===null?t.context=s:t.pendingContext=s,t=as(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=$s(r,t,o),e!==null&&(Ut(e,r,o,a),Ra(e,r,o)),o}function ho(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function md(e,t){jf(e,t),(e=e.alternate)&&jf(e,t)}function A1(){return null}var T0=typeof reportError=="function"?reportError:function(e){console.error(e)};function pd(e){this._internalRoot=e}Oo.prototype.render=pd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));$o(e,t,null,null)};Oo.prototype.unmount=pd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wn(function(){$o(null,e,null,null)}),t[ds]=null}};function Oo(e){this._internalRoot=e}Oo.prototype.unstable_scheduleHydration=function(e){if(e){var t=ag();e={blockedOn:null,target:e,priority:t};for(var s=0;s<ks.length&&t!==0&&t<ks[s].priority;s++);ks.splice(s,0,e),s===0&&lg(e)}};function gd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Io(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _f(){}function L1(e,t,s,n,r){if(r){if(typeof n=="function"){var a=n;n=function(){var u=ho(o);a.call(u)}}var o=E0(t,n,e,0,null,!1,!1,"",_f);return e._reactRootContainer=o,e[ds]=o.current,yi(e.nodeType===8?e.parentNode:e),wn(),o}for(;r=e.lastChild;)e.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var u=ho(c);l.call(u)}}var c=fd(e,0,!1,null,null,!1,!1,"",_f);return e._reactRootContainer=c,e[ds]=c.current,yi(e.nodeType===8?e.parentNode:e),wn(function(){$o(t,c,s,n)}),c}function zo(e,t,s,n,r){var a=s._reactRootContainer;if(a){var o=a;if(typeof r=="function"){var l=r;r=function(){var c=ho(o);l.call(c)}}$o(t,o,e,r)}else o=L1(s,t,e,r,n);return ho(o)}rg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=zr(t.pendingLanes);s!==0&&(Du(t,s|1),ft(t,Te()),!(ce&6)&&(ur=Te()+500,Ws()))}break;case 13:wn(function(){var n=hs(e,1);if(n!==null){var r=rt();Ut(n,e,1,r)}}),md(e,1)}};$u=function(e){if(e.tag===13){var t=hs(e,134217728);if(t!==null){var s=rt();Ut(t,e,134217728,s)}md(e,134217728)}};ig=function(e){if(e.tag===13){var t=Is(e),s=hs(e,t);if(s!==null){var n=rt();Ut(s,e,t,n)}md(e,t)}};ag=function(){return ue};og=function(e,t){var s=ue;try{return ue=e,t()}finally{ue=s}};dc=function(e,t,s){switch(t){case"input":if(rc(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var r=To(n);if(!r)throw Error(F(90));Ip(n),rc(n,r)}}}break;case"textarea":Fp(e,s);break;case"select":t=s.value,t!=null&&Qn(e,!!s.multiple,t,!1)}};Gp=cd;Kp=wn;var M1={usingClientEntryPoint:!1,Events:[Fi,zn,To,Hp,Wp,cd]},Mr={findFiberByHostInstance:on,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D1={bundleType:Mr.bundleType,version:Mr.version,rendererPackageName:Mr.rendererPackageName,rendererConfig:Mr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Qp(e),e===null?null:e.stateNode},findFiberByHostInstance:Mr.findFiberByHostInstance||A1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pa.isDisabled&&pa.supportsFiber)try{ko=pa.inject(D1),Yt=pa}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M1;bt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(t))throw Error(F(200));return R1(e,t,null,s)};bt.createRoot=function(e,t){if(!gd(e))throw Error(F(299));var s=!1,n="",r=T0;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=fd(e,1,!1,null,null,s,!1,n,r),e[ds]=t.current,yi(e.nodeType===8?e.parentNode:e),new pd(t)};bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=Qp(t),e=e===null?null:e.stateNode,e};bt.flushSync=function(e){return wn(e)};bt.hydrate=function(e,t,s){if(!Io(t))throw Error(F(200));return zo(null,e,t,!0,s)};bt.hydrateRoot=function(e,t,s){if(!gd(e))throw Error(F(405));var n=s!=null&&s.hydratedSources||null,r=!1,a="",o=T0;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=E0(t,null,e,1,s??null,r,!1,a,o),e[ds]=t.current,yi(e),n)for(e=0;e<n.length;e++)s=n[e],r=s._getVersion,r=r(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,r]:t.mutableSourceEagerHydrationData.push(s,r);return new Oo(t)};bt.render=function(e,t,s){if(!Io(t))throw Error(F(200));return zo(null,e,t,!1,s)};bt.unmountComponentAtNode=function(e){if(!Io(e))throw Error(F(40));return e._reactRootContainer?(wn(function(){zo(null,null,e,!1,function(){e._reactRootContainer=null,e[ds]=null})}),!0):!1};bt.unstable_batchedUpdates=cd;bt.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!Io(s))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return zo(e,t,s,!1,n)};bt.version="18.3.1-next-f1338f8080-20240426";function P0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(P0)}catch(e){console.error(e)}}P0(),Pp.exports=bt;var $1=Pp.exports,R0,Nf=$1;R0=Nf.createRoot,Nf.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ci(){return Ci=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Ci.apply(this,arguments)}var Rs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Rs||(Rs={}));const kf="popstate";function O1(e){e===void 0&&(e={});function t(n,r){let{pathname:a,search:o,hash:l}=n.location;return qc("",{pathname:a,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function s(n,r){return typeof r=="string"?r:L0(r)}return z1(t,s,null,e)}function Ae(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function A0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function I1(){return Math.random().toString(36).substr(2,8)}function Sf(e,t){return{usr:e.state,key:e.key,idx:t}}function qc(e,t,s,n){return s===void 0&&(s=null),Ci({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?br(t):t,{state:s,key:t&&t.key||n||I1()})}function L0(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function br(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function z1(e,t,s,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:a=!1}=n,o=r.history,l=Rs.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Ci({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Rs.Pop;let b=d(),m=b==null?null:b-u;u=b,c&&c({action:l,location:y.location,delta:m})}function f(b,m){l=Rs.Push;let x=qc(y.location,b,m);u=d()+1;let v=Sf(x,u),_=y.createHref(x);try{o.pushState(v,"",_)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(_)}a&&c&&c({action:l,location:y.location,delta:1})}function p(b,m){l=Rs.Replace;let x=qc(y.location,b,m);u=d();let v=Sf(x,u),_=y.createHref(x);o.replaceState(v,"",_),a&&c&&c({action:l,location:y.location,delta:0})}function w(b){let m=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof b=="string"?b:L0(b);return x=x.replace(/ $/,"%20"),Ae(m,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,m)}let y={get action(){return l},get location(){return e(r,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(kf,h),c=b,()=>{r.removeEventListener(kf,h),c=null}},createHref(b){return t(r,b)},createURL:w,encodeLocation(b){let m=w(b);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:p,go(b){return o.go(b)}};return y}var Cf;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Cf||(Cf={}));function F1(e,t,s){return s===void 0&&(s="/"),U1(e,t,s,!1)}function U1(e,t,s,n){let r=typeof t=="string"?br(t):t,a=$0(r.pathname||"/",s);if(a==null)return null;let o=M0(e);B1(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=X1(a);l=Q1(o[c],u,n)}return l}function M0(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let r=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Ae(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=mn([n,c.relativePath]),d=s.concat(c);a.children&&a.children.length>0&&(Ae(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),M0(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:Z1(u,a.index),routesMeta:d})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))r(a,o);else for(let c of D0(a.path))r(a,o,c)}),t}function D0(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,r=s.endsWith("?"),a=s.replace(/\?$/,"");if(n.length===0)return r?[a,""]:[a];let o=D0(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function B1(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Y1(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const V1=/^:[\w-]+$/,q1=3,H1=2,W1=1,G1=10,K1=-2,Ef=e=>e==="*";function Z1(e,t){let s=e.split("/"),n=s.length;return s.some(Ef)&&(n+=K1),t&&(n+=H1),s.filter(r=>!Ef(r)).reduce((r,a)=>r+(V1.test(a)?q1:a===""?W1:G1),n)}function Y1(e,t){return e.length===t.length&&e.slice(0,-1).every((n,r)=>n===t[r])?e[e.length-1]-t[t.length-1]:0}function Q1(e,t,s){let{routesMeta:n}=e,r={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",h=Tf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&s&&!n[n.length-1].route.index&&(h=Tf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:mn([a,h.pathname]),pathnameBase:nb(mn([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=mn([a,h.pathnameBase]))}return o}function Tf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=J1(e.path,e.caseSensitive,e.end),r=t.match(s);if(!r)return null;let a=r[0],o=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let y=l[h]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const w=l[h];return p&&!w?u[f]=void 0:u[f]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:e}}function J1(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),A0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),n]}function X1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return A0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function $0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function eb(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:r=""}=typeof e=="string"?br(e):e;return{pathname:s?s.startsWith("/")?s:tb(s,t):t,search:rb(n),hash:ib(r)}}function tb(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?s.length>1&&s.pop():r!=="."&&s.push(r)}),s.length>1?s.join("/"):"/"}function El(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sb(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function O0(e,t){let s=sb(e);return t?s.map((n,r)=>r===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function I0(e,t,s,n){n===void 0&&(n=!1);let r;typeof e=="string"?r=br(e):(r=Ci({},e),Ae(!r.pathname||!r.pathname.includes("?"),El("?","pathname","search",r)),Ae(!r.pathname||!r.pathname.includes("#"),El("#","pathname","hash",r)),Ae(!r.search||!r.search.includes("#"),El("#","search","hash",r)));let a=e===""||r.pathname==="",o=a?"/":r.pathname,l;if(o==null)l=s;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=eb(r,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const mn=e=>e.join("/").replace(/\/\/+/g,"/"),nb=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),rb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ib=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ab(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const z0=["post","put","patch","delete"];new Set(z0);const ob=["get",...z0];new Set(ob);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ei(){return Ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Ei.apply(this,arguments)}const xd=g.createContext(null),lb=g.createContext(null),Bi=g.createContext(null),Fo=g.createContext(null),Gs=g.createContext({outlet:null,matches:[],isDataRoute:!1}),F0=g.createContext(null);function Vi(){return g.useContext(Fo)!=null}function Uo(){return Vi()||Ae(!1),g.useContext(Fo).location}function U0(e){g.useContext(Bi).static||g.useLayoutEffect(e)}function Ge(){let{isDataRoute:e}=g.useContext(Gs);return e?bb():cb()}function cb(){Vi()||Ae(!1);let e=g.useContext(xd),{basename:t,future:s,navigator:n}=g.useContext(Bi),{matches:r}=g.useContext(Gs),{pathname:a}=Uo(),o=JSON.stringify(O0(r,s.v7_relativeSplatPath)),l=g.useRef(!1);return U0(()=>{l.current=!0}),g.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=I0(u,JSON.parse(o),a,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:mn([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,a,e])}function B0(){let{matches:e}=g.useContext(Gs),t=e[e.length-1];return t?t.params:{}}function ub(e,t){return db(e,t)}function db(e,t,s,n){Vi()||Ae(!1);let{navigator:r,static:a}=g.useContext(Bi),{matches:o}=g.useContext(Gs),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let d=Uo(),h;if(t){var f;let m=typeof t=="string"?br(t):t;u==="/"||(f=m.pathname)!=null&&f.startsWith(u)||Ae(!1),h=m}else h=d;let p=h.pathname||"/",w=p;if(u!=="/"){let m=u.replace(/^\//,"").split("/");w="/"+p.replace(/^\//,"").split("/").slice(m.length).join("/")}let y=!a&&s&&s.matches&&s.matches.length>0?s.matches:F1(e,{pathname:w}),b=gb(y&&y.map(m=>Object.assign({},m,{params:Object.assign({},c,m.params),pathname:mn([u,r.encodeLocation?r.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:mn([u,r.encodeLocation?r.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,s,n);return t&&b?g.createElement(Fo.Provider,{value:{location:Ei({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Rs.Pop}},b):b}function hb(){let e=wb(),t=ab(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),s?g.createElement("pre",{style:r},s):null,null)}const fb=g.createElement(hb,null);class mb extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?g.createElement(Gs.Provider,{value:this.props.routeContext},g.createElement(F0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pb(e){let{routeContext:t,match:s,children:n}=e,r=g.useContext(xd);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),g.createElement(Gs.Provider,{value:t},n)}function gb(e,t,s,n){var r;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var a;if(!s)return null;if(s.errors)e=s.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,l=(r=s)==null?void 0:r.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Ae(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(s&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=s,w=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||w){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,w=!1,y=null,b=null;s&&(p=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||fb,c&&(u<0&&f===0?(w=!0,b=null):u===f&&(w=!0,b=h.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,f+1)),x=()=>{let v;return p?v=y:w?v=b:h.route.Component?v=g.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,g.createElement(pb,{match:h,routeContext:{outlet:d,matches:m,isDataRoute:s!=null},children:v})};return s&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?g.createElement(mb,{location:s.location,revalidation:s.revalidation,component:y,error:p,children:x(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):x()},null)}var V0=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(V0||{}),fo=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fo||{});function xb(e){let t=g.useContext(xd);return t||Ae(!1),t}function yb(e){let t=g.useContext(lb);return t||Ae(!1),t}function vb(e){let t=g.useContext(Gs);return t||Ae(!1),t}function q0(e){let t=vb(),s=t.matches[t.matches.length-1];return s.route.id||Ae(!1),s.route.id}function wb(){var e;let t=g.useContext(F0),s=yb(fo.UseRouteError),n=q0(fo.UseRouteError);return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function bb(){let{router:e}=xb(V0.UseNavigateStable),t=q0(fo.UseNavigateStable),s=g.useRef(!1);return U0(()=>{s.current=!0}),g.useCallback(function(r,a){a===void 0&&(a={}),s.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,Ei({fromRouteId:t},a)))},[e,t])}function jb(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function _b(e){let{to:t,replace:s,state:n,relative:r}=e;Vi()||Ae(!1);let{future:a,static:o}=g.useContext(Bi),{matches:l}=g.useContext(Gs),{pathname:c}=Uo(),u=Ge(),d=I0(t,O0(l,a.v7_relativeSplatPath),c,r==="path"),h=JSON.stringify(d);return g.useEffect(()=>u(JSON.parse(h),{replace:s,state:n,relative:r}),[u,h,r,s,n]),null}function Oe(e){Ae(!1)}function Nb(e){let{basename:t="/",children:s=null,location:n,navigationType:r=Rs.Pop,navigator:a,static:o=!1,future:l}=e;Vi()&&Ae(!1);let c=t.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:a,static:o,future:Ei({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=br(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:w="default"}=n,y=g.useMemo(()=>{let b=$0(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:p,key:w},navigationType:r}},[c,d,h,f,p,w,r]);return y==null?null:g.createElement(Bi.Provider,{value:u},g.createElement(Fo.Provider,{children:s,value:y}))}function kb(e){let{children:t,location:s}=e;return ub(Hc(t),s)}new Promise(()=>{});function Hc(e,t){t===void 0&&(t=[]);let s=[];return g.Children.forEach(e,(n,r)=>{if(!g.isValidElement(n))return;let a=[...t,r];if(n.type===g.Fragment){s.push.apply(s,Hc(n.props.children,a));return}n.type!==Oe&&Ae(!1),!n.props.index||!n.props.children||Ae(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Hc(n.props.children,a)),s.push(o)}),s}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Sb="6";try{window.__reactRouterVersion=Sb}catch{}const Cb="startTransition",Pf=kv[Cb];function Eb(e){let{basename:t,children:s,future:n,window:r}=e,a=g.useRef();a.current==null&&(a.current=O1({window:r,v5Compat:!0}));let o=a.current,[l,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=g.useCallback(h=>{u&&Pf?Pf(()=>c(h)):c(h)},[c,u]);return g.useLayoutEffect(()=>o.listen(d),[o,d]),g.useEffect(()=>jb(n),[n]),g.createElement(Nb,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}var Rf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Rf||(Rf={}));var Af;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Af||(Af={}));let Tb={data:""},Pb=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Tb,Rb=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ab=/\/\*[^]*?\*\/|  +/g,Lf=/\n+/g,Cs=(e,t)=>{let s="",n="",r="";for(let a in e){let o=e[a];a[0]=="@"?a[1]=="i"?s=a+" "+o+";":n+=a[1]=="f"?Cs(o,a):a+"{"+Cs(o,a[1]=="k"?"":t)+"}":typeof o=="object"?n+=Cs(o,t?t.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Cs.p?Cs.p(a,o):a+":"+o+";")}return s+(t&&r?t+"{"+r+"}":r)+n},es={},H0=e=>{if(typeof e=="object"){let t="";for(let s in e)t+=s+H0(e[s]);return t}return e},Lb=(e,t,s,n,r)=>{let a=H0(e),o=es[a]||(es[a]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(a));if(!es[o]){let c=a!==e?e:(u=>{let d,h,f=[{}];for(;d=Rb.exec(u.replace(Ab,""));)d[4]?f.shift():d[3]?(h=d[3].replace(Lf," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][d[1]]=d[2].replace(Lf," ").trim();return f[0]})(e);es[o]=Cs(r?{["@keyframes "+o]:c}:c,s?"":"."+o)}let l=s&&es.g?es.g:null;return s&&(es.g=es[o]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(es[o],t,n,l),o},Mb=(e,t,s)=>e.reduce((n,r,a)=>{let o=t[a];if(o&&o.call){let l=o(s),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Cs(l,""):l===!1?"":l}return n+r+(o??"")},"");function Bo(e){let t=this||{},s=e.call?e(t.p):e;return Lb(s.unshift?s.raw?Mb(s,[].slice.call(arguments,1),t.p):s.reduce((n,r)=>Object.assign(n,r&&r.call?r(t.p):r),{}):s,Pb(t.target),t.g,t.o,t.k)}let W0,Wc,Gc;Bo.bind({g:1});let ms=Bo.bind({k:1});function Db(e,t,s,n){Cs.p=t,W0=e,Wc=s,Gc=n}function Ks(e,t){let s=this||{};return function(){let n=arguments;function r(a,o){let l=Object.assign({},a),c=l.className||r.className;s.p=Object.assign({theme:Wc&&Wc()},l),s.o=/ *go\d+/.test(c),l.className=Bo.apply(s,n)+(c?" "+c:"");let u=e;return e[0]&&(u=l.as||e,delete l.as),Gc&&u[0]&&Gc(l),W0(u,l)}return r}}var $b=e=>typeof e=="function",mo=(e,t)=>$b(e)?e(t):e,Ob=(()=>{let e=0;return()=>(++e).toString()})(),G0=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Ib=20,K0=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,Ib)};case 1:return{...e,toasts:e.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case 2:let{toast:s}=t;return K0(e,{type:e.toasts.find(a=>a.id===s.id)?1:0,toast:s});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(a=>a.id===n||n===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(a=>a.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let r=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+r}))}}},Ia=[],un={toasts:[],pausedAt:void 0},Nn=e=>{un=K0(un,e),Ia.forEach(t=>{t(un)})},zb={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Fb=(e={})=>{let[t,s]=g.useState(un),n=g.useRef(un);g.useEffect(()=>(n.current!==un&&s(un),Ia.push(s),()=>{let a=Ia.indexOf(s);a>-1&&Ia.splice(a,1)}),[]);let r=t.toasts.map(a=>{var o,l,c;return{...e,...e[a.type],...a,removeDelay:a.removeDelay||((o=e[a.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:a.duration||((l=e[a.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||zb[a.type],style:{...e.style,...(c=e[a.type])==null?void 0:c.style,...a.style}}});return{...t,toasts:r}},Ub=(e,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(s==null?void 0:s.id)||Ob()}),qi=e=>(t,s)=>{let n=Ub(t,e,s);return Nn({type:2,toast:n}),n.id},nt=(e,t)=>qi("blank")(e,t);nt.error=qi("error");nt.success=qi("success");nt.loading=qi("loading");nt.custom=qi("custom");nt.dismiss=e=>{Nn({type:3,toastId:e})};nt.remove=e=>Nn({type:4,toastId:e});nt.promise=(e,t,s)=>{let n=nt.loading(t.loading,{...s,...s==null?void 0:s.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let a=t.success?mo(t.success,r):void 0;return a?nt.success(a,{id:n,...s,...s==null?void 0:s.success}):nt.dismiss(n),r}).catch(r=>{let a=t.error?mo(t.error,r):void 0;a?nt.error(a,{id:n,...s,...s==null?void 0:s.error}):nt.dismiss(n)}),e};var Bb=(e,t)=>{Nn({type:1,toast:{id:e,height:t}})},Vb=()=>{Nn({type:5,time:Date.now()})},ti=new Map,qb=1e3,Hb=(e,t=qb)=>{if(ti.has(e))return;let s=setTimeout(()=>{ti.delete(e),Nn({type:4,toastId:e})},t);ti.set(e,s)},Wb=e=>{let{toasts:t,pausedAt:s}=Fb(e);g.useEffect(()=>{if(s)return;let a=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&nt.dismiss(l.id);return}return setTimeout(()=>nt.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,s]);let n=g.useCallback(()=>{s&&Nn({type:6,time:Date.now()})},[s]),r=g.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=t.filter(p=>(p.position||u)===(a.position||u)&&p.height),h=d.findIndex(p=>p.id===a.id),f=d.filter((p,w)=>w<h&&p.visible).length;return d.filter(p=>p.visible).slice(...l?[f+1]:[0,f]).reduce((p,w)=>p+(w.height||0)+c,0)},[t]);return g.useEffect(()=>{t.forEach(a=>{if(a.dismissed)Hb(a.id,a.removeDelay);else{let o=ti.get(a.id);o&&(clearTimeout(o),ti.delete(a.id))}})},[t]),{toasts:t,handlers:{updateHeight:Bb,startPause:Vb,endPause:n,calculateOffset:r}}},Gb=ms`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Kb=ms`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Zb=ms`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Yb=Ks("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Gb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Kb} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Zb} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Qb=ms`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Jb=Ks("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Qb} 1s linear infinite;
`,Xb=ms`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ej=ms`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,tj=Ks("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Xb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ej} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,sj=Ks("div")`
  position: absolute;
`,nj=Ks("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,rj=ms`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ij=Ks("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${rj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,aj=({toast:e})=>{let{icon:t,type:s,iconTheme:n}=e;return t!==void 0?typeof t=="string"?g.createElement(ij,null,t):t:s==="blank"?null:g.createElement(nj,null,g.createElement(Jb,{...n}),s!=="loading"&&g.createElement(sj,null,s==="error"?g.createElement(Yb,{...n}):g.createElement(tj,{...n})))},oj=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,lj=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,cj="0%{opacity:0;} 100%{opacity:1;}",uj="0%{opacity:1;} 100%{opacity:0;}",dj=Ks("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,hj=Ks("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,fj=(e,t)=>{let s=e.includes("top")?1:-1,[n,r]=G0()?[cj,uj]:[oj(s),lj(s)];return{animation:t?`${ms(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ms(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},mj=g.memo(({toast:e,position:t,style:s,children:n})=>{let r=e.height?fj(e.position||t||"top-center",e.visible):{opacity:0},a=g.createElement(aj,{toast:e}),o=g.createElement(hj,{...e.ariaProps},mo(e.message,e));return g.createElement(dj,{className:e.className,style:{...r,...s,...e.style}},typeof n=="function"?n({icon:a,message:o}):g.createElement(g.Fragment,null,a,o))});Db(g.createElement);var pj=({id:e,className:t,style:s,onHeightUpdate:n,children:r})=>{let a=g.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return g.createElement("div",{ref:a,className:t,style:s},r)},gj=(e,t)=>{let s=e.includes("top"),n=s?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:G0()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...n,...r}},xj=Bo`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ga=16,yj=({reverseOrder:e,position:t="top-center",toastOptions:s,gutter:n,children:r,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:c}=Wb(s);return g.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:ga,left:ga,right:ga,bottom:ga,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||t,h=c.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),f=gj(d,h);return g.createElement(pj,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?xj:"",style:f},u.type==="custom"?mo(u.message,u):r?r(u):g.createElement(mj,{toast:u,position:d}))}))},M=nt;const vj="modulepreload",wj=function(e){return"/"+e},Mf={},dr=function(t,s,n){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=wj(c),c in Mf)return;Mf[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":vj,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},bj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>dr(async()=>{const{default:n}=await Promise.resolve().then(()=>jr);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)};class yd extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class jj extends yd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class _j extends yd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Nj extends yd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Kc;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Kc||(Kc={}));var kj=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Sj{constructor(t,{headers:s={},customFetch:n,region:r=Kc.Any}={}){this.url=t,this.headers=s,this.region=r,this.fetch=bj(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,s={}){var n;return kj(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:o}=s;let l={},{region:c}=s;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:u}).catch(w=>{throw new jj(w)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new _j(d);if(!d.ok)throw new Nj(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(r){return{data:null,error:r}}})}}var ct={},vd={},Vo={},Hi={},qo={},Ho={},Cj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},hr=Cj();const Ej=hr.fetch,Z0=hr.fetch.bind(hr),Y0=hr.Headers,Tj=hr.Request,Pj=hr.Response,jr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Y0,Request:Tj,Response:Pj,default:Z0,fetch:Ej},Symbol.toStringTag,{value:"Module"})),Rj=cv(jr);var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});let Aj=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Wo.default=Aj;var Q0=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ho,"__esModule",{value:!0});const Lj=Q0(Rj),Mj=Q0(Wo);let Dj=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Lj.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,s){return this.headers=Object.assign({},this.headers),this.headers[t]=s,this}then(t,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let u=null,d=null,h=null,f=a.status,p=a.statusText;if(a.ok){if(this.method!=="HEAD"){const m=await a.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=m:d=JSON.parse(m))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await a.text();try{u=JSON.parse(y),Array.isArray(u)&&a.status===404&&(d=[],u=null,f=200,p="OK")}catch{a.status===404&&y===""?(f=204,p="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,p="OK"),u&&this.shouldThrowOnError)throw new Mj.default(u)}return{error:u,data:d,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(r=r.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(t,s)}returns(){return this}overrideTypes(){return this}};Ho.default=Dj;var $j=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qo,"__esModule",{value:!0});const Oj=$j(Ho);let Ij=class extends Oj.default{select(t){let s=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,s,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${s-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};qo.default=Ij;var zj=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hi,"__esModule",{value:!0});const Fj=zj(qo);let Uj=class extends Fj.default{eq(t,s){return this.url.searchParams.append(t,`eq.${s}`),this}neq(t,s){return this.url.searchParams.append(t,`neq.${s}`),this}gt(t,s){return this.url.searchParams.append(t,`gt.${s}`),this}gte(t,s){return this.url.searchParams.append(t,`gte.${s}`),this}lt(t,s){return this.url.searchParams.append(t,`lt.${s}`),this}lte(t,s){return this.url.searchParams.append(t,`lte.${s}`),this}like(t,s){return this.url.searchParams.append(t,`like.${s}`),this}likeAllOf(t,s){return this.url.searchParams.append(t,`like(all).{${s.join(",")}}`),this}likeAnyOf(t,s){return this.url.searchParams.append(t,`like(any).{${s.join(",")}}`),this}ilike(t,s){return this.url.searchParams.append(t,`ilike.${s}`),this}ilikeAllOf(t,s){return this.url.searchParams.append(t,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(t,s){return this.url.searchParams.append(t,`ilike(any).{${s.join(",")}}`),this}is(t,s){return this.url.searchParams.append(t,`is.${s}`),this}in(t,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cs.{${s.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(s)}`),this}containedBy(t,s){return typeof s=="string"?this.url.searchParams.append(t,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(t,`cd.{${s.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(s)}`),this}rangeGt(t,s){return this.url.searchParams.append(t,`sr.${s}`),this}rangeGte(t,s){return this.url.searchParams.append(t,`nxl.${s}`),this}rangeLt(t,s){return this.url.searchParams.append(t,`sl.${s}`),this}rangeLte(t,s){return this.url.searchParams.append(t,`nxr.${s}`),this}rangeAdjacent(t,s){return this.url.searchParams.append(t,`adj.${s}`),this}overlaps(t,s){return typeof s=="string"?this.url.searchParams.append(t,`ov.${s}`):this.url.searchParams.append(t,`ov.{${s.join(",")}}`),this}textSearch(t,s,{config:n,type:r}={}){let a="";r==="plain"?a="pl":r==="phrase"?a="ph":r==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${o}.${s}`),this}match(t){return Object.entries(t).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(t,s,n){return this.url.searchParams.append(t,`not.${s}.${n}`),this}or(t,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,s,n){return this.url.searchParams.append(t,`${s}.${n}`),this}};Hi.default=Uj;var Bj=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vo,"__esModule",{value:!0});const Dr=Bj(Hi);let Vj=class{constructor(t,{headers:s={},schema:n,fetch:r}){this.url=t,this.headers=s,this.schema=n,this.fetch=r}select(t,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Dr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:s,defaultToNull:n=!0}={}){const r="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Dr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Dr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new Dr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const s="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Dr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Vo.default=Vj;var Go={},Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.version=void 0;Ko.version="0.0.0-automated";Object.defineProperty(Go,"__esModule",{value:!0});Go.DEFAULT_HEADERS=void 0;const qj=Ko;Go.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${qj.version}`};var J0=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vd,"__esModule",{value:!0});const Hj=J0(Vo),Wj=J0(Hi),Gj=Go;let Kj=class X0{constructor(t,{headers:s={},schema:n,fetch:r}={}){this.url=t,this.headers=Object.assign(Object.assign({},Gj.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(t){const s=new URL(`${this.url}/${t}`);return new Hj.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new X0(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:n=!1,get:r=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(s).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=s);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new Wj.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};vd.default=Kj;var _r=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ct,"__esModule",{value:!0});ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;const ex=_r(vd);ct.PostgrestClient=ex.default;const tx=_r(Vo);ct.PostgrestQueryBuilder=tx.default;const sx=_r(Hi);ct.PostgrestFilterBuilder=sx.default;const nx=_r(qo);ct.PostgrestTransformBuilder=nx.default;const rx=_r(Ho);ct.PostgrestBuilder=rx.default;const ix=_r(Wo);ct.PostgrestError=ix.default;var Zj=ct.default={PostgrestClient:ex.default,PostgrestQueryBuilder:tx.default,PostgrestFilterBuilder:sx.default,PostgrestTransformBuilder:nx.default,PostgrestBuilder:rx.default,PostgrestError:ix.default};const{PostgrestClient:Yj,PostgrestQueryBuilder:h3,PostgrestFilterBuilder:f3,PostgrestTransformBuilder:m3,PostgrestBuilder:p3,PostgrestError:g3}=Zj,Qj="2.11.2",Jj={"X-Client-Info":`realtime-js/${Qj}`},Xj="1.0.0",ax=1e4,e_=1e3;var nr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(nr||(nr={}));var mt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(mt||(mt={}));var It;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(It||(It={}));var Zc;(function(e){e.websocket="websocket"})(Zc||(Zc={}));var an;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(an||(an={}));class t_{constructor(){this.HEADER_LENGTH=1}decode(t,s){return t.constructor===ArrayBuffer?s(this._binaryDecode(t)):s(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const s=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,s,n)}_decodeBroadcast(t,s,n){const r=s.getUint8(1),a=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+r));o=o+r;const c=n.decode(t.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class ox{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var fe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(fe||(fe={}));const Df=(e,t,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,o)=>(a[o]=s_(o,e,t,r),a),{})},s_=(e,t,s,n)=>{const r=t.find(l=>l.name===e),a=r==null?void 0:r.type,o=s[e];return a&&!n.includes(a)?lx(a,o):Yc(o)},lx=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return a_(t,s)}switch(e){case fe.bool:return n_(t);case fe.float4:case fe.float8:case fe.int2:case fe.int4:case fe.int8:case fe.numeric:case fe.oid:return r_(t);case fe.json:case fe.jsonb:return i_(t);case fe.timestamp:return o_(t);case fe.abstime:case fe.date:case fe.daterange:case fe.int4range:case fe.int8range:case fe.money:case fe.reltime:case fe.text:case fe.time:case fe.timestamptz:case fe.timetz:case fe.tsrange:case fe.tstzrange:return Yc(t);default:return Yc(t)}},Yc=e=>e,n_=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},r_=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},i_=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},a_=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,s);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>lx(t,l))}return e},o_=e=>typeof e=="string"?e.replace(" ","T"):e,cx=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Tl{constructor(t,s,n={},r=ax){this.channel=t,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var $f;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})($f||($f={}));class si{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=si.syncState(this.state,r,a,o),this.pendingDiffs.forEach(c=>{this.state=si.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=si.syncDiff(this.state,r,a,o),l())}),this.onJoin((r,a,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:a,newPresences:o})}),this.onLeave((r,a,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,r){const a=this.cloneDeep(t),o=this.transformState(s),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const f=d.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),w=d.filter(b=>p.indexOf(b.presence_ref)<0),y=h.filter(b=>f.indexOf(b.presence_ref)<0);w.length>0&&(l[u]=w),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,r)}static syncDiff(t,s,n,r){const{joins:a,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,r(l,u,c),u.length===0&&delete t[l]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const r=t[n];return"metas"in r?s[n]=r.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):s[n]=r,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Of;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Of||(Of={}));var If;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(If||(If={}));var ss;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ss||(ss={}));class wd{constructor(t,s={config:{}},n){this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Tl(this,It.join,this.params,this.timeout),this.rejoinTimer=new ox(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(It.reply,{},(r,a)=>{this._trigger(this._replyEventName(a),r)}),this.presence=new si(this),this.broadcastEndpointURL=cx(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(ss.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(ss.CLOSED));const c={},u={broadcast:a,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(ss.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,w=[];for(let y=0;y<p;y++){const b=f[y],{filter:{event:m,schema:x,table:v,filter:_}}=b,k=d&&d[y];if(k&&k.event===m&&k.schema===x&&k.table===v&&k.filter===_)w.push(Object.assign(Object.assign({},b),{id:k.id}));else{this.unsubscribe(),t==null||t(ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(ss.SUBSCRIBED);return}}).receive("error",d=>{t==null||t(ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this._on(t,s,n)}async send(t,s={}){var n,r;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=mt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(It.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new Tl(this,It.leave,{},t);r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(t,s,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(a),o}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Tl(this,t,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var r,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=It;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var w,y,b;return((w=p.filter)===null||w===void 0?void 0:w.event)==="*"||((b=(y=p.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(a=this.bindings[o])===null||a===void 0||a.filter(p=>{var w,y,b,m,x,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,k=(w=p.filter)===null||w===void 0?void 0:w.event;return _&&((y=s.ids)===null||y===void 0?void 0:y.includes(_))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=s.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(x=(m=p==null?void 0:p.filter)===null||m===void 0?void 0:m.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((v=s==null?void 0:s.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:y,table:b,commit_timestamp:m,type:x,errors:v}=w;f=Object.assign(Object.assign({},{schema:y,table:b,commit_timestamp:m,eventType:x,new:{},old:{},errors:v}),this._getPayloadRecords(w))}p.callback(f,n)})}_isClosed(){return this.state===mt.closed}_isJoined(){return this.state===mt.joined}_isJoining(){return this.state===mt.joining}_isLeaving(){return this.state===mt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const r=t.toLocaleLowerCase(),a={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var a;return!(((a=r.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&wd.isEqual(r.filter,s))}),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(It.close,{},t)}_onError(t){this._on(It.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Df(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Df(t.columns,t.old_record)),s}}const l_=()=>{},c_=typeof WebSocket<"u",u_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class d_{constructor(t,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Jj,this.params={},this.timeout=ax,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=l_,this.conn=null,this.sendBuffer=[],this.serializer=new t_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>dr(async()=>{const{default:c}=await Promise.resolve().then(()=>jr);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Zc.websocket}`,this.httpEndpoint=cx(t),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(a,o)=>o(JSON.stringify(a)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ox(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(c_){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new h_(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),dr(async()=>{const{default:t}=await import("./browser-Dwg69-tK.js").then(s=>s.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Xj}))}disconnect(t,s){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case nr.connecting:return an.Connecting;case nr.open:return an.Open;case nr.closing:return an.Closing;default:return an.Closed}}isConnected(){return this.connectionState()===an.Open}channel(t,s={config:{}}){const n=new wd(`realtime:${t}`,s,this);return this.channels.push(n),n}push(t){const{topic:s,event:n,payload:r,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${a})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let s=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(s){let n=null;try{n=JSON.parse(atob(s.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=s,this.channels.forEach(r=>{s&&r.updateJoinPayload({access_token:s}),r.joinedOnce&&r._isJoined()&&r._push(It.access_token,{access_token:s})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(e_,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,s=>{let{topic:n,event:r,payload:a,ref:o}=s;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,a),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(It.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${t}${n}${r}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([u_],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class h_{constructor(t,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=nr.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class bd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ie(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class f_ extends bd{constructor(t,s){super(t),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Qc extends bd{constructor(t,s){super(t),this.name="StorageUnknownError",this.originalError=s}}var m_=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const ux=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>dr(async()=>{const{default:n}=await Promise.resolve().then(()=>jr);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},p_=()=>m_(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield dr(()=>Promise.resolve().then(()=>jr),void 0)).Response:Response}),Jc=e=>{if(Array.isArray(e))return e.map(s=>Jc(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[r]=Jc(n)}),t};var kn=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Pl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),g_=(e,t,s)=>kn(void 0,void 0,void 0,function*(){const n=yield p_();e instanceof n&&!(s!=null&&s.noResolveJson)?e.json().then(r=>{t(new f_(Pl(r),e.status||500))}).catch(r=>{t(new Qc(Pl(r),r))}):t(new Qc(Pl(e),e))}),x_=(e,t,s,n)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))};function Wi(e,t,s,n,r,a){return kn(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(s,x_(t,n,r,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>g_(c,l,n))})})}function po(e,t,s,n){return kn(this,void 0,void 0,function*(){return Wi(e,"GET",t,s,n)})}function Ns(e,t,s,n,r){return kn(this,void 0,void 0,function*(){return Wi(e,"POST",t,n,r,s)})}function y_(e,t,s,n,r){return kn(this,void 0,void 0,function*(){return Wi(e,"PUT",t,n,r,s)})}function v_(e,t,s,n){return kn(this,void 0,void 0,function*(){return Wi(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function dx(e,t,s,n,r){return kn(this,void 0,void 0,function*(){return Wi(e,"DELETE",t,n,r,s)})}var ot=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const w_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class b_{constructor(t,s={},n,r){this.url=t,this.headers=s,this.bucketId=n,this.fetch=ux(r)}uploadOrUpdate(t,s,n,r){return ot(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},zf),r);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const u=this._removeEmptyFolders(s),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(Ie(a))return{data:null,error:a};throw a}})}upload(t,s,n){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,s,n)})}uploadToSignedUrl(t,s,n,r){return ot(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const u=Object.assign({upsert:zf.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),f=yield h.json();return h.ok?{data:{path:a,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(Ie(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,s){return ot(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const a=yield Ns(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new bd("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}update(t,s,n){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,s,n)})}move(t,s,n){return ot(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}copy(t,s,n){return ot(this,void 0,void 0,function*(){try{return{data:{path:(yield Ns(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}createSignedUrl(t,s,n){return ot(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),a=yield Ns(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}createSignedUrls(t,s,n){return ot(this,void 0,void 0,function*(){try{const r=yield Ns(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}download(t,s){return ot(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield po(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ie(l))return{data:null,error:l};throw l}})}info(t){return ot(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{const n=yield po(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Jc(n),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}exists(t){return ot(this,void 0,void 0,function*(){const s=this._getFinalPath(t);try{return yield v_(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ie(n)&&n instanceof Qc){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,s){const n=this._getFinalPath(t),r=[],a=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";a!==""&&r.push(a);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return ot(this,void 0,void 0,function*(){try{return{data:yield dx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}list(t,s,n){return ot(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},w_),s),{prefix:t||""});return{data:yield Ns(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const s=[];return t.width&&s.push(`width=${t.width}`),t.height&&s.push(`height=${t.height}`),t.resize&&s.push(`resize=${t.resize}`),t.format&&s.push(`format=${t.format}`),t.quality&&s.push(`quality=${t.quality}`),s.join("&")}}const j_="2.7.1",__={"X-Client-Info":`storage-js/${j_}`};var Pn=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class N_{constructor(t,s={},n){this.url=t,this.headers=Object.assign(Object.assign({},__),s),this.fetch=ux(n)}listBuckets(){return Pn(this,void 0,void 0,function*(){try{return{data:yield po(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ie(t))return{data:null,error:t};throw t}})}getBucket(t){return Pn(this,void 0,void 0,function*(){try{return{data:yield po(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}createBucket(t,s={public:!1}){return Pn(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}updateBucket(t,s){return Pn(this,void 0,void 0,function*(){try{return{data:yield y_(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Pn(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}deleteBucket(t){return Pn(this,void 0,void 0,function*(){try{return{data:yield dx(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}}class k_ extends N_{constructor(t,s={},n){super(t,s,n)}from(t){return new b_(this.url,this.headers,t,this.fetch)}}const S_="2.49.1";let Ur="";typeof Deno<"u"?Ur="deno":typeof document<"u"?Ur="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ur="react-native":Ur="node";const C_={"X-Client-Info":`supabase-js-${Ur}/${S_}`},E_={headers:C_},T_={schema:"public"},P_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},R_={};var A_=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const L_=e=>{let t;return e?t=e:typeof fetch>"u"?t=Z0:t=fetch,(...s)=>t(...s)},M_=()=>typeof Headers>"u"?Y0:Headers,D_=(e,t,s)=>{const n=L_(s),r=M_();return(a,o)=>A_(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var $_=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function O_(e){return e.replace(/\/$/,"")}function I_(e,t){const{db:s,auth:n,realtime:r,global:a}=e,{db:o,auth:l,realtime:c,global:u}=t,d={db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},u),a),accessToken:()=>$_(this,void 0,void 0,function*(){return""})};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}const hx="2.68.0",Ln=30*1e3,Xc=3,Rl=Xc*Ln,z_="http://localhost:9999",F_="supabase.auth.token",U_={"X-Client-Info":`gotrue-js/${hx}`},eu="X-Supabase-Api-Version",fx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function B_(e){return Math.round(Date.now()/1e3)+e}function V_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Wt=()=>typeof window<"u"&&typeof document<"u",Js={tested:!1,writable:!1},ni=()=>{if(!Wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Js.tested)return Js.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Js.tested=!0,Js.writable=!0}catch{Js.tested=!0,Js.writable=!1}return Js.writable};function q_(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,a)=>{t[a]=r})}catch{}return s.searchParams.forEach((n,r)=>{t[r]=n}),t}const mx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...s)=>dr(async()=>{const{default:n}=await Promise.resolve().then(()=>jr);return{default:n}},void 0).then(({default:n})=>n(...s)):t=fetch,(...s)=>t(...s)},H_=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",px=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},xa=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ya=async(e,t)=>{await e.removeItem(t)};function W_(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s="",n,r,a,o,l,c,u,d=0;for(e=e.replace("-","+").replace("_","/");d<e.length;)o=t.indexOf(e.charAt(d++)),l=t.indexOf(e.charAt(d++)),c=t.indexOf(e.charAt(d++)),u=t.indexOf(e.charAt(d++)),n=o<<2|l>>4,r=(l&15)<<4|c>>2,a=(c&3)<<6|u,s=s+String.fromCharCode(n),c!=64&&r!=0&&(s=s+String.fromCharCode(r)),u!=64&&a!=0&&(s=s+String.fromCharCode(a));return s}class Zo{constructor(){this.promise=new Zo.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Zo.promiseConstructor=Promise;function Ff(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,s=e.split(".");if(s.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(s[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=s[1];return JSON.parse(W_(n))}async function G_(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function K_(e,t){return new Promise((n,r)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){r(o);return}}})()})}function Z_(e){return("0"+e.toString(16)).substr(-2)}function Y_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let a=0;a<56;a++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(t),Array.from(t,Z_).join("")}async function Q_(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(a=>String.fromCharCode(a)).join("")}function J_(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function X_(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await Q_(e);return J_(s)}async function Rn(e,t,s=!1){const n=Y_();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await px(e,`${t}-code-verifier`,r);const a=await X_(n);return[a,n===a?"plain":"s256"]}const eN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tN(e){const t=e.headers.get(eu);if(!t||!t.match(eN))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class jd extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ne(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class sN extends jd{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function nN(e){return ne(e)&&e.name==="AuthApiError"}class gx extends jd{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class Sn extends jd{constructor(t,s,n,r){super(t,n,r),this.name=s,this.status=n}}class vs extends Sn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rN(e){return ne(e)&&e.name==="AuthSessionMissingError"}class Al extends Sn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class va extends Sn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class wa extends Sn{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iN(e){return ne(e)&&e.name==="AuthImplicitGrantRedirectError"}class Uf extends Sn{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tu extends Sn{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function Ll(e){return ne(e)&&e.name==="AuthRetryableFetchError"}class Bf extends Sn{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}var aN=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s};const sn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oN=[502,503,504];async function Vf(e){var t;if(!H_(e))throw new tu(sn(e),0);if(oN.includes(e.status))throw new tu(sn(e),e.status);let s;try{s=await e.json()}catch(a){throw new gx(sn(a),a)}let n;const r=tN(e);if(r&&r.getTime()>=fx["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Bf(sn(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new vs}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Bf(sn(s),e.status,s.weak_password.reasons);throw new sN(sn(s),e.status||500,n)}const lN=(e,t,s,n)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function le(e,t,s,n){var r;const a=Object.assign({},n==null?void 0:n.headers);a[eu]||(a[eu]=fx["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await cN(e,t,s+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function cN(e,t,s,n,r,a){const o=lN(t,n,r,a);let l;try{l=await e(s,Object.assign({},o))}catch(c){throw console.error(c),new tu(sn(c),0)}if(l.ok||await Vf(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Vf(c)}}function ws(e){var t;let s=null;fN(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=B_(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function qf(e){const t=ws(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Es(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function uN(e){return{data:e,error:null}}function dN(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:r,verification_type:a}=e,o=aN(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:s,hashed_token:n,redirect_to:r,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function hN(e){return e}function fN(e){return e.access_token&&e.refresh_token&&e.expires_in}var mN=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s};class pN{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=mx(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,s="global"){try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Es})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=mN(t,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:dN,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ne(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Es})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,r,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(a=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:hN});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(w=>{const y=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);u[`${b}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ne(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){try{return await le(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Es})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Es})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Es})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:s,error:n}=await le(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _deleteFactor(t){try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}}const gN={getItem:e=>ni()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ni()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ni()&&globalThis.localStorage.removeItem(e)}};function Hf(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}function xN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const An={debug:!!(globalThis&&ni()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xx extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class yN extends xx{}async function vN(e,t,s){An.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),An.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){An.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await s()}finally{An.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(t===0)throw An.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new yN(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(An.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}xN();const wN={url:z_,storageKey:F_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:U_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Wf(e,t,s){return await s()}class Ti{constructor(t){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ti.nextInstanceID,Ti.nextInstanceID+=1,this.instanceID>0&&Wt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},wN),t);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new pN({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=mx(r.fetch),this.lock=r.lock||Wf,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Wt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=vN:this.lock=Wf,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:ni()?this.storage=gN:(this.memoryStorage={},this.storage=Hf(this.memoryStorage)):(this.memoryStorage={},this.storage=Hf(this.memoryStorage)),Wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hx}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const s=q_(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Wt()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:a}=await this._getSessionFromURL(s,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),iN(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ne(s)?{error:s}:{error:new gx("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,r;try{const a=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:ws}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var s,n,r;try{let a;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,w=null;this.flowType==="pkce"&&([p,w]=await Rn(this.storage,this.storageKey)),a=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:w},xform:ws})}else if("phone"in t){const{phone:d,password:h,options:f}=t;a=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ws})}else throw new va("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let s;if("email"in t){const{email:a,password:o,options:l}=t;s=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:qf})}else if("phone"in t){const{phone:a,password:o,options:l}=t;s=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:qf})}else throw new va("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Al}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(t){var s,n,r,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const s=await xa(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:a,error:o}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ws});if(await ya(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Al}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:r??null}),error:o})}catch(a){if(ne(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:s,provider:n,token:r,access_token:a,nonce:o}=t,l=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ws}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Al}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(t){var s,n,r,a,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Rn(this.storage,this.storageKey));const{error:h}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new va("You must provide either an email or phone number.")}catch(l){if(ne(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var s,n;try{let r,a;"options"in t&&(r=(s=t.options)===null||s===void 0?void 0:s.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:ws});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(r){if(ne(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(t){var s,n,r;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Rn(this.storage,this.storageKey)),await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:uN})}catch(a){if(ne(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new vs;const{error:r}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:r,options:a}=t,{error:o}=await le(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:r,options:a}=t,{data:o,error:l}=await le(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new va("You must provide either an email or phone number and a type")}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await xa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Rl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:r,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Es}):await this._useSession(async s=>{var n,r,a;const{data:o,error:l}=s;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vs}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0,xform:Es})})}catch(s){if(ne(s))return rN(s)&&(await this._removeSession(),await ya(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new vs;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Rn(this.storage,this.storageKey));const{data:u,error:d}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Es});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}_decodeJWT(t){return Ff(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new vs;const s=Date.now()/1e3;let n=s,r=!0,a=null;const o=Ff(t.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(s){if(ne(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:o,error:l}=s;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new vs;const{session:r,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(t,s){try{if(!Wt())throw new wa("No browser detected.");if(t.error||t.error_description||t.error_code)throw new wa(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Uf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wa("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Uf("No code detected.");const{data:x,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!o||!u)throw new wa("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=Ln&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const w=f-h;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,d);const{data:y,error:b}=await this._getUser(a);if(b)throw b;const m={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(n){if(ne(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await xa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:a}=s;if(a)return{error:a};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(nN(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await ya(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const s=V_(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,r;try{const{data:{session:a},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Rn(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(a){if(ne(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async linkIdentity(t){var s;try{const{data:n,error:r}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:f}=a;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return Wt()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ne(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,r;const{data:a,error:o}=s;if(o)throw o;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await K_(async r=>(r>0&&await G_(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ws})),(r,a)=>{const o=200*Math.pow(2,r);return a&&Ll(a)&&Date.now()+o-n<Ln})}catch(n){if(this._debug(s,"error",n),ne(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),Wt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await xa(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const r=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Rl;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${Rl}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Ll(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new vs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Zo;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new vs;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(r,"error",a),ne(a)){const o={session:null,error:a};return Ll(a)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,s,n=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,s)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await px(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await ya(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Wt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ln);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-t)/Ln);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Ln}ms, refresh threshold is ${Xc} ticks`),r<=Xc&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof xx)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Rn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);r.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:r,error:a}=s;return a?{data:null,error:a}:await le(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,r;const{data:a,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await le(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:a}=s;if(a)return{data:null,error:a};const{data:o,error:l}=await le(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(ne(s))return{data:null,error:s};throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:a}=s;return a?{data:null,error:a}:await le(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ne(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(t==null?void 0:t.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var s,n;const{data:{session:r},error:a}=t;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}}Ti.nextInstanceID=0;const bN=Ti;class jN extends bN{constructor(t){super(t)}}var _N=function(e,t,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):r(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class NN{constructor(t,s,n){var r,a,o;if(this.supabaseUrl=t,this.supabaseKey=s,!t)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=O_(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:T_,realtime:R_,auth:Object.assign(Object.assign({},P_),{storageKey:c}),global:E_},d=I_(n??{},u);this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=D_(s,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Yj(`${l}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Sj(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new k_(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,s={},n={}){return this.rest.rpc(t,s,n)}channel(t,s={config:{}}){return this.realtime.channel(t,s)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,s;return _N(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:a,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jN({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:t,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new d_(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,s,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kN=(e,t,s)=>new NN(e,t,s),SN="https://ylhxzzvcomhnonxjlznu.supabase.co",CN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlsaHh6enZjb21obm9ueGpsem51Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE0NDcyMDUsImV4cCI6MjA2NzAyMzIwNX0.dJauuCIjJHM_jCkVctxsizn5ag6Y26BYO2tNnsue-wg",E=kN(SN,CN);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),X=(e,t)=>{const s=g.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>g.createElement("svg",{ref:d,...EN,width:r,height:r,stroke:n,strokeWidth:o?Number(a)*24/Number(r):a,className:["lucide",`lucide-${TN(e)}`,l].join(" "),...u},[...t.map(([h,f])=>g.createElement(h,f)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=X("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=X("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=X("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=X("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=X("Carrot",[["path",{d:"M2.27 21.7s9.87-3.5 12.73-6.36a4.5 4.5 0 0 0-6.36-6.37C5.77 11.84 2.27 21.7 2.27 21.7zM8.64 14l-2.05-2.04M15.34 15l-2.46-2.46",key:"rfqxbe"}],["path",{d:"M22 9s-1.33-2-3.5-2C16.86 7 15 9 15 9s1.33 2 3.5 2S22 9 22 9z",key:"6b25w4"}],["path",{d:"M15 2s-2 1.33-2 3.5S15 9 15 9s2-1.84 2-3.5C17 3.33 15 2 15 2z",key:"fn65lo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=X("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=X("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=X("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=X("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=X("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=X("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=X("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=X("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=X("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=X("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=X("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=X("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=X("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=X("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=X("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=X("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=X("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=X("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=X("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=X("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=X("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=X("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=X("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=X("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=X("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=X("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=X("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=X("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=X("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=X("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=X("Wheat",[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=X("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function WN(){const[e,t]=g.useState(""),[s,n]=g.useState(""),[r,a]=g.useState(""),[o,l]=g.useState(!1),[c,u]=g.useState(!1),[d,h]=g.useState(!1),f=Ge(),p=async w=>{if(w.preventDefault(),s!==r){M.error("Passwords do not match");return}if(s.length<6){M.error("Password must be at least 6 characters");return}h(!0);try{const{error:y}=await E.auth.signUp({email:e,password:s});if(y){y.message.includes("already registered")?M.error("Account already exists, please use a different email."):M.error(y.message);return}M.success("Registration successful! Please check your email."),setTimeout(()=>{f("/login")},3e3)}catch{M.error("An error occurred during registration")}finally{h(!1)}};return i.jsx("div",{className:"min-h-screen rpg-bg flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-600 to-purple-800 rounded-2xl shadow-lg mb-4 rpg-glow",children:i.jsx(kd,{className:"w-10 h-10 text-white"})}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-2 rpg-text-glow",children:"Join SATARUZ"}),i.jsx("p",{className:"text-gray-300",children:"Create your account and start your adventure"})]}),i.jsxs("div",{className:"rpg-card",children:[i.jsx("h2",{className:"text-2xl font-semibold text-white text-center mb-6",children:"Create Account"}),i.jsxs("form",{onSubmit:p,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx(vx,{className:"w-4 h-4 inline mr-2"}),"Email Address"]}),i.jsx("input",{type:"email",value:e,onChange:w=>t(w.target.value),className:"input-modern w-full",placeholder:"Enter your email",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx(go,{className:"w-4 h-4 inline mr-2"}),"Password"]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:o?"text":"password",value:s,onChange:w=>n(w.target.value),className:"input-modern w-full pr-12",placeholder:"Create a password",required:!0,minLength:6}),i.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-200",children:o?i.jsx(nu,{className:"w-5 h-5"}):i.jsx(ru,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx(go,{className:"w-4 h-4 inline mr-2"}),"Confirm Password"]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:c?"text":"password",value:r,onChange:w=>a(w.target.value),className:"input-modern w-full pr-12",placeholder:"Confirm your password",required:!0,minLength:6}),i.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-200",children:c?i.jsx(nu,{className:"w-5 h-5"}):i.jsx(ru,{className:"w-5 h-5"})})]})]}),i.jsx("button",{type:"submit",disabled:d,className:"btn-success w-full",children:d?"Creating Account...":"Create Account"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-gray-300",children:["Already have an account?"," ",i.jsx("button",{onClick:()=>f("/login"),className:"text-purple-400 hover:text-purple-300 font-medium",children:"Sign in"})]})})]}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx("p",{className:"text-sm text-gray-400",children:"By creating an account, you agree to our Terms of Service"})})]})})}function GN(){const[e,t]=g.useState(""),[s,n]=g.useState(""),[r,a]=g.useState(!1),[o,l]=g.useState(!1),[c,u]=g.useState(!1),[d,h]=g.useState(0),[f,p]=g.useState("Entering the realm..."),w=Ge(),y=["Entering the realm...","Loading your character...","Preparing your inventory...","Checking guild status...","Loading world map...","Finalizing your adventure..."];g.useEffect(()=>{if(c){const m=setInterval(()=>{h(x=>{const v=x+1,_=Math.floor(v/100*y.length);return _<y.length&&p(y[_]),v>=100&&(clearInterval(m),setTimeout(()=>{const k=sessionStorage.getItem("userProfile");w(k?"/profile":"/character-select")},500)),v})},100);return()=>clearInterval(m)}},[c,w]);const b=async m=>{m.preventDefault(),l(!0);try{const{data:x,error:v}=await E.auth.signInWithPassword({email:e,password:s});if(v){M.error(v.message);return}if(x.user){const{data:_}=await E.from("profiles").select("*").eq("user_id",x.user.id).maybeSingle();if(_!=null&&_.banned_until&&new Date(_.banned_until)>new Date){const k=new Date(_.banned_until).toLocaleDateString();M.error(`Account banned until ${k}`),await E.auth.signOut();return}sessionStorage.setItem("userProfile",_?"true":"false"),u(!0),h(0)}}catch{M.error("An error occurred during login")}finally{l(!1)}};return c?i.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('https://raw.githubusercontent.com/AquaCasaster/db_image/main/1754050637694-t67cjn.jpg')"},children:i.jsx("div",{className:"absolute inset-0 bg-black/60"})}),i.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col p-4 text-white",children:[i.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",children:i.jsx("div",{className:"text-center mb-12"})}),i.jsxs("div",{className:"w-full max-w-lg mx-auto pb-8",children:[i.jsxs("div",{className:"w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("span",{className:"text-sm font-medium text-gray-300",children:f}),i.jsxs("span",{className:"text-sm font-medium text-purple-400",children:[d,"%"]})]}),i.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-4 backdrop-blur-sm border border-gray-600/30",children:i.jsx("div",{className:"bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 h-4 rounded-full transition-all duration-300 ease-out relative overflow-hidden",style:{width:`${d}%`},children:i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-sm text-gray-400 italic",children:'"Every great adventure begins with a single step..."'})})]})]})]}):i.jsx("div",{className:"min-h-screen rpg-bg flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-600 to-purple-800 rounded-2xl shadow-lg mb-4 rpg-glow",children:i.jsx(We,{className:"w-10 h-10 text-white"})}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-2 rpg-text-glow",children:"SATARUZ"}),i.jsx("p",{className:"text-gray-300",children:"Welcome back to your adventure"})]}),i.jsxs("div",{className:"rpg-card",children:[i.jsx("h2",{className:"text-2xl font-semibold text-white text-center mb-6",children:"Sign In"}),i.jsxs("form",{onSubmit:b,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx(vx,{className:"w-4 h-4 inline mr-2"}),"Email Address"]}),i.jsx("input",{type:"email",value:e,onChange:m=>t(m.target.value),className:"input-modern w-full",placeholder:"Enter your email",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx(go,{className:"w-4 h-4 inline mr-2"}),"Password"]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:r?"text":"password",value:s,onChange:m=>n(m.target.value),className:"input-modern w-full pr-12",placeholder:"Enter your password",required:!0}),i.jsx("button",{type:"button",onClick:()=>a(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-200",children:r?i.jsx(nu,{className:"w-5 h-5"}):i.jsx(ru,{className:"w-5 h-5"})})]})]}),i.jsx("button",{type:"submit",disabled:o,className:"btn-primary w-full",children:o?"Signing in...":"Sign In"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-gray-300",children:["Don't have an account?"," ",i.jsx("button",{onClick:()=>w("/register"),className:"text-purple-400 hover:text-purple-300 font-medium",children:"Sign up"})]})})]}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx("p",{className:"text-sm text-gray-400",children:"Join thousands of players in this epic RPG adventure"})})]})})}const I={ZGOLD:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753384376591-72nh39.png",ZTOKEN:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753384399761-e5slkt.png",LB:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753385117354-0mnysn.png",BATTLE:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753385830827-ozeq97.png",SETTING:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753385971862-pj9vj2.png",RCODE:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753386138195-5xnny0.png",INVENTORY:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753386444300-rzm8qd.png",SHOP:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753386571853-4gtua0.png",GAME_MODE:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753386987237-8bgkpf.png",GLOBAL_CHAT:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753386979087-rquo2m.png",LOBBY:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753433262628-cg2x98.png",EXP:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1754035533003-s9ag3j.png",key_adventure:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1754035540192-nr5sf5.png",complate_adventure:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1754035526186-ezudlt.png",kekuatan:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1754075225626-oortbt.png",FRIENDS:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1754163233743-ltutrm.png",PERTEMANAN:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1754163216063-09114e.png",CLOVER:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1754163210513-t98ya1.png",BIG_POTION_HP:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753727274871-bsf3u0.png",SMALL_POTION_HP:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753727264975-8krtmq.png",CHARACTER_MALE:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1752079455935-tzjifn.png",CHARACTER_FEMALE:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1752079502814-boepby.png",npc_inferno1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520711671-u4a06j.png",npc_inferno2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520718623-o1i2rk.png",npc_inferno3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520725296-3s7yeb.png",npc_inferno4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520731135-vm6ns3.png",npc_infernoBoss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520737287-flpwsq.png",inferno_bg1:"https://i.pinimg.com/1200x/53/71/af/5371afec950851b1930a0597db0e8353.jpg",npc_crystal1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520607783-267qf7.png",npc_crystal2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520616095-dfi0g8.png",npc_crystal3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520621639-ck3an4.png",npc_crystal4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520628327-sju3s0.png",npc_crystalBoss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520634463-bj4wd6.png",crystal_bg1:"https://i.pinimg.com/1200x/9f/c2/c0/9fc2c06d51e0775422504062c44ba07f.jpg",npc_leafy1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520811440-7mbkq6.png",npc_leafy2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520820759-f4kb1m.png",npc_leafy3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520826535-dqcp98.png",npc_leafy4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520833391-xyxusx.png",npc_leafyBoss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520839775-ic2zvk.png",leafy_bg1:"https://i.pinimg.com/1200x/7f/92/2a/7f922a9739cefc3f0a5f3a8698b0ae18.jpg",npc_machine1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520490505-fo5kfs.png",npc_machine2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520496759-mgvltx.png",npc_machine3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520503175-3sjqkv.png",npc_machine4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520508694-mnyoy1.png",npc_machineBoss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753520515374-u5j1fm.png",machine_bg1:"https://i.pinimg.com/736x/cc/a5/65/cca5659b2454ae08714424c9e783f8e3.jpg",battle_bg:"https://i.pinimg.com/1200x/7d/b1/1f/7db11f9b3154134df449ba09da0ef4e7.jpg",getCharacterImage:(e,t)=>t?e==="male"?t.male_image_url:t.female_image_url:e==="male"?I.CHARACTER_MALE:I.CHARACTER_FEMALE},KN=()=>{const[e,t]=g.useState(null),[s,n]=g.useState(""),r=Ge(),a=()=>{if(!e){M.error("Please select a character first");return}if(!s){M.error("Please enter a username");return}if(s.length<3){M.error("Username must be at least 3 characters");return}r("/create-profile",{state:{character:e,username:s}})};return i.jsx("div",{className:"min-h-screen rpg-bg p-4",children:i.jsxs("div",{className:"max-w-2xl mx-auto pt-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-600 to-purple-800 rounded-2xl shadow-lg mb-4 rpg-glow",children:i.jsx(We,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-2 rpg-text-glow",children:"Choose Your Character"}),i.jsx("p",{className:"text-gray-300",children:"Select your character type and create your identity"})]}),i.jsxs("div",{className:"rpg-card",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[i.jsx(Bt,{className:"w-6 h-6 mr-2 text-purple-400"}),"Character Type"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx("div",{className:`cursor-pointer transition-all duration-200 rounded-xl p-6 border-2 ${e==="male"?"border-purple-500 bg-purple-900/30 shadow-md rpg-glow":"border-gray-600 bg-gray-800/50 hover:border-gray-500 hover:shadow-sm"}`,onClick:()=>t("male"),children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-purple-600 to-purple-700 rounded-2xl mb-4 shadow-lg",children:i.jsx("img",{src:I.CHARACTER_MALE,alt:"Male Character",className:"w-16 h-16 object-contain"})}),i.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Male Warrior"}),i.jsx("p",{className:"text-sm text-gray-300",children:"Strong and brave fighter"})]})}),i.jsx("div",{className:`cursor-pointer transition-all duration-200 rounded-xl p-6 border-2 ${e==="female"?"border-purple-500 bg-purple-900/30 shadow-md rpg-glow":"border-gray-600 bg-gray-800/50 hover:border-gray-500 hover:shadow-sm"}`,onClick:()=>t("female"),children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-purple-600 to-purple-700 rounded-2xl mb-4 shadow-lg",children:i.jsx("img",{src:I.CHARACTER_FEMALE,alt:"Female Character",className:"w-16 h-16 object-contain"})}),i.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Female Mage"}),i.jsx("p",{className:"text-sm text-gray-300",children:"Wise and magical spellcaster"})]})})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx(Pi,{className:"w-4 h-4 inline mr-2"}),"Username"]}),i.jsx("input",{type:"text",value:s,onChange:o=>n(o.target.value),className:"input-modern w-full",placeholder:"Enter your username",minLength:3,required:!0}),i.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Minimum 3 characters"})]}),i.jsx("button",{onClick:a,className:"btn-primary w-full btn-lg",children:"Continue"})]}),i.jsxs("div",{className:"mt-8 flex justify-center space-x-2",children:[i.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),i.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),i.jsx("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})})},Sd=g.createContext({});function Cd(e){const t=g.useRef(null);return t.current===null&&(t.current=e()),t.current}const Yo=g.createContext(null),Ed=g.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class ZN extends g.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function YN({children:e,isPresent:t}){const s=g.useId(),n=g.useRef(null),r=g.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=g.useContext(Ed);return g.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:u}=r.current;if(t||!n.current||!o||!l)return;n.current.dataset.motionPopId=s;const d=document.createElement("style");return a&&(d.nonce=a),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),i.jsx(ZN,{isPresent:t,childRef:n,sizeRef:r,children:g.cloneElement(e,{ref:n})})}const QN=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:r,presenceAffectsLayout:a,mode:o})=>{const l=Cd(JN),c=g.useId(),u=g.useCallback(h=>{l.set(h,!0);for(const f of l.values())if(!f)return;n&&n()},[l,n]),d=g.useMemo(()=>({id:c,initial:t,isPresent:s,custom:r,onExitComplete:u,register:h=>(l.set(h,!1),()=>l.delete(h))}),a?[Math.random(),u]:[s,u]);return g.useMemo(()=>{l.forEach((h,f)=>l.set(f,!1))},[s]),g.useEffect(()=>{!s&&!l.size&&n&&n()},[s]),o==="popLayout"&&(e=i.jsx(YN,{isPresent:s,children:e})),i.jsx(Yo.Provider,{value:d,children:e})};function JN(){return new Map}function kx(e=!0){const t=g.useContext(Yo);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:r}=t,a=g.useId();g.useEffect(()=>{e&&r(a)},[e]);const o=g.useCallback(()=>e&&n&&n(a),[a,n,e]);return!s&&n?[!1,o]:[!0]}const ba=e=>e.key||"";function Yf(e){const t=[];return g.Children.forEach(e,s=>{g.isValidElement(s)&&t.push(s)}),t}const Td=typeof window<"u",Sx=Td?g.useLayoutEffect:g.useEffect,De=({children:e,custom:t,initial:s=!0,onExitComplete:n,presenceAffectsLayout:r=!0,mode:a="sync",propagate:o=!1})=>{const[l,c]=kx(o),u=g.useMemo(()=>Yf(e),[e]),d=o&&!l?[]:u.map(ba),h=g.useRef(!0),f=g.useRef(u),p=Cd(()=>new Map),[w,y]=g.useState(u),[b,m]=g.useState(u);Sx(()=>{h.current=!1,f.current=u;for(let _=0;_<b.length;_++){const k=ba(b[_]);d.includes(k)?p.delete(k):p.get(k)!==!0&&p.set(k,!1)}},[b,d.length,d.join("-")]);const x=[];if(u!==w){let _=[...u];for(let k=0;k<b.length;k++){const S=b[k],A=ba(S);d.includes(A)||(_.splice(k,0,S),x.push(S))}a==="wait"&&x.length&&(_=x),m(Yf(_)),y(u);return}const{forceRender:v}=g.useContext(Sd);return i.jsx(i.Fragment,{children:b.map(_=>{const k=ba(_),S=o&&!l?!1:u===b||d.includes(k),A=()=>{if(p.has(k))p.set(k,!0);else return;let C=!0;p.forEach(L=>{L||(C=!1)}),C&&(v==null||v(),m(f.current),o&&(c==null||c()),n&&n())};return i.jsx(QN,{isPresent:S,initial:!h.current||s?void 0:!1,custom:S?void 0:t,presenceAffectsLayout:r,mode:a,onExitComplete:S?void 0:A,children:_},k)})})},yt=e=>e;let au=yt;function Pd(e){let t;return()=>(t===void 0&&(t=e()),t)}const pr=(e,t,s)=>{const n=t-e;return n===0?1:(s-e)/n},os=e=>e*1e3,ls=e=>e/1e3,XN={skipAnimations:!1,useManualTiming:!1};function e2(e){let t=new Set,s=new Set,n=!1,r=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){a.has(u)&&(c.schedule(u),e()),u(o)}const c={schedule:(u,d=!1,h=!1)=>{const p=h&&n?t:s;return d&&a.add(u),p.has(u)||p.add(u),u},cancel:u=>{s.delete(u),a.delete(u)},process:u=>{if(o=u,n){r=!0;return}n=!0,[t,s]=[s,t],t.forEach(l),t.clear(),n=!1,r&&(r=!1,c.process(u))}};return c}const ja=["read","resolveKeyframes","update","preRender","render","postRender"],t2=40;function Cx(e,t){let s=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,o=ja.reduce((m,x)=>(m[x]=e2(a),m),{}),{read:l,resolveKeyframes:c,update:u,preRender:d,render:h,postRender:f}=o,p=()=>{const m=performance.now();s=!1,r.delta=n?1e3/60:Math.max(Math.min(m-r.timestamp,t2),1),r.timestamp=m,r.isProcessing=!0,l.process(r),c.process(r),u.process(r),d.process(r),h.process(r),f.process(r),r.isProcessing=!1,s&&t&&(n=!1,e(p))},w=()=>{s=!0,n=!0,r.isProcessing||e(p)};return{schedule:ja.reduce((m,x)=>{const v=o[x];return m[x]=(_,k=!1,S=!1)=>(s||w(),v.schedule(_,k,S)),m},{}),cancel:m=>{for(let x=0;x<ja.length;x++)o[ja[x]].cancel(m)},state:r,steps:o}}const{schedule:ve,cancel:Bs,state:Be,steps:Ol}=Cx(typeof requestAnimationFrame<"u"?requestAnimationFrame:yt,!0),Ex=g.createContext({strict:!1}),Qf={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gr={};for(const e in Qf)gr[e]={isEnabled:t=>Qf[e].some(s=>!!t[s])};function s2(e){for(const t in e)gr[t]={...gr[t],...e[t]}}const n2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xo(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||n2.has(e)}let Tx=e=>!xo(e);function r2(e){e&&(Tx=t=>t.startsWith("on")?!xo(t):e(t))}try{r2(require("@emotion/is-prop-valid").default)}catch{}function i2(e,t,s){const n={};for(const r in e)r==="values"&&typeof e.values=="object"||(Tx(r)||s===!0&&xo(r)||!t&&!xo(r)||e.draggable&&r.startsWith("onDrag"))&&(n[r]=e[r]);return n}function a2(e){if(typeof Proxy>"u")return e;const t=new Map,s=(...n)=>e(...n);return new Proxy(s,{get:(n,r)=>r==="create"?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}const Qo=g.createContext({});function Ai(e){return typeof e=="string"||Array.isArray(e)}function Jo(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Rd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ad=["initial",...Rd];function Xo(e){return Jo(e.animate)||Ad.some(t=>Ai(e[t]))}function Px(e){return!!(Xo(e)||e.variants)}function o2(e,t){if(Xo(e)){const{initial:s,animate:n}=e;return{initial:s===!1||Ai(s)?s:void 0,animate:Ai(n)?n:void 0}}return e.inherit!==!1?t:{}}function l2(e){const{initial:t,animate:s}=o2(e,g.useContext(Qo));return g.useMemo(()=>({initial:t,animate:s}),[Jf(t),Jf(s)])}function Jf(e){return Array.isArray(e)?e.join(" "):e}const c2=Symbol.for("motionComponentSymbol");function Wn(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function u2(e,t,s){return g.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),s&&(typeof s=="function"?s(n):Wn(s)&&(s.current=n))},[t])}const Ld=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),d2="framerAppearId",Rx="data-"+Ld(d2),{schedule:Md,cancel:x3}=Cx(queueMicrotask,!1),Ax=g.createContext({});function h2(e,t,s,n,r){var a,o;const{visualElement:l}=g.useContext(Qo),c=g.useContext(Ex),u=g.useContext(Yo),d=g.useContext(Ed).reducedMotion,h=g.useRef(null);n=n||c.renderer,!h.current&&n&&(h.current=n(e,{visualState:t,parent:l,props:s,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const f=h.current,p=g.useContext(Ax);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&f2(h.current,s,r,p);const w=g.useRef(!1);g.useInsertionEffect(()=>{f&&w.current&&f.update(s,u)});const y=s[Rx],b=g.useRef(!!y&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,y))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,y)));return Sx(()=>{f&&(w.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Md.render(f.render),b.current&&f.animationState&&f.animationState.animateChanges())}),g.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)===null||m===void 0||m.call(window,y)}),b.current=!1))}),f}function f2(e,t,s,n){const{layoutId:r,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:Lx(e.parent)),e.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!o||l&&Wn(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:u})}function Lx(e){if(e)return e.options.allowProjection!==!1?e.projection:Lx(e.parent)}function m2({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:n,Component:r}){var a,o;e&&s2(e);function l(u,d){let h;const f={...g.useContext(Ed),...u,layoutId:p2(u)},{isStatic:p}=f,w=l2(u),y=n(u,p);if(!p&&Td){g2();const b=x2(f);h=b.MeasureLayout,w.visualElement=h2(r,y,f,t,b.ProjectionNode)}return i.jsxs(Qo.Provider,{value:w,children:[h&&w.visualElement?i.jsx(h,{visualElement:w.visualElement,...f}):null,s(r,u,u2(y,w.visualElement,d),y,p,w.visualElement)]})}l.displayName=`motion.${typeof r=="string"?r:`create(${(o=(a=r.displayName)!==null&&a!==void 0?a:r.name)!==null&&o!==void 0?o:""})`}`;const c=g.forwardRef(l);return c[c2]=r,c}function p2({layoutId:e}){const t=g.useContext(Sd).id;return t&&e!==void 0?t+"-"+e:e}function g2(e,t){g.useContext(Ex).strict}function x2(e){const{drag:t,layout:s}=gr;if(!t&&!s)return{};const n={...t,...s};return{MeasureLayout:t!=null&&t.isEnabled(e)||s!=null&&s.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const y2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Dd(e){return typeof e!="string"||e.includes("-")?!1:!!(y2.indexOf(e)>-1||/[A-Z]/u.test(e))}function Xf(e){const t=[{},{}];return e==null||e.values.forEach((s,n)=>{t[0][n]=s.get(),t[1][n]=s.getVelocity()}),t}function $d(e,t,s,n){if(typeof t=="function"){const[r,a]=Xf(n);t=t(s!==void 0?s:e.custom,r,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[r,a]=Xf(n);t=t(s!==void 0?s:e.custom,r,a)}return t}const ou=e=>Array.isArray(e),v2=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),w2=e=>ou(e)?e[e.length-1]||0:e,Je=e=>!!(e&&e.getVelocity);function za(e){const t=Je(e)?e.get():e;return v2(t)?t.toValue():t}function b2({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:s},n,r,a){const o={latestValues:j2(n,r,a,e),renderState:t()};return s&&(o.onMount=l=>s({props:n,current:l,...o}),o.onUpdate=l=>s(l)),o}const Mx=e=>(t,s)=>{const n=g.useContext(Qo),r=g.useContext(Yo),a=()=>b2(e,t,n,r);return s?a():Cd(a)};function j2(e,t,s,n){const r={},a=n(e,{});for(const f in a)r[f]=za(a[f]);let{initial:o,animate:l}=e;const c=Xo(e),u=Px(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=s?s.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!Jo(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const w=$d(e,f[p]);if(w){const{transitionEnd:y,transition:b,...m}=w;for(const x in m){let v=m[x];if(Array.isArray(v)){const _=d?v.length-1:0;v=v[_]}v!==null&&(r[x]=v)}for(const x in y)r[x]=y[x]}}}return r}const Nr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Cn=new Set(Nr),Dx=e=>t=>typeof t=="string"&&t.startsWith(e),$x=Dx("--"),_2=Dx("var(--"),Od=e=>_2(e)?N2.test(e.split("/*")[0].trim()):!1,N2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ox=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ps=(e,t,s)=>s>t?t:s<e?e:s,kr={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Li={...kr,transform:e=>ps(0,1,e)},_a={...kr,default:1},Gi=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),bs=Gi("deg"),Jt=Gi("%"),J=Gi("px"),k2=Gi("vh"),S2=Gi("vw"),em={...Jt,parse:e=>Jt.parse(e)/100,transform:e=>Jt.transform(e*100)},C2={borderWidth:J,borderTopWidth:J,borderRightWidth:J,borderBottomWidth:J,borderLeftWidth:J,borderRadius:J,radius:J,borderTopLeftRadius:J,borderTopRightRadius:J,borderBottomRightRadius:J,borderBottomLeftRadius:J,width:J,maxWidth:J,height:J,maxHeight:J,top:J,right:J,bottom:J,left:J,padding:J,paddingTop:J,paddingRight:J,paddingBottom:J,paddingLeft:J,margin:J,marginTop:J,marginRight:J,marginBottom:J,marginLeft:J,backgroundPositionX:J,backgroundPositionY:J},E2={rotate:bs,rotateX:bs,rotateY:bs,rotateZ:bs,scale:_a,scaleX:_a,scaleY:_a,scaleZ:_a,skew:bs,skewX:bs,skewY:bs,distance:J,translateX:J,translateY:J,translateZ:J,x:J,y:J,z:J,perspective:J,transformPerspective:J,opacity:Li,originX:em,originY:em,originZ:J},tm={...kr,transform:Math.round},Id={...C2,...E2,zIndex:tm,size:J,fillOpacity:Li,strokeOpacity:Li,numOctaves:tm},T2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},P2=Nr.length;function R2(e,t,s){let n="",r=!0;for(let a=0;a<P2;a++){const o=Nr[a],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||s){const u=Ox(l,Id[o]);if(!c){r=!1;const d=T2[o]||o;n+=`${d}(${u}) `}s&&(t[o]=u)}}return n=n.trim(),s?n=s(t,r?"":n):r&&(n="none"),n}function zd(e,t,s){const{style:n,vars:r,transformOrigin:a}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(Cn.has(c)){o=!0;continue}else if($x(c)){r[c]=u;continue}else{const d=Ox(u,Id[c]);c.startsWith("origin")?(l=!0,a[c]=d):n[c]=d}}if(t.transform||(o||s?n.transform=R2(t,e.transform,s):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${c} ${u} ${d}`}}const A2={offset:"stroke-dashoffset",array:"stroke-dasharray"},L2={offset:"strokeDashoffset",array:"strokeDasharray"};function M2(e,t,s=1,n=0,r=!0){e.pathLength=1;const a=r?A2:L2;e[a.offset]=J.transform(-n);const o=J.transform(t),l=J.transform(s);e[a.array]=`${o} ${l}`}function sm(e,t,s){return typeof e=="string"?e:J.transform(t+s*e)}function D2(e,t,s){const n=sm(t,e.x,e.width),r=sm(s,e.y,e.height);return`${n} ${r}`}function Fd(e,{attrX:t,attrY:s,attrScale:n,originX:r,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,h){if(zd(e,u,h),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p,dimensions:w}=e;f.transform&&(w&&(p.transform=f.transform),delete f.transform),w&&(r!==void 0||a!==void 0||p.transform)&&(p.transformOrigin=D2(w,r!==void 0?r:.5,a!==void 0?a:.5)),t!==void 0&&(f.x=t),s!==void 0&&(f.y=s),n!==void 0&&(f.scale=n),o!==void 0&&M2(f,o,l,c,!1)}const Ud=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Ix=()=>({...Ud(),attrs:{}}),Bd=e=>typeof e=="string"&&e.toLowerCase()==="svg";function zx(e,{style:t,vars:s},n,r){Object.assign(e.style,t,r&&r.getProjectionStyles(n));for(const a in s)e.style.setProperty(a,s[a])}const Fx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ux(e,t,s,n){zx(e,t,void 0,n);for(const r in t.attrs)e.setAttribute(Fx.has(r)?r:Ld(r),t.attrs[r])}const yo={};function $2(e){Object.assign(yo,e)}function Bx(e,{layout:t,layoutId:s}){return Cn.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!yo[e]||e==="opacity")}function Vd(e,t,s){var n;const{style:r}=e,a={};for(const o in r)(Je(r[o])||t.style&&Je(t.style[o])||Bx(o,e)||((n=s==null?void 0:s.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(a[o]=r[o]);return a}function Vx(e,t,s){const n=Vd(e,t,s);for(const r in e)if(Je(e[r])||Je(t[r])){const a=Nr.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[a]=e[r]}return n}function O2(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const nm=["x","y","width","height","cx","cy","r"],I2={useVisualState:Mx({scrapeMotionValuesFromProps:Vx,createRenderState:Ix,onUpdate:({props:e,prevProps:t,current:s,renderState:n,latestValues:r})=>{if(!s)return;let a=!!e.drag;if(!a){for(const l in r)if(Cn.has(l)){a=!0;break}}if(!a)return;let o=!t;if(t)for(let l=0;l<nm.length;l++){const c=nm[l];e[c]!==t[c]&&(o=!0)}o&&ve.read(()=>{O2(s,n),ve.render(()=>{Fd(n,r,Bd(s.tagName),e.transformTemplate),Ux(s,n)})})}})},z2={useVisualState:Mx({scrapeMotionValuesFromProps:Vd,createRenderState:Ud})};function qx(e,t,s){for(const n in t)!Je(t[n])&&!Bx(n,s)&&(e[n]=t[n])}function F2({transformTemplate:e},t){return g.useMemo(()=>{const s=Ud();return zd(s,t,e),Object.assign({},s.vars,s.style)},[t])}function U2(e,t){const s=e.style||{},n={};return qx(n,s,e),Object.assign(n,F2(e,t)),n}function B2(e,t){const s={},n=U2(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=n,s}function V2(e,t,s,n){const r=g.useMemo(()=>{const a=Ix();return Fd(a,t,Bd(n),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};qx(a,e.style,e),r.style={...a,...r.style}}return r}function q2(e=!1){return(s,n,r,{latestValues:a},o)=>{const c=(Dd(s)?V2:B2)(n,a,o,s),u=i2(n,typeof s=="string",e),d=s!==g.Fragment?{...u,...c,ref:r}:{},{children:h}=n,f=g.useMemo(()=>Je(h)?h.get():h,[h]);return g.createElement(s,{...d,children:f})}}function H2(e,t){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...Dd(n)?I2:z2,preloadedFeatures:e,useRender:q2(r),createVisualElement:t,Component:n};return m2(o)}}function Hx(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}function el(e,t,s){const n=e.getProps();return $d(n,t,s!==void 0?s:n.custom,e)}const W2=Pd(()=>window.ScrollTimeline!==void 0);class G2{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,s){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=s}attachTimeline(t,s){const n=this.animations.map(r=>{if(W2()&&r.attachTimeline)return r.attachTimeline(t);if(typeof s=="function")return s(r)});return()=>{n.forEach((r,a)=>{r&&r(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let s=0;s<this.animations.length;s++)t=Math.max(t,this.animations[s].duration);return t}runAll(t){this.animations.forEach(s=>s[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class K2 extends G2{then(t,s){return Promise.all(this.animations).then(t).catch(s)}}function qd(e,t){return e?e[t]||e.default||e:void 0}const lu=2e4;function Wx(e){let t=0;const s=50;let n=e.next(t);for(;!n.done&&t<lu;)t+=s,n=e.next(t);return t>=lu?1/0:t}function Hd(e){return typeof e=="function"}function rm(e,t){e.timeline=t,e.onfinish=null}const Wd=e=>Array.isArray(e)&&typeof e[0]=="number",Z2={linearEasing:void 0};function Y2(e,t){const s=Pd(e);return()=>{var n;return(n=Z2[t])!==null&&n!==void 0?n:s()}}const vo=Y2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gx=(e,t,s=10)=>{let n="";const r=Math.max(Math.round(t/s),2);for(let a=0;a<r;a++)n+=e(pr(0,r-1,a))+", ";return`linear(${n.substring(0,n.length-2)})`};function Kx(e){return!!(typeof e=="function"&&vo()||!e||typeof e=="string"&&(e in cu||vo())||Wd(e)||Array.isArray(e)&&e.every(Kx))}const Vr=([e,t,s,n])=>`cubic-bezier(${e}, ${t}, ${s}, ${n})`,cu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vr([0,.65,.55,1]),circOut:Vr([.55,0,1,.45]),backIn:Vr([.31,.01,.66,-.59]),backOut:Vr([.33,1.53,.69,.99])};function Zx(e,t){if(e)return typeof e=="function"&&vo()?Gx(e,t):Wd(e)?Vr(e):Array.isArray(e)?e.map(s=>Zx(s,t)||cu.easeOut):cu[e]}const Dt={x:!1,y:!1};function Yx(){return Dt.x||Dt.y}function Q2(e,t,s){var n;if(e instanceof Element)return[e];if(typeof e=="string"){let r=document;const a=(n=void 0)!==null&&n!==void 0?n:r.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function Qx(e,t){const s=Q2(e),n=new AbortController,r={passive:!0,...t,signal:n.signal};return[s,r,()=>n.abort()]}function im(e){return t=>{t.pointerType==="touch"||Yx()||e(t)}}function J2(e,t,s={}){const[n,r,a]=Qx(e,s),o=im(l=>{const{target:c}=l,u=t(l);if(typeof u!="function"||!c)return;const d=im(h=>{u(h),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,r)});return n.forEach(l=>{l.addEventListener("pointerenter",o,r)}),a}const Jx=(e,t)=>t?e===t?!0:Jx(e,t.parentElement):!1,Gd=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,X2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ek(e){return X2.has(e.tagName)||e.tabIndex!==-1}const qr=new WeakSet;function am(e){return t=>{t.key==="Enter"&&e(t)}}function Il(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const tk=(e,t)=>{const s=e.currentTarget;if(!s)return;const n=am(()=>{if(qr.has(s))return;Il(s,"down");const r=am(()=>{Il(s,"up")}),a=()=>Il(s,"cancel");s.addEventListener("keyup",r,t),s.addEventListener("blur",a,t)});s.addEventListener("keydown",n,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),t)};function om(e){return Gd(e)&&!Yx()}function sk(e,t,s={}){const[n,r,a]=Qx(e,s),o=l=>{const c=l.currentTarget;if(!om(l)||qr.has(c))return;qr.add(c);const u=t(l),d=(p,w)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!om(p)||!qr.has(c))&&(qr.delete(c),typeof u=="function"&&u(p,{success:w}))},h=p=>{d(p,s.useGlobalTarget||Jx(c,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,r),window.addEventListener("pointercancel",f,r)};return n.forEach(l=>{!ek(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(s.useGlobalTarget?window:l).addEventListener("pointerdown",o,r),l.addEventListener("focus",u=>tk(u,r),r)}),a}function nk(e){return e==="x"||e==="y"?Dt[e]?null:(Dt[e]=!0,()=>{Dt[e]=!1}):Dt.x||Dt.y?null:(Dt.x=Dt.y=!0,()=>{Dt.x=Dt.y=!1})}const Xx=new Set(["width","height","top","left","right","bottom",...Nr]);let Fa;function rk(){Fa=void 0}const Xt={now:()=>(Fa===void 0&&Xt.set(Be.isProcessing||XN.useManualTiming?Be.timestamp:performance.now()),Fa),set:e=>{Fa=e,queueMicrotask(rk)}};function Kd(e,t){e.indexOf(t)===-1&&e.push(t)}function Zd(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class Yd{constructor(){this.subscriptions=[]}add(t){return Kd(this.subscriptions,t),()=>Zd(this.subscriptions,t)}notify(t,s,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,s,n);else for(let a=0;a<r;a++){const o=this.subscriptions[a];o&&o(t,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function ey(e,t){return t?e*(1e3/t):0}const lm=30,ik=e=>!isNaN(parseFloat(e));class ak{constructor(t,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,r=!0)=>{const a=Xt.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=Xt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=ik(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new Yd);const n=this.events[t].add(s);return t==="change"?()=>{n(),ve.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Xt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>lm)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,lm);return ey(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mi(e,t){return new ak(e,t)}function ok(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,Mi(s))}function lk(e,t){const s=el(e,t);let{transitionEnd:n={},transition:r={},...a}=s||{};a={...a,...n};for(const o in a){const l=w2(a[o]);ok(e,o,l)}}function ck(e){return!!(Je(e)&&e.add)}function uu(e,t){const s=e.getValue("willChange");if(ck(s))return s.add(t)}function ty(e){return e.props[Rx]}const sy=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,uk=1e-7,dk=12;function hk(e,t,s,n,r){let a,o,l=0;do o=t+(s-t)/2,a=sy(o,n,r)-e,a>0?s=o:t=o;while(Math.abs(a)>uk&&++l<dk);return o}function Ki(e,t,s,n){if(e===t&&s===n)return yt;const r=a=>hk(a,0,1,e,s);return a=>a===0||a===1?a:sy(r(a),t,n)}const ny=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ry=e=>t=>1-e(1-t),iy=Ki(.33,1.53,.69,.99),Qd=ry(iy),ay=ny(Qd),oy=e=>(e*=2)<1?.5*Qd(e):.5*(2-Math.pow(2,-10*(e-1))),Jd=e=>1-Math.sin(Math.acos(e)),ly=ry(Jd),cy=ny(Jd),uy=e=>/^0[^.\s]+$/u.test(e);function fk(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||uy(e):!0}const ii=e=>Math.round(e*1e5)/1e5,Xd=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function mk(e){return e==null}const pk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,eh=(e,t)=>s=>!!(typeof s=="string"&&pk.test(s)&&s.startsWith(e)||t&&!mk(s)&&Object.prototype.hasOwnProperty.call(s,t)),dy=(e,t,s)=>n=>{if(typeof n!="string")return n;const[r,a,o,l]=n.match(Xd);return{[e]:parseFloat(r),[t]:parseFloat(a),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},gk=e=>ps(0,255,e),zl={...kr,transform:e=>Math.round(gk(e))},dn={test:eh("rgb","red"),parse:dy("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:n=1})=>"rgba("+zl.transform(e)+", "+zl.transform(t)+", "+zl.transform(s)+", "+ii(Li.transform(n))+")"};function xk(e){let t="",s="",n="",r="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),r=e.substring(4,5),t+=t,s+=s,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const du={test:eh("#"),parse:xk,transform:dn.transform},Gn={test:eh("hsl","hue"),parse:dy("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+Jt.transform(ii(t))+", "+Jt.transform(ii(s))+", "+ii(Li.transform(n))+")"},Ye={test:e=>dn.test(e)||du.test(e)||Gn.test(e),parse:e=>dn.test(e)?dn.parse(e):Gn.test(e)?Gn.parse(e):du.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?dn.transform(e):Gn.transform(e)},yk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vk(e){var t,s;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Xd))===null||t===void 0?void 0:t.length)||0)+(((s=e.match(yk))===null||s===void 0?void 0:s.length)||0)>0}const hy="number",fy="color",wk="var",bk="var(",cm="${}",jk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Di(e){const t=e.toString(),s=[],n={color:[],number:[],var:[]},r=[];let a=0;const l=t.replace(jk,c=>(Ye.test(c)?(n.color.push(a),r.push(fy),s.push(Ye.parse(c))):c.startsWith(bk)?(n.var.push(a),r.push(wk),s.push(c)):(n.number.push(a),r.push(hy),s.push(parseFloat(c))),++a,cm)).split(cm);return{values:s,split:l,indexes:n,types:r}}function my(e){return Di(e).values}function py(e){const{split:t,types:s}=Di(e),n=t.length;return r=>{let a="";for(let o=0;o<n;o++)if(a+=t[o],r[o]!==void 0){const l=s[o];l===hy?a+=ii(r[o]):l===fy?a+=Ye.transform(r[o]):a+=r[o]}return a}}const _k=e=>typeof e=="number"?0:e;function Nk(e){const t=my(e);return py(e)(t.map(_k))}const Vs={test:vk,parse:my,createTransformer:py,getAnimatableNone:Nk},kk=new Set(["brightness","contrast","saturate","opacity"]);function Sk(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=s.match(Xd)||[];if(!n)return e;const r=s.replace(n,"");let a=kk.has(t)?1:0;return n!==s&&(a*=100),t+"("+a+r+")"}const Ck=/\b([a-z-]*)\(.*?\)/gu,hu={...Vs,getAnimatableNone:e=>{const t=e.match(Ck);return t?t.map(Sk).join(" "):e}},Ek={...Id,color:Ye,backgroundColor:Ye,outlineColor:Ye,fill:Ye,stroke:Ye,borderColor:Ye,borderTopColor:Ye,borderRightColor:Ye,borderBottomColor:Ye,borderLeftColor:Ye,filter:hu,WebkitFilter:hu},th=e=>Ek[e];function gy(e,t){let s=th(e);return s!==hu&&(s=Vs),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const Tk=new Set(["auto","none","0"]);function Pk(e,t,s){let n=0,r;for(;n<e.length&&!r;){const a=e[n];typeof a=="string"&&!Tk.has(a)&&Di(a).values.length&&(r=e[n]),n++}if(r&&s)for(const a of t)e[a]=gy(s,r)}const um=e=>e===kr||e===J,dm=(e,t)=>parseFloat(e.split(", ")[t]),hm=(e,t)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const r=n.match(/^matrix3d\((.+)\)$/u);if(r)return dm(r[1],t);{const a=n.match(/^matrix\((.+)\)$/u);return a?dm(a[1],e):0}},Rk=new Set(["x","y","z"]),Ak=Nr.filter(e=>!Rk.has(e));function Lk(e){const t=[];return Ak.forEach(s=>{const n=e.getValue(s);n!==void 0&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t}const xr={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:hm(4,13),y:hm(5,14)};xr.translateX=xr.x;xr.translateY=xr.y;const pn=new Set;let fu=!1,mu=!1;function xy(){if(mu){const e=Array.from(pn).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),s=new Map;t.forEach(n=>{const r=Lk(n);r.length&&(s.set(n,r),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const r=s.get(n);r&&r.forEach(([a,o])=>{var l;(l=n.getValue(a))===null||l===void 0||l.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}mu=!1,fu=!1,pn.forEach(e=>e.complete()),pn.clear()}function yy(){pn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(mu=!0)})}function Mk(){yy(),xy()}class sh{constructor(t,s,n,r,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=n,this.motionValue=r,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(pn.add(this),fu||(fu=!0,ve.read(yy),ve.resolveKeyframes(xy))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:n,motionValue:r}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const o=r==null?void 0:r.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&s){const c=n.readValue(s,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),r&&o===void 0&&r.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),pn.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,pn.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const vy=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Dk=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $k(e){const t=Dk.exec(e);if(!t)return[,];const[,s,n,r]=t;return[`--${s??n}`,r]}function wy(e,t,s=1){const[n,r]=$k(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const o=a.trim();return vy(o)?parseFloat(o):o}return Od(r)?wy(r,t,s+1):r}const by=e=>t=>t.test(e),Ok={test:e=>e==="auto",parse:e=>e},jy=[kr,J,Jt,bs,S2,k2,Ok],fm=e=>jy.find(by(e));class _y extends sh{constructor(t,s,n,r,a){super(t,s,n,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),Od(u))){const d=wy(u,s.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Xx.has(n)||t.length!==2)return;const[r,a]=t,o=fm(r),l=fm(a);if(o!==l)if(um(o)&&um(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,n=[];for(let r=0;r<t.length;r++)fk(t[r])&&n.push(r);n.length&&Pk(t,n,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xr[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const r=s[s.length-1];r!==void 0&&t.getValue(n,r).jump(r,!1)}measureEndState(){var t;const{element:s,name:n,unresolvedKeyframes:r}=this;if(!s||!s.current)return;const a=s.getValue(n);a&&a.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=xr[n](s.measureViewportBox(),window.getComputedStyle(s.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,u])=>{s.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const mm=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Vs.test(e)||e==="0")&&!e.startsWith("url("));function Ik(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function zk(e,t,s,n){const r=e[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=mm(r,t),l=mm(a,t);return!o||!l?!1:Ik(e)||(s==="spring"||Hd(s))&&n}const Fk=e=>e!==null;function tl(e,{repeat:t,repeatType:s="loop"},n){const r=e.filter(Fk),a=t&&s!=="loop"&&t%2===1?0:r.length-1;return!a||n===void 0?r[a]:n}const Uk=40;class Ny{constructor({autoplay:t=!0,delay:s=0,type:n="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Xt.now(),this.options={autoplay:t,delay:s,type:n,repeat:r,repeatDelay:a,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Uk?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Mk(),this._resolved}onKeyframesResolved(t,s){this.resolvedAt=Xt.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:a,delay:o,onComplete:l,onUpdate:c,isGenerator:u}=this.options;if(!u&&!zk(t,n,r,a))if(o)this.options.duration=0;else{c&&c(tl(t,this.options,s)),l&&l(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,s);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:s,...d},this.onPostResolved())}onPostResolved(){}then(t,s){return this.currentFinishedPromise.then(t,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const _e=(e,t,s)=>e+(t-e)*s;function Fl(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function Bk({hue:e,saturation:t,lightness:s,alpha:n}){e/=360,t/=100,s/=100;let r=0,a=0,o=0;if(!t)r=a=o=s;else{const l=s<.5?s*(1+t):s+t-s*t,c=2*s-l;r=Fl(c,l,e+1/3),a=Fl(c,l,e),o=Fl(c,l,e-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}function wo(e,t){return s=>s>0?t:e}const Ul=(e,t,s)=>{const n=e*e,r=s*(t*t-n)+n;return r<0?0:Math.sqrt(r)},Vk=[du,dn,Gn],qk=e=>Vk.find(t=>t.test(e));function pm(e){const t=qk(e);if(!t)return!1;let s=t.parse(e);return t===Gn&&(s=Bk(s)),s}const gm=(e,t)=>{const s=pm(e),n=pm(t);if(!s||!n)return wo(e,t);const r={...s};return a=>(r.red=Ul(s.red,n.red,a),r.green=Ul(s.green,n.green,a),r.blue=Ul(s.blue,n.blue,a),r.alpha=_e(s.alpha,n.alpha,a),dn.transform(r))},Hk=(e,t)=>s=>t(e(s)),Zi=(...e)=>e.reduce(Hk),pu=new Set(["none","hidden"]);function Wk(e,t){return pu.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function Gk(e,t){return s=>_e(e,t,s)}function nh(e){return typeof e=="number"?Gk:typeof e=="string"?Od(e)?wo:Ye.test(e)?gm:Yk:Array.isArray(e)?ky:typeof e=="object"?Ye.test(e)?gm:Kk:wo}function ky(e,t){const s=[...e],n=s.length,r=e.map((a,o)=>nh(a)(a,t[o]));return a=>{for(let o=0;o<n;o++)s[o]=r[o](a);return s}}function Kk(e,t){const s={...e,...t},n={};for(const r in s)e[r]!==void 0&&t[r]!==void 0&&(n[r]=nh(e[r])(e[r],t[r]));return r=>{for(const a in n)s[a]=n[a](r);return s}}function Zk(e,t){var s;const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const o=t.types[a],l=e.indexes[o][r[o]],c=(s=e.values[l])!==null&&s!==void 0?s:0;n[a]=c,r[o]++}return n}const Yk=(e,t)=>{const s=Vs.createTransformer(t),n=Di(e),r=Di(t);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?pu.has(e)&&!r.values.length||pu.has(t)&&!n.values.length?Wk(e,t):Zi(ky(Zk(n,r),r.values),s):wo(e,t)};function Sy(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?_e(e,t,s):nh(e)(e,t)}const Qk=5;function Cy(e,t,s){const n=Math.max(t-Qk,0);return ey(s-e(n),t-n)}const Se={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bl=.001;function Jk({duration:e=Se.duration,bounce:t=Se.bounce,velocity:s=Se.velocity,mass:n=Se.mass}){let r,a,o=1-t;o=ps(Se.minDamping,Se.maxDamping,o),e=ps(Se.minDuration,Se.maxDuration,ls(e)),o<1?(r=u=>{const d=u*o,h=d*e,f=d-s,p=gu(u,o),w=Math.exp(-h);return Bl-f/p*w},a=u=>{const h=u*o*e,f=h*s+s,p=Math.pow(o,2)*Math.pow(u,2)*e,w=Math.exp(-h),y=gu(Math.pow(u,2),o);return(-r(u)+Bl>0?-1:1)*((f-p)*w)/y}):(r=u=>{const d=Math.exp(-u*e),h=(u-s)*e+1;return-Bl+d*h},a=u=>{const d=Math.exp(-u*e),h=(s-u)*(e*e);return d*h});const l=5/e,c=eS(r,a,l);if(e=os(e),isNaN(c))return{stiffness:Se.stiffness,damping:Se.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const Xk=12;function eS(e,t,s){let n=s;for(let r=1;r<Xk;r++)n=n-e(n)/t(n);return n}function gu(e,t){return e*Math.sqrt(1-t*t)}const tS=["duration","bounce"],sS=["stiffness","damping","mass"];function xm(e,t){return t.some(s=>e[s]!==void 0)}function nS(e){let t={velocity:Se.velocity,stiffness:Se.stiffness,damping:Se.damping,mass:Se.mass,isResolvedFromDuration:!1,...e};if(!xm(e,sS)&&xm(e,tS))if(e.visualDuration){const s=e.visualDuration,n=2*Math.PI/(s*1.2),r=n*n,a=2*ps(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:Se.mass,stiffness:r,damping:a}}else{const s=Jk(e);t={...t,...s,mass:Se.mass},t.isResolvedFromDuration=!0}return t}function Ey(e=Se.visualDuration,t=Se.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:r}=s;const a=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=nS({...s,velocity:-ls(s.velocity||0)}),w=f||0,y=u/(2*Math.sqrt(c*d)),b=o-a,m=ls(Math.sqrt(c/d)),x=Math.abs(b)<5;n||(n=x?Se.restSpeed.granular:Se.restSpeed.default),r||(r=x?Se.restDelta.granular:Se.restDelta.default);let v;if(y<1){const k=gu(m,y);v=S=>{const A=Math.exp(-y*m*S);return o-A*((w+y*m*b)/k*Math.sin(k*S)+b*Math.cos(k*S))}}else if(y===1)v=k=>o-Math.exp(-m*k)*(b+(w+m*b)*k);else{const k=m*Math.sqrt(y*y-1);v=S=>{const A=Math.exp(-y*m*S),C=Math.min(k*S,300);return o-A*((w+y*m*b)*Math.sinh(C)+k*b*Math.cosh(C))/k}}const _={calculatedDuration:p&&h||null,next:k=>{const S=v(k);if(p)l.done=k>=h;else{let A=0;y<1&&(A=k===0?os(w):Cy(v,k,S));const C=Math.abs(A)<=n,L=Math.abs(o-S)<=r;l.done=C&&L}return l.value=l.done?o:S,l},toString:()=>{const k=Math.min(Wx(_),lu),S=Gx(A=>_.next(k*A).value,k,30);return k+"ms "+S}};return _}function ym({keyframes:e,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},p=C=>l!==void 0&&C<l||c!==void 0&&C>c,w=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let y=s*t;const b=h+y,m=o===void 0?b:o(b);m!==b&&(y=m-h);const x=C=>-y*Math.exp(-C/n),v=C=>m+x(C),_=C=>{const L=x(C),R=v(C);f.done=Math.abs(L)<=u,f.value=f.done?m:R};let k,S;const A=C=>{p(f.value)&&(k=C,S=Ey({keyframes:[f.value,w(f.value)],velocity:Cy(v,C,f.value),damping:r,stiffness:a,restDelta:u,restSpeed:d}))};return A(0),{calculatedDuration:null,next:C=>{let L=!1;return!S&&k===void 0&&(L=!0,_(C),A(C)),k!==void 0&&C>=k?S.next(C-k):(!L&&_(C),f)}}}const rS=Ki(.42,0,1,1),iS=Ki(0,0,.58,1),Ty=Ki(.42,0,.58,1),aS=e=>Array.isArray(e)&&typeof e[0]!="number",vm={linear:yt,easeIn:rS,easeInOut:Ty,easeOut:iS,circIn:Jd,circInOut:cy,circOut:ly,backIn:Qd,backInOut:ay,backOut:iy,anticipate:oy},wm=e=>{if(Wd(e)){au(e.length===4);const[t,s,n,r]=e;return Ki(t,s,n,r)}else if(typeof e=="string")return au(vm[e]!==void 0),vm[e];return e};function oS(e,t,s){const n=[],r=s||Sy,a=e.length-1;for(let o=0;o<a;o++){let l=r(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||yt:t;l=Zi(c,l)}n.push(l)}return n}function lS(e,t,{clamp:s=!0,ease:n,mixer:r}={}){const a=e.length;if(au(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=oS(t,n,r),c=l.length,u=d=>{if(o&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=pr(e[h],e[h+1],d);return l[h](f)};return s?d=>u(ps(e[0],e[a-1],d)):u}function cS(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const r=pr(0,t,n);e.push(_e(s,1,r))}}function uS(e){const t=[0];return cS(t,e.length-1),t}function dS(e,t){return e.map(s=>s*t)}function hS(e,t){return e.map(()=>t||Ty).splice(0,e.length-1)}function bo({duration:e=300,keyframes:t,times:s,ease:n="easeInOut"}){const r=aS(n)?n.map(wm):wm(n),a={done:!1,value:t[0]},o=dS(s&&s.length===t.length?s:uS(t),e),l=lS(o,t,{ease:Array.isArray(r)?r:hS(t,r)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const fS=e=>{const t=({timestamp:s})=>e(s);return{start:()=>ve.update(t,!0),stop:()=>Bs(t),now:()=>Be.isProcessing?Be.timestamp:Xt.now()}},mS={decay:ym,inertia:ym,tween:bo,keyframes:bo,spring:Ey},pS=e=>e/100;class rh extends Ny{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:s,motionValue:n,element:r,keyframes:a}=this.options,o=(r==null?void 0:r.KeyframeResolver)||sh,l=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new o(a,l,s,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:s="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:a,velocity:o=0}=this.options,l=Hd(s)?s:mS[s]||bo;let c,u;l!==bo&&typeof t[0]!="number"&&(c=Zi(pS,Sy(t[0],t[1])),t=[0,100]);const d=l({...this.options,keyframes:t});a==="mirror"&&(u=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Wx(d));const{calculatedDuration:h}=d,f=h+r,p=f*(n+1)-r;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,s=!1){const{resolved:n}=this;if(!n){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:r,generator:a,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:h}=n;if(this.startTime===null)return a.next(0);const{delay:f,repeat:p,repeatType:w,repeatDelay:y,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),s?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const m=this.currentTime-f*(this.speed>=0?1:-1),x=this.speed>=0?m<0:m>d;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let v=this.currentTime,_=a;if(p){const C=Math.min(this.currentTime,d)/h;let L=Math.floor(C),R=C%1;!R&&C>=1&&(R=1),R===1&&L--,L=Math.min(L,p+1),!!(L%2)&&(w==="reverse"?(R=1-R,y&&(R-=y/h)):w==="mirror"&&(_=o)),v=ps(0,1,R)*h}const k=x?{done:!1,value:c[0]}:_.next(v);l&&(k.value=l(k.value));let{done:S}=k;!x&&u!==null&&(S=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return A&&r!==void 0&&(k.value=tl(c,this.options,r)),b&&b(k.value),A&&this.finish(),k}get duration(){const{resolved:t}=this;return t?ls(t.calculatedDuration):0}get time(){return ls(this.currentTime)}set time(t){t=os(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=ls(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=fS,onPlay:s,startTime:n}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),s&&s();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const gS=new Set(["opacity","clipPath","filter","transform"]);function xS(e,t,s,{delay:n=0,duration:r=300,repeat:a=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const u={[t]:s};c&&(u.offset=c);const d=Zx(l,r);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}const yS=Pd(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),jo=10,vS=2e4;function wS(e){return Hd(e.type)||e.type==="spring"||!Kx(e.ease)}function bS(e,t){const s=new rh({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const r=[];let a=0;for(;!n.done&&a<vS;)n=s.sample(a),r.push(n.value),a+=jo;return{times:void 0,keyframes:r,duration:a-jo,ease:"linear"}}const Py={anticipate:oy,backInOut:ay,circInOut:cy};function jS(e){return e in Py}class bm extends Ny{constructor(t){super(t);const{name:s,motionValue:n,element:r,keyframes:a}=this.options;this.resolver=new _y(a,(o,l)=>this.onKeyframesResolved(o,l),s,n,r),this.resolver.scheduleResolve()}initPlayback(t,s){let{duration:n=300,times:r,ease:a,type:o,motionValue:l,name:c,startTime:u}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof a=="string"&&vo()&&jS(a)&&(a=Py[a]),wS(this.options)){const{onComplete:h,onUpdate:f,motionValue:p,element:w,...y}=this.options,b=bS(t,y);t=b.keyframes,t.length===1&&(t[1]=t[0]),n=b.duration,r=b.times,a=b.ease,o="keyframes"}const d=xS(l.owner.current,c,t,{...this.options,duration:n,times:r,ease:a});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(rm(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;l.set(tl(t,this.options,s)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:r,type:o,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:s}=t;return ls(s)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:s}=t;return ls(s.currentTime||0)}set time(t){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.currentTime=os(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:s}=t;return s.playbackRate}set speed(t){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:s}=t;return s.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:s}=t;return s.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:s}=this;if(!s)return yt;const{animation:n}=s;rm(n,t)}return yt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:s}=t;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:s,keyframes:n,duration:r,type:a,ease:o,times:l}=t;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:h,element:f,...p}=this.options,w=new rh({...p,keyframes:n,duration:r,type:a,ease:o,times:l,isGenerator:!0}),y=os(this.time);u.setWithVelocity(w.sample(y-jo).value,w.sample(y).value,jo)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:s,name:n,repeatDelay:r,repeatType:a,damping:o,type:l}=t;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=s.owner.getProps();return yS()&&n&&gS.has(n)&&!c&&!u&&!r&&a!=="mirror"&&o!==0&&l!=="inertia"}}const _S={type:"spring",stiffness:500,damping:25,restSpeed:10},NS=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),kS={type:"keyframes",duration:.8},SS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CS=(e,{keyframes:t})=>t.length>2?kS:Cn.has(e)?e.startsWith("scale")?NS(t[1]):_S:SS;function ES({when:e,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:r,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const ih=(e,t,s,n={},r,a)=>o=>{const l=qd(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-os(c);let d={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:r};ES(l)||(d={...d,...CS(e,d)}),d.duration&&(d.duration=os(d.duration)),d.repeatDelay&&(d.repeatDelay=os(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!a&&t.get()!==void 0){const f=tl(d.keyframes,l);if(f!==void 0)return ve.update(()=>{d.onUpdate(f),d.onComplete()}),new K2([])}return!a&&bm.supports(d)?new bm(d):new rh(d)};function TS({protectedKeys:e,needsAnimating:t},s){const n=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,n}function Ry(e,t,{delay:s=0,transitionOverride:n,type:r}={}){var a;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(o=n);const u=[],d=r&&e.animationState&&e.animationState.getState()[r];for(const h in c){const f=e.getValue(h,(a=e.latestValues[h])!==null&&a!==void 0?a:null),p=c[h];if(p===void 0||d&&TS(d,h))continue;const w={delay:s,...qd(o||{},h)};let y=!1;if(window.MotionHandoffAnimation){const m=ty(e);if(m){const x=window.MotionHandoffAnimation(m,h,ve);x!==null&&(w.startTime=x,y=!0)}}uu(e,h),f.start(ih(h,f,p,e.shouldReduceMotion&&Xx.has(h)?{type:!1}:w,e,y));const b=f.animation;b&&u.push(b)}return l&&Promise.all(u).then(()=>{ve.update(()=>{l&&lk(e,l)})}),u}function xu(e,t,s={}){var n;const r=el(e,t,s.type==="exit"?(n=e.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(a=s.transitionOverride);const o=r?()=>Promise.all(Ry(e,r,s)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=a;return PS(e,t,d+u,h,f,s)}:()=>Promise.resolve(),{when:c}=a;if(c){const[u,d]=c==="beforeChildren"?[o,l]:[l,o];return u().then(()=>d())}else return Promise.all([o(),l(s.delay)])}function PS(e,t,s=0,n=0,r=1,a){const o=[],l=(e.variantChildren.size-1)*n,c=r===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(RS).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(xu(u,t,{...a,delay:s+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function RS(e,t){return e.sortNodePosition(t)}function AS(e,t,s={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const r=t.map(a=>xu(e,a,s));n=Promise.all(r)}else if(typeof t=="string")n=xu(e,t,s);else{const r=typeof t=="function"?el(e,t,s.custom):t;n=Promise.all(Ry(e,r,s))}return n.then(()=>{e.notify("AnimationComplete",t)})}const LS=Ad.length;function Ay(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?Ay(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<LS;s++){const n=Ad[s],r=e.props[n];(Ai(r)||r===!1)&&(t[n]=r)}return t}const MS=[...Rd].reverse(),DS=Rd.length;function $S(e){return t=>Promise.all(t.map(({animation:s,options:n})=>AS(e,s,n)))}function OS(e){let t=$S(e),s=jm(),n=!0;const r=c=>(u,d)=>{var h;const f=el(e,d,c==="exit"?(h=e.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:w,...y}=f;u={...u,...y,...w}}return u};function a(c){t=c(e)}function o(c){const{props:u}=e,d=Ay(e.parent)||{},h=[],f=new Set;let p={},w=1/0;for(let b=0;b<DS;b++){const m=MS[b],x=s[m],v=u[m]!==void 0?u[m]:d[m],_=Ai(v),k=m===c?x.isActive:null;k===!1&&(w=b);let S=v===d[m]&&v!==u[m]&&_;if(S&&n&&e.manuallyAnimateOnMount&&(S=!1),x.protectedKeys={...p},!x.isActive&&k===null||!v&&!x.prevProp||Jo(v)||typeof v=="boolean")continue;const A=IS(x.prevProp,v);let C=A||m===c&&x.isActive&&!S&&_||b>w&&_,L=!1;const R=Array.isArray(v)?v:[v];let D=R.reduce(r(m),{});k===!1&&(D={});const{prevResolvedValues:T={}}=x,U={...T,...D},V=Z=>{C=!0,f.has(Z)&&(L=!0,f.delete(Z)),x.needsAnimating[Z]=!0;const N=e.getValue(Z);N&&(N.liveStyle=!1)};for(const Z in U){const N=D[Z],j=T[Z];if(p.hasOwnProperty(Z))continue;let P=!1;ou(N)&&ou(j)?P=!Hx(N,j):P=N!==j,P?N!=null?V(Z):f.add(Z):N!==void 0&&f.has(Z)?V(Z):x.protectedKeys[Z]=!0}x.prevProp=v,x.prevResolvedValues=D,x.isActive&&(p={...p,...D}),n&&e.blockInitialAnimation&&(C=!1),C&&(!(S&&A)||L)&&h.push(...R.map(Z=>({animation:Z,options:{type:m}})))}if(f.size){const b={};f.forEach(m=>{const x=e.getBaseTarget(m),v=e.getValue(m);v&&(v.liveStyle=!0),b[m]=x??null}),h.push({animation:b})}let y=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(h):Promise.resolve()}function l(c,u){var d;if(s[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),s[c].isActive=u;const h=o(c);for(const f in s)s[f].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>s,reset:()=>{s=jm(),n=!0}}}function IS(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Hx(t,e):!1}function Xs(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jm(){return{animate:Xs(!0),whileInView:Xs(),whileHover:Xs(),whileTap:Xs(),whileDrag:Xs(),whileFocus:Xs(),exit:Xs()}}class Zs{constructor(t){this.isMounted=!1,this.node=t}update(){}}class zS extends Zs{constructor(t){super(t),t.animationState||(t.animationState=OS(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Jo(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let FS=0;class US extends Zs{constructor(){super(...arguments),this.id=FS++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const r=this.node.animationState.setActive("exit",!t);s&&!t&&r.then(()=>s(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const BS={animation:{Feature:zS},exit:{Feature:US}};function $i(e,t,s,n={passive:!0}){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}function Yi(e){return{point:{x:e.pageX,y:e.pageY}}}const VS=e=>t=>Gd(t)&&e(t,Yi(t));function ai(e,t,s,n){return $i(e,t,VS(s),n)}const _m=(e,t)=>Math.abs(e-t);function qS(e,t){const s=_m(e.x,t.x),n=_m(e.y,t.y);return Math.sqrt(s**2+n**2)}class Ly{constructor(t,s,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=ql(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=qS(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:w}=h,{timestamp:y}=Be;this.history.push({...w,timestamp:y});const{onStart:b,onMove:m}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Vl(f,this.transformPagePoint),ve.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:w,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=ql(h.type==="pointercancel"?this.lastMoveEventInfo:Vl(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,b),w&&w(h,b)},!Gd(t))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=n,this.contextWindow=r||window;const o=Yi(t),l=Vl(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Be;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=s;d&&d(t,ql(l,this.history)),this.removeListeners=Zi(ai(this.contextWindow,"pointermove",this.handlePointerMove),ai(this.contextWindow,"pointerup",this.handlePointerUp),ai(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Bs(this.updatePoint)}}function Vl(e,t){return t?{point:t(e.point)}:e}function Nm(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ql({point:e},t){return{point:e,delta:Nm(e,My(t)),offset:Nm(e,HS(t)),velocity:WS(t,.1)}}function HS(e){return e[0]}function My(e){return e[e.length-1]}function WS(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const r=My(e);for(;s>=0&&(n=e[s],!(r.timestamp-n.timestamp>os(t)));)s--;if(!n)return{x:0,y:0};const a=ls(r.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const o={x:(r.x-n.x)/a,y:(r.y-n.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Dy=1e-4,GS=1-Dy,KS=1+Dy,$y=.01,ZS=0-$y,YS=0+$y;function wt(e){return e.max-e.min}function QS(e,t,s){return Math.abs(e-t)<=s}function km(e,t,s,n=.5){e.origin=n,e.originPoint=_e(t.min,t.max,e.origin),e.scale=wt(s)/wt(t),e.translate=_e(s.min,s.max,e.origin)-e.originPoint,(e.scale>=GS&&e.scale<=KS||isNaN(e.scale))&&(e.scale=1),(e.translate>=ZS&&e.translate<=YS||isNaN(e.translate))&&(e.translate=0)}function oi(e,t,s,n){km(e.x,t.x,s.x,n?n.originX:void 0),km(e.y,t.y,s.y,n?n.originY:void 0)}function Sm(e,t,s){e.min=s.min+t.min,e.max=e.min+wt(t)}function JS(e,t,s){Sm(e.x,t.x,s.x),Sm(e.y,t.y,s.y)}function Cm(e,t,s){e.min=t.min-s.min,e.max=e.min+wt(t)}function li(e,t,s){Cm(e.x,t.x,s.x),Cm(e.y,t.y,s.y)}function XS(e,{min:t,max:s},n){return t!==void 0&&e<t?e=n?_e(t,e,n.min):Math.max(e,t):s!==void 0&&e>s&&(e=n?_e(s,e,n.max):Math.min(e,s)),e}function Em(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function eC(e,{top:t,left:s,bottom:n,right:r}){return{x:Em(e.x,s,r),y:Em(e.y,t,n)}}function Tm(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}function tC(e,t){return{x:Tm(e.x,t.x),y:Tm(e.y,t.y)}}function sC(e,t){let s=.5;const n=wt(e),r=wt(t);return r>n?s=pr(t.min,t.max-n,e.min):n>r&&(s=pr(e.min,e.max-r,t.min)),ps(0,1,s)}function nC(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const yu=.35;function rC(e=yu){return e===!1?e=0:e===!0&&(e=yu),{x:Pm(e,"left","right"),y:Pm(e,"top","bottom")}}function Pm(e,t,s){return{min:Rm(e,t),max:Rm(e,s)}}function Rm(e,t){return typeof e=="number"?e:e[t]||0}const Am=()=>({translate:0,scale:1,origin:0,originPoint:0}),Kn=()=>({x:Am(),y:Am()}),Lm=()=>({min:0,max:0}),Ee=()=>({x:Lm(),y:Lm()});function kt(e){return[e("x"),e("y")]}function Oy({top:e,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:e,max:n}}}function iC({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function aC(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function Hl(e){return e===void 0||e===1}function vu({scale:e,scaleX:t,scaleY:s}){return!Hl(e)||!Hl(t)||!Hl(s)}function nn(e){return vu(e)||Iy(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Iy(e){return Mm(e.x)||Mm(e.y)}function Mm(e){return e&&e!=="0%"}function _o(e,t,s){const n=e-s,r=t*n;return s+r}function Dm(e,t,s,n,r){return r!==void 0&&(e=_o(e,r,n)),_o(e,s,n)+t}function wu(e,t=0,s=1,n,r){e.min=Dm(e.min,t,s,n,r),e.max=Dm(e.max,t,s,n,r)}function zy(e,{x:t,y:s}){wu(e.x,t.translate,t.scale,t.originPoint),wu(e.y,s.translate,s.scale,s.originPoint)}const $m=.999999999999,Om=1.0000000000001;function oC(e,t,s,n=!1){const r=s.length;if(!r)return;t.x=t.y=1;let a,o;for(let l=0;l<r;l++){a=s[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Yn(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,zy(e,o)),n&&nn(a.latestValues)&&Yn(e,a.latestValues))}t.x<Om&&t.x>$m&&(t.x=1),t.y<Om&&t.y>$m&&(t.y=1)}function Zn(e,t){e.min=e.min+t,e.max=e.max+t}function Im(e,t,s,n,r=.5){const a=_e(e.min,e.max,r);wu(e,t,s,a,n)}function Yn(e,t){Im(e.x,t.x,t.scaleX,t.scale,t.originX),Im(e.y,t.y,t.scaleY,t.scale,t.originY)}function Fy(e,t){return Oy(aC(e.getBoundingClientRect(),t))}function lC(e,t,s){const n=Fy(e,s),{scroll:r}=t;return r&&(Zn(n.x,r.offset.x),Zn(n.y,r.offset.y)),n}const Uy=({current:e})=>e?e.ownerDocument.defaultView:null,cC=new WeakMap;class uC{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ee(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Yi(d).point)},a=(d,h)=>{const{drag:f,dragPropagation:p,onDragStart:w}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=nk(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kt(b=>{let m=this.getAxisMotionValue(b).get()||0;if(Jt.test(m)){const{projection:x}=this.visualElement;if(x&&x.layout){const v=x.layout.layoutBox[b];v&&(m=wt(v)*(parseFloat(m)/100))}}this.originPoint[b]=m}),w&&ve.postRender(()=>w(d,h)),uu(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:w,onDrag:y}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=h;if(p&&this.currentDirection===null){this.currentDirection=dC(b),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),y&&y(d,h)},l=(d,h)=>this.stop(d,h),c=()=>kt(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Ly(t,{onSessionStart:r,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Uy(this.visualElement)})}stop(t,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=s;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&ve.postRender(()=>a(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,n){const{drag:r}=this.getProps();if(!n||!Na(t,r,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=XS(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var t;const{dragConstraints:s,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;s&&Wn(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&r?this.constraints=eC(r.layoutBox,s):this.constraints=!1,this.elastic=rC(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&kt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=nC(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Wn(t))return!1;const n=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=lC(n,r.root,this.visualElement.getTransformPagePoint());let o=tC(r.layout.layoutBox,a);if(s){const l=s(iC(o));this.hasMutatedConstraints=!!l,l&&(o=Oy(l))}return o}startAnimation(t){const{drag:s,dragMomentum:n,dragElastic:r,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=kt(d=>{if(!Na(d,s,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=r?200:1e6,p=r?40:1e7,w={type:"inertia",velocity:n?t[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,w)});return Promise.all(u).then(l)}startAxisValueAnimation(t,s){const n=this.getAxisMotionValue(t);return uu(this.visualElement,t),n.start(ih(t,n,0,s,this.visualElement,!1))}stopAnimation(){kt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){kt(t=>{var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),r=n[s];return r||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){kt(s=>{const{drag:n}=this.getProps();if(!Na(s,n,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(s);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[s];a.set(t[s]-_e(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Wn(s)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};kt(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();r[o]=sC({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),kt(o=>{if(!Na(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(_e(c,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;cC.set(this.visualElement,this);const t=this.visualElement.current,s=ai(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Wn(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ve.read(n);const o=$i(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(kt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),s(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:o=yu,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:n,dragPropagation:r,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function Na(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function dC(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class hC extends Zs{constructor(t){super(t),this.removeGroupControls=yt,this.removeListeners=yt,this.controls=new uC(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yt}unmount(){this.removeGroupControls(),this.removeListeners()}}const zm=e=>(t,s)=>{e&&ve.postRender(()=>e(t,s))};class fC extends Zs{constructor(){super(...arguments),this.removePointerDownListener=yt}onPointerDown(t){this.session=new Ly(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Uy(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:zm(t),onStart:zm(s),onMove:n,onEnd:(a,o)=>{delete this.session,r&&ve.postRender(()=>r(a,o))}}}mount(){this.removePointerDownListener=ai(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ua={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Fm(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const $r={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(J.test(e))e=parseFloat(e);else return e;const s=Fm(e,t.target.x),n=Fm(e,t.target.y);return`${s}% ${n}%`}},mC={correct:(e,{treeScale:t,projectionDelta:s})=>{const n=e,r=Vs.parse(e);if(r.length>5)return n;const a=Vs.createTransformer(e),o=typeof r[0]!="number"?1:0,l=s.x.scale*t.x,c=s.y.scale*t.y;r[0+o]/=l,r[1+o]/=c;const u=_e(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),a(r)}};class pC extends g.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n,layoutId:r}=this.props,{projection:a}=t;$2(gC),a&&(s.group&&s.group.add(a),n&&n.register&&r&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ua.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:n,drag:r,isPresent:a}=this.props,o=n.projection;return o&&(o.isPresent=a,r||t.layoutDependency!==s||s===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||ve.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Md.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function By(e){const[t,s]=kx(),n=g.useContext(Sd);return i.jsx(pC,{...e,layoutGroup:n,switchLayoutGroup:g.useContext(Ax),isPresent:t,safeToRemove:s})}const gC={borderRadius:{...$r,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$r,borderTopRightRadius:$r,borderBottomLeftRadius:$r,borderBottomRightRadius:$r,boxShadow:mC};function xC(e,t,s){const n=Je(e)?e:Mi(e);return n.start(ih("",n,t,s)),n.animation}function yC(e){return e instanceof SVGElement&&e.tagName!=="svg"}const vC=(e,t)=>e.depth-t.depth;class wC{constructor(){this.children=[],this.isDirty=!1}add(t){Kd(this.children,t),this.isDirty=!0}remove(t){Zd(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(vC),this.isDirty=!1,this.children.forEach(t)}}function bC(e,t){const s=Xt.now(),n=({timestamp:r})=>{const a=r-s;a>=t&&(Bs(n),e(a-t))};return ve.read(n,!0),()=>Bs(n)}const Vy=["TopLeft","TopRight","BottomLeft","BottomRight"],jC=Vy.length,Um=e=>typeof e=="string"?parseFloat(e):e,Bm=e=>typeof e=="number"||J.test(e);function _C(e,t,s,n,r,a){r?(e.opacity=_e(0,s.opacity!==void 0?s.opacity:1,NC(n)),e.opacityExit=_e(t.opacity!==void 0?t.opacity:1,0,kC(n))):a&&(e.opacity=_e(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let o=0;o<jC;o++){const l=`border${Vy[o]}Radius`;let c=Vm(t,l),u=Vm(s,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Bm(c)===Bm(u)?(e[l]=Math.max(_e(Um(c),Um(u),n),0),(Jt.test(u)||Jt.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||s.rotate)&&(e.rotate=_e(t.rotate||0,s.rotate||0,n))}function Vm(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const NC=qy(0,.5,ly),kC=qy(.5,.95,yt);function qy(e,t,s){return n=>n<e?0:n>t?1:s(pr(e,t,n))}function qm(e,t){e.min=t.min,e.max=t.max}function Nt(e,t){qm(e.x,t.x),qm(e.y,t.y)}function Hm(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Wm(e,t,s,n,r){return e-=t,e=_o(e,1/s,n),r!==void 0&&(e=_o(e,1/r,n)),e}function SC(e,t=0,s=1,n=.5,r,a=e,o=e){if(Jt.test(t)&&(t=parseFloat(t),t=_e(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=_e(a.min,a.max,n);e===a&&(l-=t),e.min=Wm(e.min,t,s,l,r),e.max=Wm(e.max,t,s,l,r)}function Gm(e,t,[s,n,r],a,o){SC(e,t[s],t[n],t[r],t.scale,a,o)}const CC=["x","scaleX","originX"],EC=["y","scaleY","originY"];function Km(e,t,s,n){Gm(e.x,t,CC,s?s.x:void 0,n?n.x:void 0),Gm(e.y,t,EC,s?s.y:void 0,n?n.y:void 0)}function Zm(e){return e.translate===0&&e.scale===1}function Hy(e){return Zm(e.x)&&Zm(e.y)}function Ym(e,t){return e.min===t.min&&e.max===t.max}function TC(e,t){return Ym(e.x,t.x)&&Ym(e.y,t.y)}function Qm(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Wy(e,t){return Qm(e.x,t.x)&&Qm(e.y,t.y)}function Jm(e){return wt(e.x)/wt(e.y)}function Xm(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class PC{constructor(){this.members=[]}add(t){Kd(this.members,t),t.scheduleRender()}remove(t){if(Zd(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(r=>t===r);if(s===0)return!1;let n;for(let r=s;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,s){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,s&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:n}=t;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function RC(e,t,s){let n="";const r=e.x.translate/t.x,a=e.y.translate/t.y,o=(s==null?void 0:s.z)||0;if((r||a||o)&&(n=`translate3d(${r}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:w}=s;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),p&&(n+=`skewX(${p}deg) `),w&&(n+=`skewY(${w}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const rn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Hr=typeof window<"u"&&window.MotionDebug!==void 0,Wl=["","X","Y","Z"],AC={visibility:"hidden"},ep=1e3;let LC=0;function Gl(e,t,s,n){const{latestValues:r}=t;r[e]&&(s[e]=r[e],t.setStaticValue(e,0),n&&(n[e]=0))}function Gy(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=ty(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:r,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",ve,!(r||a))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&Gy(n)}function Ky({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(o={},l=t==null?void 0:t()){this.id=LC++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Hr&&(rn.totalNodes=rn.resolvedTargetDeltas=rn.recalculatedProjection=0),this.nodes.forEach($C),this.nodes.forEach(UC),this.nodes.forEach(BC),this.nodes.forEach(OC),Hr&&window.MotionDebug.record(rn)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new wC)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Yd),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=yC(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=bC(f,250),Ua.hasAnimatedSinceResize&&(Ua.hasAnimatedSinceResize=!1,this.nodes.forEach(sp))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||GC,{onLayoutAnimationStart:b,onLayoutAnimationComplete:m}=d.getProps(),x=!this.targetLayout||!Wy(this.targetLayout,w)||p,v=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,v);const _={...qd(y,"layout"),onPlay:b,onComplete:m};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else f||sp(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Bs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VC),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Gy(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tp);return}this.isUpdating||this.nodes.forEach(zC),this.isUpdating=!1,this.nodes.forEach(FC),this.nodes.forEach(MC),this.nodes.forEach(DC),this.clearAllSnapshots();const l=Xt.now();Be.delta=ps(0,1e3/60,l-Be.timestamp),Be.timestamp=l,Be.isProcessing=!0,Ol.update.process(Be),Ol.preRender.process(Be),Ol.render.process(Be),Be.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Md.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IC),this.sharedNodes.forEach(qC)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ve.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ve.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ee(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Hy(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||nn(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),KC(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return Ee();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(ZC))){const{scroll:d}=this.root;d&&(Zn(c.x,d.offset.x),Zn(c.y,d.offset.y))}return c}removeElementScroll(o){var l;const c=Ee();if(Nt(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Nt(c,o),Zn(c.x,h.offset.x),Zn(c.y,h.offset.y))}return c}applyTransform(o,l=!1){const c=Ee();Nt(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Yn(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),nn(d.latestValues)&&Yn(c,d.latestValues)}return nn(this.latestValues)&&Yn(c,this.latestValues),c}removeTransform(o){const l=Ee();Nt(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!nn(u.latestValues))continue;vu(u.latestValues)&&u.updateSnapshot();const d=Ee(),h=u.measurePageBox();Nt(d,h),Km(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return nn(this.latestValues)&&Km(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Be.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Be.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ee(),this.relativeTargetOrigin=Ee(),li(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ee(),this.targetWithTransforms=Ee()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JS(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nt(this.target,this.layout.layoutBox),zy(this.target,this.targetDelta)):Nt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ee(),this.relativeTargetOrigin=Ee(),li(this.relativeTargetOrigin,this.target,p.target),Nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Hr&&rn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||vu(this.parent.latestValues)||Iy(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Be.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Nt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;oC(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ee());const{target:w}=l;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Hm(this.prevProjectionDelta.x,this.projectionDelta.x),Hm(this.prevProjectionDelta.y,this.projectionDelta.y)),oi(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!Xm(this.projectionDelta.x,this.prevProjectionDelta.x)||!Xm(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Hr&&rn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Kn(),this.projectionDelta=Kn(),this.projectionDeltaWithTransform=Kn()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Kn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Ee(),p=c?c.source:void 0,w=this.layout?this.layout.source:void 0,y=p!==w,b=this.getStack(),m=!b||b.members.length<=1,x=!!(y&&!m&&this.options.crossfade===!0&&!this.path.some(WC));this.animationProgress=0;let v;this.mixTargetDelta=_=>{const k=_/1e3;np(h.x,o.x,k),np(h.y,o.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(li(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HC(this.relativeTarget,this.relativeTargetOrigin,f,k),v&&TC(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Ee()),Nt(v,this.relativeTarget)),y&&(this.animationValues=d,_C(d,u,this.latestValues,k,x,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Bs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ve.update(()=>{Ua.hasAnimatedSinceResize=!0,this.currentAnimation=xC(0,ep,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ep),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&Zy(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Ee();const h=wt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=wt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Nt(l,c),Yn(l,d),oi(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new PC),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Gl("z",o,u,this.animationValues);for(let d=0;d<Wl.length;d++)Gl(`rotate${Wl[d]}`,o,u,this.animationValues),Gl(`skew${Wl[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return AC;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=za(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=za(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!nn(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=RC(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:p,y:w}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${w.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in yo){if(f[y]===void 0)continue;const{correct:b,applyTo:m}=yo[y],x=u.transform==="none"?f[y]:b(f[y],h);if(m){const v=m.length;for(let _=0;_<v;_++)u[m[_]]=x}else u[y]=x}return this.options.layoutId&&(u.pointerEvents=h===this?za(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(tp),this.root.sharedNodes.clear()}}}function MC(e){e.updateLayout()}function DC(e){var t;const s=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:a}=e.options,o=s.source!==e.layout.source;a==="size"?kt(h=>{const f=o?s.measuredBox[h]:s.layoutBox[h],p=wt(f);f.min=n[h].min,f.max=f.min+p}):Zy(a,s.layoutBox,n)&&kt(h=>{const f=o?s.measuredBox[h]:s.layoutBox[h],p=wt(n[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const l=Kn();oi(l,n,s.layoutBox);const c=Kn();o?oi(c,e.applyTransform(r,!0),s.measuredBox):oi(c,n,s.layoutBox);const u=!Hy(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const w=Ee();li(w,s.layoutBox,f.layoutBox);const y=Ee();li(y,n,p.layoutBox),Wy(w,y)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=w,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function $C(e){Hr&&rn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function OC(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function IC(e){e.clearSnapshot()}function tp(e){e.clearMeasurements()}function zC(e){e.isLayoutDirty=!1}function FC(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function sp(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function UC(e){e.resolveTargetDelta()}function BC(e){e.calcProjection()}function VC(e){e.resetSkewAndRotation()}function qC(e){e.removeLeadSnapshot()}function np(e,t,s){e.translate=_e(t.translate,0,s),e.scale=_e(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function rp(e,t,s,n){e.min=_e(t.min,s.min,n),e.max=_e(t.max,s.max,n)}function HC(e,t,s,n){rp(e.x,t.x,s.x,n),rp(e.y,t.y,s.y,n)}function WC(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const GC={duration:.45,ease:[.4,0,.1,1]},ip=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ap=ip("applewebkit/")&&!ip("chrome/")?Math.round:yt;function op(e){e.min=ap(e.min),e.max=ap(e.max)}function KC(e){op(e.x),op(e.y)}function Zy(e,t,s){return e==="position"||e==="preserve-aspect"&&!QS(Jm(t),Jm(s),.2)}function ZC(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const YC=Ky({attachResizeListener:(e,t)=>$i(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kl={current:void 0},Yy=Ky({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Kl.current){const e=new YC({});e.mount(window),e.setOptions({layoutScroll:!0}),Kl.current=e}return Kl.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),QC={pan:{Feature:fC},drag:{Feature:hC,ProjectionNode:Yy,MeasureLayout:By}};function lp(e,t,s){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",s==="Start");const r="onHover"+s,a=n[r];a&&ve.postRender(()=>a(t,Yi(t)))}class JC extends Zs{mount(){const{current:t}=this.node;t&&(this.unmount=J2(t,s=>(lp(this.node,s,"Start"),n=>lp(this.node,n,"End"))))}unmount(){}}class XC extends Zs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zi($i(this.node.current,"focus",()=>this.onFocus()),$i(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function cp(e,t,s){const{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",s==="Start");const r="onTap"+(s==="End"?"":s),a=n[r];a&&ve.postRender(()=>a(t,Yi(t)))}class e4 extends Zs{mount(){const{current:t}=this.node;t&&(this.unmount=sk(t,s=>(cp(this.node,s,"Start"),(n,{success:r})=>cp(this.node,n,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const bu=new WeakMap,Zl=new WeakMap,t4=e=>{const t=bu.get(e.target);t&&t(e)},s4=e=>{e.forEach(t4)};function n4({root:e,...t}){const s=e||document;Zl.has(s)||Zl.set(s,{});const n=Zl.get(s),r=JSON.stringify(t);return n[r]||(n[r]=new IntersectionObserver(s4,{root:e,...t})),n[r]}function r4(e,t,s){const n=n4(t);return bu.set(e,s),n.observe(e),()=>{bu.delete(e),n.unobserve(e)}}const i4={some:0,all:1};class a4 extends Zs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:n,amount:r="some",once:a}=t,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:i4[r]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return r4(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(o4(t,s))&&this.startObserver()}unmount(){}}function o4({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const l4={inView:{Feature:a4},tap:{Feature:e4},focus:{Feature:XC},hover:{Feature:JC}},c4={layout:{ProjectionNode:Yy,MeasureLayout:By}},ju={current:null},Qy={current:!1};function u4(){if(Qy.current=!0,!!Td)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ju.current=e.matches;e.addListener(t),t()}else ju.current=!1}const d4=[...jy,Ye,Vs],h4=e=>d4.find(by(e)),up=new WeakMap;function f4(e,t,s){for(const n in t){const r=t[n],a=s[n];if(Je(r))e.addValue(n,r);else if(Je(a))e.addValue(n,Mi(r,{owner:e}));else if(a!==r)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=e.getStaticValue(n);e.addValue(n,Mi(o!==void 0?o:r,{owner:e}))}}for(const n in s)t[n]===void 0&&e.removeValue(n);return t}const dp=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class m4{scrapeMotionValuesFromProps(t,s,n){return{}}constructor({parent:t,props:s,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sh,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Xt.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,ve.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:d}=o;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=Xo(s),this.isVariantNode=Px(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(s,{},this);for(const p in f){const w=f[p];c[p]!==void 0&&Je(w)&&w.set(c[p],!1)}}mount(t){this.current=t,up.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),Qy.current||u4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ju.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){up.delete(this.current),this.projection&&this.projection.unmount(),Bs(this.notifyUpdate),Bs(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Cn.has(t),r=s.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&ve.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=s.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{r(),a(),o&&o(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in gr){const s=gr[t];if(!s)continue;const{isEnabled:n,Feature:r}=s;if(!this.features[t]&&r&&n(this.props)&&(this.features[t]=new r(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ee()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<dp.length;n++){const r=dp[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,o=t[a];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=f4(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const n=this.values.get(t);s!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&s!==void 0&&(n=Mi(s===null?void 0:s,{owner:this}),this.addValue(t,n)),n}readValue(t,s){var n;let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(vy(r)||uy(r))?r=parseFloat(r):!h4(r)&&Vs.test(s)&&(r=gy(t,s)),this.setBaseTarget(t,Je(r)?r.get():r)),Je(r)?r.get():r}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=$d(this.props,n,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);o&&(r=o[t])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Je(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new Yd),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class Jy extends m4{constructor(){super(...arguments),this.KeyframeResolver=_y}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:n}){delete s[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Je(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function p4(e){return window.getComputedStyle(e)}class g4 extends Jy{constructor(){super(...arguments),this.type="html",this.renderInstance=zx}readValueFromInstance(t,s){if(Cn.has(s)){const n=th(s);return n&&n.default||0}else{const n=p4(t),r=($x(s)?n.getPropertyValue(s):n[s])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:s}){return Fy(t,s)}build(t,s,n){zd(t,s,n.transformTemplate)}scrapeMotionValuesFromProps(t,s,n){return Vd(t,s,n)}}class x4 extends Jy{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ee}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Cn.has(s)){const n=th(s);return n&&n.default||0}return s=Fx.has(s)?s:Ld(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,n){return Vx(t,s,n)}build(t,s,n){Fd(t,s,this.isSVGTag,n.transformTemplate)}renderInstance(t,s,n,r){Ux(t,s,n,r)}mount(t){this.isSVGTag=Bd(t.tagName),super.mount(t)}}const y4=(e,t)=>Dd(e)?new x4(t):new g4(t,{allowProjection:e!==g.Fragment}),v4=H2({...BS,...l4,...QC,...c4},y4),W=a2(v4),hp={gold:{bg:"bg-gradient-to-r from-yellow-400 to-yellow-600",border:"border-yellow-500",text:"text-yellow-900",shadow:"shadow-yellow-500/30"},silver:{bg:"bg-gradient-to-r from-gray-300 to-gray-500",border:"border-gray-400",text:"text-gray-900",shadow:"shadow-gray-500/30"},bronze:{bg:"bg-gradient-to-r from-orange-400 to-orange-600",border:"border-orange-500",text:"text-orange-900",shadow:"shadow-orange-500/30"},diamond:{bg:"bg-gradient-to-r from-cyan-300 to-purple-500",border:"border-purple-400",text:"text-white",shadow:"shadow-purple-500/30"},ruby:{bg:"bg-gradient-to-r from-red-500 to-red-700",border:"border-red-600",text:"text-white",shadow:"shadow-red-500/30"},emerald:{bg:"bg-gradient-to-r from-green-400 to-green-600",border:"border-green-500",text:"text-white",shadow:"shadow-green-500/30"},purple:{bg:"bg-gradient-to-r from-purple-500 to-purple-700",border:"border-purple-600",text:"text-white",shadow:"shadow-purple-500/30"}},w4={common:qe,rare:ri,epic:fr,legendary:We},b4={small:{container:"px-2 py-1 text-xs",icon:"w-3 h-3",border:"border-2"},medium:{container:"px-3 py-1 text-sm",icon:"w-4 h-4",border:"border-2"},large:{container:"px-4 py-2 text-lg",icon:"w-5 h-5",border:"border-2"}};function Vt({title:e,size:t="medium",showIcon:s=!0,className:n=""}){if(!e)return null;const r=hp[e.color]||hp.gold,a=b4[t],o=w4[e.rarity]||qe;return i.jsxs("div",{className:`
        inline-flex items-center gap-1 font-semibold rounded-lg
        ${r.bg} ${r.border} ${r.text}
        ${a.container} ${a.border}
        ${r.shadow} shadow-sm transform transition-all duration-200
        hover:scale-105 hover:shadow-md
        relative overflow-hidden
        ${n}
      `,title:e.description,children:[s&&i.jsx(o,{className:`${a.icon} ${r.text}`}),i.jsx("span",{className:"font-semibold",children:e.name})]})}function j4({availableTitles:e,equippedTitle:t,onEquipTitle:s,onUnequipTitle:n,loading:r=!1}){return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[i.jsx(We,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Manage Titles"]}),i.jsxs("div",{className:"rpg-card-accent",children:[i.jsx("h4",{className:"font-semibold text-white mb-3",children:"Equipped Title"}),t?i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Vt,{title:t,size:"medium"}),i.jsx("button",{onClick:n,disabled:r,className:"btn-danger btn-sm",children:"Unequip"})]}):i.jsx("p",{className:"text-gray-300 font-medium",children:"No title equipped"})]}),i.jsxs("div",{className:"rpg-card-light",children:[i.jsxs("h4",{className:"font-semibold text-white mb-3",children:["Available Titles (",e.length,")"]}),e.length>0?i.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:e.map(a=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700/50 rounded-lg border border-gray-600/30",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(Vt,{title:a,size:"medium"}),i.jsx("p",{className:"text-xs text-gray-300 mt-1",children:a.description})]}),i.jsx("button",{onClick:()=>s(a.id),disabled:r||(t==null?void 0:t.id)===a.id,className:"btn-success btn-sm ml-4",children:(t==null?void 0:t.id)===a.id?"Equipped":"Equip"})]},a.id))}):i.jsx("p",{className:"text-gray-300 font-medium",children:"No titles available. Complete achievements to unlock titles!"})]})]})}function Xy(e){const[t,s]=g.useState([]),[n,r]=g.useState(null),[a,o]=g.useState(!1),l=async()=>{var h;if(e)try{o(!0);const{data:f,error:p}=await E.from("player_titles").select(`
          id,
          title_id,
          unlocked_at,
          is_equipped,
          titles (
            id,
            name,
            description,
            color,
            rarity,
            unlock_condition
          )
        `).eq("profile_id",e);if(p)throw p;const w=(f==null?void 0:f.map(b=>b.titles))||[],y=((h=f==null?void 0:f.find(b=>b.is_equipped))==null?void 0:h.titles)||null;s(w),r(y)}catch(f){console.error("Error loading titles:",f),M.error("Failed to load titles")}finally{o(!1)}},c=async h=>{if(e)try{o(!0);const{error:f}=await E.rpc("equip_title",{player_profile_id:e,new_title_id:h});if(f)throw f;M.success("Title equipped successfully!"),await l()}catch(f){console.error("Error equipping title:",f),M.error(f.message||"Failed to equip title")}finally{o(!1)}},u=async()=>{if(e)try{o(!0);const{error:h}=await E.rpc("unequip_title",{player_profile_id:e});if(h)throw h;M.success("Title unequipped successfully!"),await l()}catch(h){console.error("Error unequipping title:",h),M.error(h.message||"Failed to unequip title")}finally{o(!1)}},d=async h=>{if(!e)return!1;try{const{data:f,error:p}=await E.rpc("award_title",{player_profile_id:e,new_title_id:h});if(p)throw p;return f?(M.success("New title unlocked!"),await l(),!0):!1}catch(f){return console.error("Error awarding title:",f),!1}};return g.useEffect(()=>{e&&l()},[e]),g.useEffect(()=>{e&&l()},[e]),{availableTitles:t,equippedTitle:n,loading:a,equipTitle:c,unequipTitle:u,awardTitle:d,loadTitles:l}}function Qi(e){const[t,s]=g.useState(null),[n,r]=g.useState(!1);return g.useEffect(()=>{if(!e)return;(async()=>{try{r(!0);const{data:o,error:l}=await E.from("profiles").select(`
            equipped_title_id,
            titles:equipped_title_id (
              id,
              name,
              description,
              color,
              rarity
            )
          `).eq("id",e).single();if(l)throw l;s((o==null?void 0:o.titles)||null)}catch(o){console.error("Error loading user title:",o),s(null)}finally{r(!1)}})()},[e]),{title:t,loading:n}}function xs(e){const[t,s]=g.useState([]),[n,r]=g.useState([]),[a,o]=g.useState(null),[l,c]=g.useState(!1),u=async()=>{var p;if(e)try{c(!0);const{data:w,error:y}=await E.from("costumes").select("*").eq("is_active",!0);if(y)throw y;s(w||[]);const{data:b,error:m}=await E.from("player_costumes").select(`
          id,
          costume_id,
          is_equipped,
          obtained_at,
          costumes (
            id,
            name,
            icon_url,
            male_image_url,
            female_image_url,
            price
          )
        `).eq("profile_id",e);if(m)throw m;const x=b||[],v=((p=x.find(_=>_.is_equipped))==null?void 0:p.costumes)||null;r(x),o(v)}catch(w){console.error("Error loading costumes:",w),M.error("Failed to load costumes")}finally{c(!1)}},d=async p=>{if(e)try{c(!0);const{error:w}=await E.rpc("equip_costume",{p_costume_id:p,p_player_profile_id:e});if(w)throw w;M.success("Costume equipped successfully!"),await u()}catch(w){console.error("Error equipping costume:",w),M.error(w.message||"Failed to equip costume")}finally{c(!1)}},h=async()=>{if(e)try{c(!0);const{error:p}=await E.rpc("unequip_costume",{p_player_profile_id:e});if(p)throw p;M.success("Costume unequipped successfully!"),await u()}catch(p){console.error("Error unequipping costume:",p),M.error(p.message||"Failed to unequip costume")}finally{c(!1)}},f=async(p,w,y)=>{if(y<p.price)return M.error(`Not enough ZGold! You need ${p.price} ZGold.`),!1;try{c(!0);const{data:b}=await E.from("player_costumes").select("id").eq("profile_id",w).eq("costume_id",p.id).maybeSingle();if(b)return M.error("You already own this costume!"),!1;const{error:m}=await E.from("profiles").update({zgold:y-p.price}).eq("id",w);if(m)throw m;const{error:x}=await E.from("player_costumes").insert({profile_id:w,costume_id:p.id,is_equipped:!1});if(x)throw x;return M.success("Costume purchased successfully!"),await u(),!0}catch(b){return console.error("Error purchasing costume:",b),M.error("Failed to purchase costume"),!1}finally{c(!1)}};return g.useEffect(()=>{e&&u()},[e]),{availableCostumes:t,playerCostumes:n,equippedCostume:a,loading:l,equipCostume:d,unequipCostume:h,loadCostumes:u,purchaseCostume:f}}const ah=e=>e===1?{position:e,name:"Mythic Overload",iconUrl:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1752603535158-sml0di.png",color:"from-purple-600 via-pink-600 to-red-600",bgColor:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600",textColor:"text-white"}:e>=2&&e<=5?{position:e,name:"Flame Champion",iconUrl:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1752603526365-fk61ub.png",color:"from-red-500 via-orange-500 to-yellow-500",bgColor:"bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500",textColor:"text-white"}:e>=6&&e<=15?{position:e,name:"Crystal Paladin",iconUrl:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1752603517800-2qgkjt.png",color:"from-blue-500 via-cyan-500 to-teal-500",bgColor:"bg-gradient-to-r from-blue-500 via-cyan-500 to-teal-500",textColor:"text-white"}:e>=16&&e<=25?{position:e,name:"Emerald Knight",iconUrl:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1752603510158-cm02oz.png",color:"from-green-500 via-emerald-500 to-teal-500",bgColor:"bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500",textColor:"text-white"}:e>=26&&e<=35?{position:e,name:"Iron Sentinel",iconUrl:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1752603501669-flbtgl.png",color:"from-gray-500 via-slate-500 to-zinc-500",bgColor:"bg-gradient-to-r from-gray-500 via-slate-500 to-zinc-500",textColor:"text-white"}:{position:e,name:"Bronze Defender",iconUrl:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1752603484789-e0mr89.png",color:"from-orange-600 via-amber-600 to-yellow-600",bgColor:"bg-gradient-to-r from-orange-600 via-amber-600 to-yellow-600",textColor:"text-white"};function cs({position:e,size:t="medium",showName:s=!1,className:n=""}){const r=ah(e),a={small:"w-6 h-6",medium:"w-8 h-8",large:"w-12 h-12"},o={small:"text-xs",medium:"text-sm",large:"text-base"};return i.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:r.iconUrl,alt:r.name,className:`${a[t]} object-contain rounded-lg `}),e<=3&&i.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 border border-white rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-xs font-bold text-black",children:e})})]}),s&&i.jsx("div",{className:`${r.bgColor} ${r.textColor} px-3 py-1 rounded-lg font-semibold ${o[t]}`,children:r.name})]})}function _4({currentPosition:e,wins:t,losses:s,className:n=""}){const r=ah(e),a=Math.max(1,e-1),o=t+s,l=o>0?t/o*100:0;return i.jsxs("div",{className:`card-dark ${n}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(cs,{position:e,size:"large"}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-bold text-white",children:["#",e," ",r.name]}),i.jsxs("p",{className:"text-gray-300 font-medium text-sm",children:[t,"W / ",s,"L (",l.toFixed(1),"% WR)"]})]})]}),e>1&&i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-gray-400 font-medium text-xs",children:"Next Rank:"}),i.jsx(cs,{position:a,size:"small",showName:!0})]})]}),e>1&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-white font-medium text-sm",children:"Rank Progress"}),i.jsxs("span",{className:"text-yellow-400 font-bold text-sm",children:[Math.min(t,10),"/10 wins needed"]})]}),i.jsx("div",{className:"progress-modern",children:i.jsx("div",{className:"progress-fill bg-gradient-to-r from-yellow-400 to-yellow-600",style:{width:`${Math.min(t/10*100,100)}%`}})})]})]})}function N4(){const[e,t]=g.useState(null),[s,n]=g.useState(!1),[r,a]=g.useState(!0),o=Ge(),{availableTitles:l,equippedTitle:c,loading:u,equipTitle:d,unequipTitle:h,loadTitles:f}=Xy((e==null?void 0:e.id)||null),{equippedCostume:p}=xs((e==null?void 0:e.id)||null);g.useEffect(()=>{w()},[]);const w=async()=>{try{const{data:{user:S}}=await E.auth.getUser();if(!S){o("/login");return}const{data:A,error:C}=await E.from("profiles").select("id, username, profile_image_url, character_type, zgold, ztoken, level, exp, strength, equipped_title_id").eq("user_id",S.id).single();if(C)throw C;t(A),await y(A.id),await b(A.id)}catch{M.error("Failed to load profile")}finally{a(!1)}},y=async S=>{try{const{data:A,error:C}=await E.from("player_ranks").select("profile_id, battles_won, stars").order("battles_won",{ascending:!1}).order("stars",{ascending:!1});if(C)throw C;const L=(A==null?void 0:A.findIndex(R=>R.profile_id===S))+1;L&&L>0&&t(R=>R?{...R,leaderboard_position:L}:null)}catch(A){console.error("Error loading leaderboard position:",A)}},b=async S=>{try{if(e!=null&&e.leaderboard_position){const A=Math.max(1,e.leaderboard_position-5);t(C=>C?{...C,highest_rank:A}:null)}}catch(A){console.error("Error loading highest rank:",A)}},m=async S=>{await d(S),await w()},x=async()=>{await h(),await w()},v=()=>{n(!0)};if(r)return i.jsx("div",{className:"min-h-screen rpg-bg flex items-center justify-center",children:i.jsxs("div",{className:"rpg-card p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),i.jsx("div",{className:"text-xl font-semibold text-white",children:"Loading Profile..."})]})});if(!e)return null;const _=e.exp/1e3*100,k=e.strength/200*100;return i.jsx("div",{className:"min-h-screen rpg-bg",children:i.jsxs("div",{className:"min-h-screen p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("button",{onClick:()=>o("/lobby"),className:"btn-secondary",children:i.jsx(Lt,{className:"w-5 h-5 mr-2"})}),i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Profile"}),i.jsx("div",{className:"w-32"})]}),i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs("div",{className:"rpg-card mb-6",children:[i.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:e.profile_image_url,alt:e.username,className:"avatar avatar-lg"}),i.jsxs("div",{className:"absolute -bottom-2 -right-2 bg-blue-500 text-white text-sm font-semibold px-3 py-1 rounded-full",children:["LV.",e.level]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-3xl font-bold text-white mb-3",children:e.username}),i.jsx("div",{onClick:v,className:"cursor-pointer inline-block mb-4",children:c?i.jsx("div",{className:"hover:scale-105 transition-transform",children:i.jsx(Vt,{title:c,size:"medium",showIcon:!0})}):i.jsx("div",{className:"rpg-card-light px-4 py-2 hover:scale-105 transition-transform",children:i.jsx("span",{className:"text-gray-300 font-medium text-sm",children:"Click to set title"})})}),i.jsxs("div",{className:"flex items-center gap-4",children:[e.leaderboard_position&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(cs,{position:e.leaderboard_position,size:"large"}),i.jsx("div",{})]}),e.highest_rank&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(cs,{position:e.highest_rank,size:"large"}),i.jsx("div",{})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsx("div",{className:"text-center",children:i.jsx("div",{className:"rpg-card-accent p-6 mb-4",children:i.jsx("img",{src:I.getCharacterImage(e.character_type,p),alt:"Character",className:"w-32 h-32 object-contain mx-auto mb-4"})})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:I.EXP,alt:"EXP",className:"w-6 h-5"}),i.jsx("span",{className:"font-medium text-white",children:"Experience"})]}),i.jsx("span",{className:"text-sm text-gray-300",children:e.exp})]}),i.jsx("div",{className:"progress-modern",children:i.jsx("div",{className:"progress-fill bg-gradient-to-r from-yellow-400 to-orange-500",style:{width:`${_}%`}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:I.kekuatan,alt:"Strength",className:"w-5 h-6"}),i.jsx("span",{className:"font-medium text-white",children:"Power Level"})]}),i.jsx("span",{className:"text-sm text-gray-300",children:e.strength})]}),i.jsx("div",{className:"progress-modern",children:i.jsx("div",{className:"progress-fill bg-gradient-to-r from-orange-400 to-red-500",style:{width:`${k}%`}})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"rpg-card-light text-center",children:[i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-8 h-8 mx-auto mb-2"}),i.jsx("div",{className:"text-xl font-bold text-white",children:e.zgold.toLocaleString()}),i.jsx("div",{className:"text-sm text-gray-300",children:"ZGold"})]}),i.jsxs("div",{className:"rpg-card-light text-center",children:[i.jsx("img",{src:I.ZTOKEN,alt:"ZToken",className:"w-8 h-8 mx-auto mb-2"}),i.jsx("div",{className:"text-xl font-bold text-white",children:e.ztoken}),i.jsx("div",{className:"text-sm text-gray-300",children:"ZToken"})]})]})]})]})]})}),i.jsx(De,{children:s&&i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rpg-card max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-white",children:[i.jsx(We,{className:"w-6 h-6 inline mr-2 text-yellow-500"}),"Manage Titles"]}),i.jsx("button",{onClick:()=>n(!1),className:"btn-secondary btn-sm",children:i.jsx(et,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"rpg-card-accent mb-6",children:[i.jsxs("h3",{className:"font-semibold text-white mb-4 flex items-center",children:[i.jsx(qe,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Currently Equipped"]}),i.jsx("div",{className:"text-center",children:c?i.jsxs("div",{className:"space-y-4",children:[i.jsx(Vt,{title:c,size:"large",showIcon:!0}),i.jsx("p",{className:"text-gray-200",children:c.description}),i.jsx("button",{onClick:x,disabled:u,className:"btn-danger",children:"Unequip Title"})]}):i.jsxs("div",{className:"py-8",children:[i.jsx(ri,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-gray-300 text-lg",children:"No title equipped"}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Select a title below to equip it"})]})})]}),i.jsxs("div",{className:"rpg-card-light",children:[i.jsxs("h3",{className:"font-semibold text-white mb-4 flex items-center",children:[i.jsx(ri,{className:"w-5 h-5 mr-2 text-purple-400"}),"Your Titles (",l.length,")"]}),l.length>0?i.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:l.map(S=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg border border-gray-600/30",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(Vt,{title:S,size:"medium"}),(c==null?void 0:c.id)===S.id&&i.jsx("span",{className:""})]}),i.jsx("p",{className:"text-xs text-gray-300",children:S.description}),i.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Rarity: ",i.jsx("span",{className:"capitalize",children:S.rarity})]})]}),i.jsx("button",{onClick:()=>m(S.id),disabled:u||(c==null?void 0:c.id)===S.id,className:"btn-success btn-sm ml-4",children:(c==null?void 0:c.id)===S.id?"Equipped":"Equip"})]},S.id))}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(ri,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-gray-300 text-lg",children:"No titles unlocked"}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Complete achievements to unlock titles!"})]})]}),i.jsx("div",{className:"mt-6",children:i.jsx("button",{onClick:()=>n(!1),className:"btn-primary w-full",children:"Close"})})]})})})]})})}function k4(){const e=Uo(),t=Ge(),{character:s,username:n}=e.state||{},[r,a]=g.useState(""),[o,l]=g.useState(""),[c,u]=g.useState(!1),d=f=>/^[A-Za-z]{1,8}$/.test(f),h=async f=>{if(f.preventDefault(),!s||!n){M.error("Character data is incomplete");return}if(!d(n)){M.error("Username hanya boleh huruf (A-Z) dan maksimal 8 karakter");return}u(!0);try{const{data:{user:p}}=await E.auth.getUser();if(!p){M.error("Please login first"),t("/login");return}const{error:w}=await E.from("profiles").insert({user_id:p.id,username:n,character_type:s,dana_number:r,profile_image_url:o});if(w){w.message.includes("username")?M.error("Username already taken"):M.error("Failed to create profile");return}M.success("Profile created successfully!"),t("/profile")}catch{M.error("An error occurred")}finally{u(!1)}};return i.jsx("div",{className:"min-h-screen rpg-bg p-4",children:i.jsxs("div",{className:"max-w-lg mx-auto pt-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-600 to-purple-800 rounded-2xl shadow-lg mb-4 rpg-glow",children:i.jsx(fr,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-2 rpg-text-glow",children:"Create Profile"}),i.jsx("p",{className:"text-gray-300",children:"Complete your character setup"})]}),i.jsxs("div",{className:"rpg-card",children:[i.jsxs("div",{className:"rpg-card-accent mb-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-purple-600 rounded-xl mb-3",children:i.jsx(Pi,{className:"w-6 h-6 text-white"})}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-1",children:n}),i.jsxs("p",{className:"text-sm text-gray-300 capitalize",children:[s," Character"]})]}),i.jsxs("form",{onSubmit:h,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx(DN,{className:"w-4 h-4 inline mr-2"}),"Dana Number"]}),i.jsx("input",{type:"text",value:r,onChange:f=>a(f.target.value),className:"input-modern w-full",placeholder:"Enter your Dana number",required:!0}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"For in-game transactions"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[i.jsx(ON,{className:"w-4 h-4 inline mr-2"}),"Profile Image URL"]}),i.jsx("input",{type:"url",value:o,onChange:f=>l(f.target.value),className:"input-modern w-full",placeholder:"https://example.com/image.jpg",required:!0}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"URL to your profile image"})]}),i.jsx("button",{type:"submit",disabled:c,className:"btn-success w-full btn-lg",children:c?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Character..."]}):i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(su,{className:"w-5 h-5 mr-2"}),"Create Character"]})})]})]}),i.jsxs("div",{className:"mt-8 flex justify-center space-x-2",children:[i.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),i.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),i.jsx("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})})}const S4=100,C4=50,fp=e=>Math.floor(S4*e**2),mp=e=>Math.floor(C4*e**1.5),pp=e=>Math.floor(5+e/10*10);function oh({isOpen:e,onClose:t,profile:s,loading:n=!1}){const{title:r}=Qi((s==null?void 0:s.id)||null),{equippedCostume:a,loading:o}=xs((s==null?void 0:s.id)||null);console.log("=== DEBUG PLAYER PROFILE MODAL ==="),console.log("Profile:",s),console.log("Profile ID:",s==null?void 0:s.id),console.log("Equipped Costume Object:",a),console.log("Costume Loading:",o),console.log("Is profile available:",!!s),console.log("================================");const l=c=>{if(!c)return"Unknown";const u=new Date,d=new Date(c),h=u.getTime()-d.getTime();if(isNaN(h)||h<0)return"Unknown";const f=Math.floor(h/(1e3*60)),p=Math.floor(f/60),w=Math.floor(p/24);return f<1?"Just now":f<60?`${f}m ago`:p<24?`${p}h ago`:`${w}d ago`};return e?i.jsx(De,{children:i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-[70]",onClick:t,children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rpg-card max-w-md w-full mx-4",onClick:c=>c.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Player Profile"}),i.jsx("button",{onClick:t,className:"btn-secondary btn-sm",children:i.jsx(et,{className:"w-4 h-4"})})]}),n?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-400",children:"Loading profile..."})]}):s?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsxs("div",{className:"relative inline-block mb-4",children:[i.jsx("img",{src:s.profile_image_url,alt:s.username,className:`avatar avatar-lg border-4 ${s.is_online?"border-green-400 shadow-md shadow-green-400/30":"border-gray-600"}`}),i.jsx("div",{className:`absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-2 border-gray-800 flex items-center justify-center ${s.is_online?"bg-green-400":"bg-gray-500"}`,children:i.jsx("div",{className:"text-white text-xs font-bold",children:s.level})})]}),i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[i.jsx("h3",{className:"text-2xl font-bold text-white",children:s.username}),r&&i.jsx(Vt,{title:r,size:"medium",showIcon:!0})]}),s.is_online!==void 0&&!s.is_online&&s.last_seen&&i.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Last seen: ",l(s.last_seen)]})]}),i.jsx("div",{className:"text-center mb-6",children:i.jsx("div",{className:"rpg-card-accent p-4",children:o?i.jsx("div",{className:"w-24 h-24 mx-auto mb-2 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"})}):i.jsx("img",{src:a?s.character_type==="male"?a.male_image_url:a.female_image_url:I.getCharacterImage(s.character_type),alt:"Character",className:"w-24 h-24 object-contain mx-auto mb-2"})})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[i.jsxs("div",{className:"rpg-card-light text-center",children:[i.jsxs("div",{className:"flex items-center justify-center mb-1",children:[i.jsx("img",{src:I.EXP,alt:"Exp",className:"w-5 h-5 mr-1"}),i.jsx("span",{className:"text-sm font-semibold",children:s.exp})]}),i.jsx("p",{className:"text-xs text-gray-300",children:"Experience"})]}),i.jsxs("div",{className:"rpg-card-light text-center",children:[i.jsxs("div",{className:"flex items-center justify-center mb-1",children:[i.jsx("img",{src:I.kekuatan,alt:"Strength",className:"w-5 h-5 mr-1"}),i.jsx("span",{className:"text-sm font-semibold",children:s.strength})]}),i.jsx("p",{className:"text-xs text-gray-300",children:"Strength"})]})]})]}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Pi,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-gray-400",children:"Profile not found"})]}),i.jsx("button",{onClick:t,className:"btn-primary w-full",children:"Close Profile"})]})})}):null}function E4({message:e}){const[t,s]=ci.useState(null),{title:n}=Qi(t);return ci.useEffect(()=>{const r=async()=>{try{const{data:a,error:o}=await E.from("profiles").select("id").eq("user_id",e.user_id).single();!o&&a&&s(a.id)}catch(a){console.error("Error getting profile ID:",a)}};e.user_id&&r()},[e.user_id]),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:e.username}),n&&i.jsx(Vt,{title:n,size:"small",showIcon:!0})]})}function T4({profile:e,showChat:t,setShowChat:s}){const[n,r]=g.useState([]),[a,o]=g.useState(""),[l,c]=g.useState(!1),[u,d]=g.useState(!1),[h,f]=g.useState(null),[p,w]=g.useState(!1),[y,b]=g.useState(!1),m=g.useRef(null),x=g.useRef(null),v=g.useRef(null),_=g.useRef(null);g.useEffect(()=>(t?(S(),R(),C(),A()):(x.current&&(x.current.unsubscribe(),x.current=null),v.current&&(clearInterval(v.current),v.current=null),_.current&&(clearInterval(_.current),_.current=null)),()=>{x.current&&(x.current.unsubscribe(),x.current=null),v.current&&(clearInterval(v.current),v.current=null),_.current&&(clearInterval(_.current),_.current=null)}),[t]),g.useEffect(()=>{k()},[n]);const k=()=>{var j;(j=m.current)==null||j.scrollIntoView({behavior:"smooth"})},S=async()=>{try{const{data:j,error:P}=await E.from("global_chat").select("id, user_id, username, message, created_at").order("created_at",{ascending:!0}).gte("created_at",new Date(Date.now()-18e5).toISOString()).limit(100);if(P)throw P;const O=j||[];r(z=>JSON.stringify(z)!==JSON.stringify(O)?O:z)}catch(j){console.error("Error loading messages:",j)}finally{u&&d(!1)}},A=()=>{_.current=setInterval(()=>{S()},2e3)},C=()=>{v.current=setInterval(()=>{L()},5*60*1e3)},L=()=>{const j=new Date(Date.now()-18e5);r(P=>P.filter(O=>new Date(O.created_at)>j))},R=()=>{x.current&&x.current.unsubscribe(),x.current=E.channel(`global_chat_${Date.now()}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"global_chat"},j=>{console.log("New message received:",j.new);const P={id:j.new.id,user_id:j.new.user_id,username:j.new.username,message:j.new.message,created_at:j.new.created_at};r(O=>{if(O.some(de=>de.id===P.id))return O;const G=[...O,P],ae=new Date(Date.now()-30*60*1e3);return G.filter(de=>new Date(de.created_at)>ae)})}).subscribe(j=>{console.log("Subscription status:",j),j==="SUBSCRIBED"&&console.log("Successfully subscribed to global chat")})},D=async()=>{if(!a.trim()||l)return;c(!0);const j=a.trim();try{const{error:P}=await E.from("global_chat").insert({user_id:e.user_id,username:e.username,message:j});if(P)throw P;o(""),setTimeout(k,100)}catch(P){console.error("Error sending message:",P),M.error("Failed to send message")}finally{c(!1)}},T=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),D())},U=j=>new Date(j).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),V=async j=>{b(!0);try{const{data:P,error:O}=await E.from("profiles").select("id").eq("user_id",j).single();if(O||!P){M.error("Profile not found");return}const{data:z,error:G}=await E.rpc("get_user_profile_by_id",{p_profile_id:P.id});if(G){console.error("Error loading profile:",G),M.error("Failed to load profile");return}z&&z.length>0?(f(z[0]),w(!0)):M.error("Profile not found")}catch(P){console.error("Error loading profile:",P),M.error("Failed to load profile")}finally{b(!1)}},[H,te]=g.useState({}),Z=async j=>{if(H[j])return H[j];try{const{data:P,error:O}=await E.from("profiles").select("id, profile_image_url, level").eq("user_id",j).single();if(!O&&P){const z={profile_image_url:P.profile_image_url,level:P.level};return te(G=>({...G,[j]:z})),z}}catch(P){console.error("Error loading user profile data:",P)}return j===e.user_id?{profile_image_url:e.profile_image_url,level:e.level}:{profile_image_url:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1752079455935-tzjifn.png",level:1}};g.useEffect(()=>{t&&n.length>0&&n.forEach(j=>{j.user_id!==e.user_id&&Z(j.user_id)})},[t,n,e.user_id]);const N=j=>H[j]||{profile_image_url:j===e.user_id?e.profile_image_url:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1752079455935-tzjifn.png",level:j===e.user_id?e.level:1};return g.useEffect(()=>{t&&(d(!0),S())},[t]),i.jsxs(De,{children:[t&&i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rpg-card w-full max-w-md h-[70vh] sm:h-[600px] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("img",{src:I.GLOBAL_CHAT,alt:"Global Chat",className:"w-5 h-5"}),i.jsx("h2",{className:"text-lg font-semibold text-white",children:"Global Chat"}),i.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse",title:"Real-time updates every 2s"})]}),i.jsx("button",{onClick:()=>s(!1),className:"btn-secondary btn-sm",children:i.jsx(et,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-0",children:[u&&i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Loading messages..."})]}),!u&&n.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(FN,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),i.jsx("p",{className:"text-gray-400",children:"No messages yet. Start the conversation!"})]}),n.map(j=>{const P=N(j.user_id),O=j.user_id===e.user_id;return i.jsxs(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex items-start space-x-3 ${O?"flex-row-reverse space-x-reverse":""}`,children:[i.jsx("button",{onClick:()=>V(j.user_id),className:"flex-shrink-0",children:i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:P.profile_image_url,alt:j.username,className:"w-8 h-8 rounded-full object-cover border-2 border-gray-600 hover:border-purple-400 transition-colors"}),i.jsx("div",{className:`absolute -bottom-1 ${O?"-left-1":"-right-1"} bg-blue-500 text-white text-xs font-semibold px-1 rounded-full min-w-[16px] h-4 flex items-center justify-center`,children:P.level})]})}),i.jsxs("div",{className:`flex-1 min-w-0 ${O?"text-right":""}`,children:[i.jsx("div",{className:`flex items-center space-x-2 mb-1 ${O?"justify-end":""}`,children:i.jsx("button",{onClick:()=>V(j.user_id),className:`hover:text-blue-300 transition-colors text-sm flex items-center gap-2 ${O?"text-purple-400":"text-blue-400"}`,children:i.jsx(E4,{message:j})})}),i.jsxs("div",{className:`inline-block max-w-xs sm:max-w-sm p-3 rounded-lg ${O?"text-white":"text-gray-100"}`,children:[i.jsx("p",{className:"text-sm break-words",children:j.message}),i.jsx("span",{className:`text-xs ${O?"text-purple-200":"text-gray-400"}`,children:U(j.created_at)})]})]})]},j.id)}),i.jsx("div",{ref:m})]}),i.jsxs("div",{className:"p-4 border-t border-gray-700",children:[i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("input",{type:"text",value:a,onChange:j=>o(j.target.value),onKeyPress:T,placeholder:"Type a message...",className:"input-modern flex-1 text-sm",maxLength:20,disabled:l}),i.jsx("button",{onClick:D,disabled:!a.trim()||l,className:"btn-primary px-3 py-2",children:l?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):i.jsx(jx,{className:"w-4 h-4"})})]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[a.length,"/20 characters"]})]})]})}),i.jsx(oh,{isOpen:p,onClose:()=>w(!1),profile:h,loading:y})]})}function P4({isOpen:e,onClose:t,profile:s,onProfileUpdate:n}){const[r,a]=g.useState([]),[o,l]=g.useState({}),[c,u]=g.useState(null),[d,h]=g.useState(!1);g.useEffect(()=>{e&&f()},[e,s]);const f=async()=>{if(s)try{const{data:m,error:x}=await E.from("dungeon_types").select("*").eq("is_active",!0).order("name");if(x)throw x;a(m||[]);const{data:v,error:_}=await E.from("dungeon_progress").select("dungeon_type_id, completion_count").eq("profile_id",s.id);if(_)throw _;const k={};v==null||v.forEach(S=>{k[S.dungeon_type_id]={completion_count:S.completion_count}}),l(k),m&&m.length>0&&u(m[0])}catch(m){console.error("Error loading dungeon data:",m),M.error("Failed to load dungeon data")}},p=m=>{u(m)},w=()=>{if(!(!c||!s)){if(s.ztoken<c.cost_ztoken){M.error(`You need ${c.cost_ztoken} ZToken to enter this dungeon!`);return}t(),window.location.href=`/dungeon/${c.id}`}},y=m=>{var x;return((x=o[m])==null?void 0:x.completion_count)||0},b=m=>{const x=y(m.id),v=m.master_title_requirement,_=Math.min(x/v*100,100);return{current:x,required:v,percentage:_}};return e?i.jsx(De,{children:i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rpg-card w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center",children:[i.jsx(Zt,{className:"w-8 h-8 mr-2 text-purple-500"}),"Portal Dungeon"]}),i.jsx("button",{onClick:t,className:"btn-secondary btn-sm",children:i.jsx(et,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Select Portal"}),i.jsx("div",{className:"space-y-3",children:r.map(m=>{const x=b(m),v=(c==null?void 0:c.id)===m.id;return i.jsx(W.button,{onClick:()=>p(m),className:`w-full text-left transition-all duration-200 rounded-xl p-4 ${v?"bg-purple-900/30 border-2 border-purple-500 shadow-md rpg-glow":"bg-gray-700/50 border border-gray-600/50 hover:border-gray-500 hover:shadow-sm"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:m.image_url,alt:m.name,className:"w-16 h-16 object-cover rounded-lg border-2 border-gray-300"}),i.jsx("div",{className:"absolute -top-2 -right-2 bg-purple-500 text-white text-xs font-semibold px-2 py-1 rounded-full",children:m.cost_ztoken})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-bold text-lg text-gray-900",children:m.name}),i.jsx("p",{className:"text-sm text-gray-300 mb-2",children:m.description}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-xs font-medium text-white",children:["Completed: ",x.current,"/",x.required]}),x.current>=x.required&&i.jsx(We,{className:"w-4 h-4 text-yellow-500"})]}),i.jsx("div",{className:"progress-modern mt-2",children:i.jsx("div",{className:"progress-fill bg-gradient-to-r from-green-400 to-green-600",style:{width:`${x.percentage}%`}})})]})]})},m.id)})})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold mb-4 text-white",children:"Rewards"}),c?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"rpg-card-accent p-4 text-center",children:[i.jsx("img",{src:c.image_url,alt:c.name,className:"w-32 h-32 mx-auto object-cover rounded-lg border-4 border-yellow-400 mb-4"}),i.jsx("h4",{className:"text-2xl font-bold text-yellow-400",children:c.name}),i.jsx("p",{className:"text-white font-medium mt-2",children:c.description})]}),i.jsxs("div",{className:"rpg-card-light",children:[i.jsx("h4",{className:"font-bold text-white mb-3",children:"Victory Rewards"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"rpg-card-light p-3 flex items-center justify-between",children:[i.jsx("span",{className:"font-medium text-white",children:"EXP:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"w-5 h-5 text-yellow-500"}),i.jsx("span",{className:"font-bold text-lg",children:c.reward_exp})]})]}),i.jsxs("div",{className:"rpg-card-light p-3 flex items-center justify-between",children:[i.jsx("span",{className:"font-medium text-white",children:"ZGold:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-5 h-5"}),i.jsx("span",{className:"font-bold text-lg",children:c.reward_zgold.toLocaleString()})]})]}),i.jsxs("div",{className:"rpg-card-light p-3 flex items-center justify-between",children:[i.jsx("span",{className:"font-medium text-white",children:"ZToken:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("img",{src:I.ZTOKEN,alt:"ZToken",className:"w-5 h-5"}),i.jsx("span",{className:"font-bold text-lg",children:c.reward_ztoken})]})]})]})]}),i.jsxs("div",{className:"rpg-card-accent p-4",children:[i.jsx("h4",{className:"font-bold text-yellow-400 mb-3",children:"Master Title"}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-600 text-gray-900 px-4 py-2 rounded-lg font-bold mb-3",children:c.master_title_name}),i.jsxs("p",{className:"text-white font-medium text-sm",children:["Complete this dungeon ",c.master_title_requirement," times to unlock"]}),i.jsx("div",{className:"mt-2",children:i.jsxs("span",{className:"text-yellow-400 font-bold",children:["Progress: ",y(c.id),"/",c.master_title_requirement]})})]})]}),i.jsxs("div",{className:"rpg-card-accent p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[i.jsx("span",{className:"font-bold text-white",children:"Cost:"}),i.jsx("img",{src:I.ZTOKEN,alt:"ZToken",className:"w-6 h-6"}),i.jsx("span",{className:"font-bold text-xl",children:c.cost_ztoken})]}),i.jsx("button",{onClick:w,disabled:d||((s==null?void 0:s.ztoken)||0)<c.cost_ztoken,className:"btn-danger btn-lg w-full",children:"Enter Dungeon"}),((s==null?void 0:s.ztoken)||0)<c.cost_ztoken&&i.jsxs("p",{className:"text-red-600 font-medium text-sm mt-2",children:["Not enough ZToken! You have ",(s==null?void 0:s.ztoken)||0]})]})]}):i.jsxs("div",{className:"rpg-card-light p-8 text-center",children:[i.jsx(Zt,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-white font-medium",children:"Select a dungeon to view rewards"})]})]})]})]})})}):null}function R4({isOpen:e,onClose:t}){return i.jsx(De,{children:e&&i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rpg-card max-w-md w-full mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center",children:[i.jsx(yx,{className:"w-6 h-6 mr-2 text-purple-400"}),"ZToken Reset"]}),i.jsx("button",{onClick:t,className:"btn-secondary btn-sm",children:i.jsx(et,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("p",{className:"text-gray-300 mb-4",children:"Your ZToken balance is reset daily to 25 if it falls below this amount. This ensures all players have enough ZToken to participate in daily activities."}),i.jsxs("div",{className:"rpg-card-accent p-4",children:[i.jsx("div",{className:"flex items-center justify-center mb-2",children:i.jsx(bn,{className:"w-5 h-5 mr-2 text-purple-500"})}),i.jsx("p",{className:"text-lg font-bold text-white",children:"18:00 WIB (11:00 UTC)"}),i.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Every day"})]})]}),i.jsx("button",{onClick:t,className:"btn-primary w-full",children:"Got It!"})]})})})}const ka={getDifficultyName:e=>{switch(e){case 1:return"Easy";case 2:return"Normal";case 3:return"Hard";case 4:return"Expert";case 5:return"Master";default:return"Unknown"}},getDifficultyColor:e=>{switch(e){case 1:return"text-green-400";case 2:return"text-blue-400";case 3:return"text-yellow-400";case 4:return"text-orange-400";case 5:return"text-red-400";default:return"text-gray-400"}}};function ev(e){const[t,s]=g.useState([]),[n,r]=g.useState(null),[a,o]=g.useState([]),[l,c]=g.useState([]),[u,d]=g.useState([]),[h,f]=g.useState(!1),[p,w]=g.useState({}),[y,b]=g.useState(null),m=g.useRef(null),x=g.useRef(null),v=g.useRef(null),_=g.useCallback(async()=>{if(e)try{const{data:N,error:j}=await E.from("raid_invites").select(`
          *,
          raid_rooms (
            room_uuid,
            raid_maps (name)
          )
        `).eq("invitee_id",e).eq("status","pending").gt("expires_at",new Date().toISOString());if(j)throw j;c(N||[])}catch(N){console.error("Error loading invites:",N)}},[e]),k=g.useCallback(()=>{if(!e)return;m.current&&(E.removeChannel(m.current),m.current=null);const N=E.channel(`raid-invites:${e}_${Date.now()}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"raid_invites",filter:`invitee_id=eq.${e}`},j=>{console.log("New raid invite received:",j.new),(async()=>{const{data:O,error:z}=await E.from("raid_invites").select(`
                *,
                raid_rooms (
                  room_uuid,
                  raid_maps (name)
                )
              `).eq("id",j.new.id).single();O&&c(G=>G.some(de=>de.id===O.id)?G:[...G,O])})()}).subscribe(j=>{console.log("Invite subscription status:",j),j==="SUBSCRIBED"&&console.log("Successfully subscribed to raid invites")});m.current=N},[e]),S=g.useCallback(()=>{v.current&&clearInterval(v.current),v.current=setInterval(()=>{_()},3e3)},[_]);g.useEffect(()=>(e&&(_(),k(),S()),()=>{m.current&&(E.removeChannel(m.current),m.current=null),v.current&&(clearInterval(v.current),v.current=null)}),[e,k,S]);const A=g.useCallback(async()=>{if(e)try{f(!0);const{data:N,error:j}=await E.from("raid_maps").select("*").order("difficulty_level");if(j)throw j;s(N||[]);const{data:P,error:O}=await E.from("raid_progress").select("map_id").eq("profile_id",e);if(O)throw O;const z={};P==null||P.forEach(G=>{z[G.map_id]=(z[G.map_id]||0)+1}),w(z)}catch(N){console.error("Error loading raid data:",N)}finally{f(!1)}},[e]),C=g.useCallback(N=>p[N]||0,[p]),L=g.useCallback(async N=>{try{f(!0);const{data:j,error:P}=await E.from("raid_rooms").select(`
          *,
          raid_maps (*)
        `).eq("room_uuid",N).single();if(P)throw P;r(j);const{data:O,error:z}=await E.from("raid_participants").select(`
          *,
          profiles (
            id,
            username,
            level,
            character_type,
            strength,
            profile_image_url
          )
        `).eq("room_id",j.id).order("slot_number");if(z)throw z;o(O||[]);const{data:G,error:ae}=await E.from("raid_chat").select(`
          id,
          message,
          created_at,
          profiles!raid_chat_profile_id_fkey (username)
        `).eq("room_id",j.id).order("created_at");if(ae)throw ae;const de=(G==null?void 0:G.map(Q=>{var re;return{id:Q.id,username:((re=Q.profiles[0])==null?void 0:re.username)||"Unknown",message:Q.message,created_at:Q.created_at}}))||[];return d(de),j}catch(j){return console.error("Error loading room data:",j),null}finally{f(!1)}},[]),R=g.useCallback(async N=>{if(!e)return{success:!1};console.log(`[Raid] User ${e} is attempting to create a room for map ${N}`);try{const{data:j,error:P}=await E.from("profiles").select("raid_tickets").eq("id",e).single();if(P)throw P;if(!j||j.raid_tickets<1)return{success:!1,error:"Insufficient raid tickets"};const O=`RAID_${Math.random().toString(36).substr(2,8).toUpperCase()}`,{data:z,error:G}=await E.from("raid_rooms").insert({room_uuid:O,creator_id:e,map_id:N,status:"waiting",max_players:3}).select("*").single();if(G)throw G;const{error:ae}=await E.from("raid_participants").insert({room_id:z.id,profile_id:e,slot_number:1,current_hp:100,max_hp:100,is_ready:!1});if(ae)throw ae;const{error:de}=await E.from("profiles").update({raid_tickets:j.raid_tickets-1}).eq("id",e);if(de)throw de;return console.log(`[Raid] User ${e} successfully created room ${O}`),L(O),{success:!0,room_uuid:O}}catch(j){return console.error(`[Raid] Error creating room for user ${e}:`,j),{success:!1,error:j.message}}},[e,L]),D=g.useCallback(()=>{n!=null&&n.room_uuid&&(x.current&&clearInterval(x.current),x.current=setInterval(()=>{n!=null&&n.room_uuid&&L(n.room_uuid)},2e3))},[n==null?void 0:n.room_uuid,L]);g.useEffect(()=>{if(n!=null&&n.id&&n.room_uuid){const N=E.channel(`raid-room:${n.room_uuid}_${Date.now()}`);return N.on("broadcast",{event:"user-action"},()=>{L(n.room_uuid)}).on("postgres_changes",{event:"*",schema:"public",table:"raid_participants",filter:`room_id=eq.${n.id}`},j=>{console.log("Raid participants changed:",j),L(n.room_uuid)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"raid_rooms",filter:`id=eq.${n.id}`},j=>{console.log(`[Raid Room: ${n.room_uuid}] Room updated:`,j.new),n!=null&&n.room_uuid&&L(n.room_uuid)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"raid_chat",filter:`room_id=eq.${n.id}`},j=>{console.log(`[Raid Room: ${n.room_uuid}] New chat message:`,j.new),(async()=>{var G;const{data:O,error:z}=await E.from("raid_chat").select("id, message, created_at, profiles!raid_chat_profile_id_fkey(username)").eq("id",j.new.id).single();if(O){const ae={id:O.id,username:((G=O.profiles[0])==null?void 0:G.username)||"Unknown",message:O.message,created_at:O.created_at};d(de=>de.some(re=>re.id===ae.id)?de:[...de,ae])}})()}).subscribe(j=>{j==="SUBSCRIBED"&&console.log(`[Raid Room: ${n.room_uuid}] Successfully subscribed to room updates.`)}),b(N),D(),()=>{E.removeChannel(N),b(null),x.current&&(clearInterval(x.current),x.current=null)}}},[n==null?void 0:n.id,n==null?void 0:n.room_uuid,L,D]);const T=g.useCallback(async(N,j)=>{if(!e)return!1;try{const{data:P,error:O}=await E.rpc("send_raid_invite",{p_inviter_profile_id:e,p_room_uuid:N,p_invitee_username:j});if(O)throw O;return!0}catch(P){return console.error("Error sending invite:",P),!1}},[e]),U=g.useCallback(async(N,j)=>{if(!e)return!1;console.log(`[Raid] User ${e} is responding '${j}' to invite ${N}`);try{const{data:P,error:O}=await E.rpc("respond_to_raid_invite",{p_invitee_profile_id:e,p_invite_id:N,p_response:j});if(O)throw O;return P.success&&j==="accepted"&&(console.log(`[Raid] User ${e} accepted invite and is joining room ${P.room_uuid}`),L(P.room_uuid).then(()=>{y==null||y.send({type:"broadcast",event:"user-action",payload:{message:`User ${e} joined the room.`}})})),P}catch(P){return console.error(`[Raid] Error for user ${e} responding to invite ${N}:`,P),{success:!1,error:P.message}}},[e,L,y]),V=g.useCallback(async()=>{if(!(!e||!n)){console.log(`[Raid] User ${e} is leaving room ${n.room_uuid}`);try{await E.from("raid_participants").delete().eq("profile_id",e).eq("room_id",n.id),y==null||y.send({type:"broadcast",event:"user-action",payload:{message:`User ${e} left the room.`}});const{data:N}=await E.from("raid_participants").select("id").eq("room_id",n.id);N&&N.length===0&&(console.log(`[Raid] Room ${n.room_uuid} is empty, deleting.`),await E.from("raid_rooms").delete().eq("id",n.id))}catch(N){console.error(`[Raid] Error leaving room for user ${e}:`,N)}}},[e,n,y]),H=g.useCallback(async N=>{console.log(`[Raid] Starting raid for room ${N}`);try{const{error:j}=await E.from("raid_rooms").update({status:"in_progress",current_round:1,current_turn:0,boss_hp:150,boss_max_hp:150}).eq("room_uuid",N);if(j)throw j;return console.log(`[Raid] Successfully started raid for room ${N}`),y==null||y.send({type:"broadcast",event:"user-action",payload:{message:"Raid started! Round 1 begins!"}}),!0}catch(j){return console.error("[Raid] Error starting raid:",j),!1}},[y]),te=g.useCallback(async(N,j)=>{if(!e)return!1;try{const{error:P}=await E.from("raid_chat").insert({room_id:N,profile_id:e,message:j});if(P)throw P;return!0}catch(P){return console.error("Error sending chat message:",P),!1}},[e]),Z=g.useCallback(async()=>{if(!e||!n)return!1;console.log(`[Raid Room: ${n.room_uuid}] User ${e} is marking rewards as claimed.`);try{const{error:N}=await E.from("raid_participants").update({claimed_rewards_at:new Date().toISOString()}).eq("room_id",n.id).eq("profile_id",e);if(N)throw N;return console.log(`[Raid Room: ${n.room_uuid}] User ${e} successfully marked rewards as claimed.`),y==null||y.send({type:"broadcast",event:"user-action",payload:{message:`User ${e} has claimed their rewards.`}}),!0}catch(N){return console.error(`[Raid Room: ${n.room_uuid}] Error marking rewards for user ${e}:`,N),!1}},[e,n,y]);return{raidMaps:t,currentRoom:n,participants:a,raidInvites:l,chatMessages:u,loading:h,getTotalCompletions:C,createRoom:R,sendInvite:T,respondToInvite:U,startRaid:H,sendChatMessage:te,loadRaidData:A,loadRoomData:L,loadInvites:_,setCurrentRoom:r,leaveRoom:V,markRewardsAsClaimed:Z}}function A4({invite:e,onAccept:t,onReject:s,onTimeout:n,onNavigateToRoom:r}){const[a,o]=g.useState(0);return g.useEffect(()=>{if(!e)return;const l=()=>{const u=new Date().getTime(),d=new Date(e.expires_at).getTime();return Math.max(0,Math.floor((d-u)/1e3))};o(l());const c=setInterval(()=>{const u=l();o(u),u<=0&&(clearInterval(c),n())},1e3);return()=>clearInterval(c)},[e,n]),e?i.jsx(De,{children:i.jsx(W.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:"fixed top-4 right-4 z-[60]",children:i.jsxs("div",{className:"rpg-card-accent max-w-sm border-2 border-red-500 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zt,{className:"w-5 h-5 text-red-400"}),i.jsx("span",{className:"font-semibold text-white",children:"RAID Invite"})]}),i.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[i.jsx(bn,{className:"w-4 h-4"}),i.jsxs("span",{className:"text-sm font-bold",children:[a,"s"]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"rpg-card-light p-3 mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(We,{className:"w-4 h-4 text-yellow-500"}),i.jsx("span",{className:"font-bold text-white",children:e.inviter_username})]}),i.jsx("div",{className:"text-sm text-gray-300",children:"invites you to join"}),i.jsx("div",{className:"font-bold text-red-400 mt-1",children:e.map_name})]}),i.jsx("div",{className:"text-center",children:i.jsxs("p",{className:"text-gray-300 text-sm",children:["Room: ",i.jsx("span",{className:"font-mono text-purple-400",children:e.room_uuid})]})})]}),i.jsxs("div",{className:"flex gap-3 mb-3",children:[i.jsxs("button",{onClick:()=>{t(e.id),r&&r(e.room_uuid)},className:"btn-success flex-1 btn-sm",children:[i.jsx(_d,{className:"w-4 h-4 mr-1"}),"Accept"]}),i.jsxs("button",{onClick:()=>s(e.id),className:"btn-danger flex-1 btn-sm",children:[i.jsx(et,{className:"w-4 h-4 mr-1"}),"Reject"]})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:i.jsx(W.div,{className:"bg-red-400 h-1 rounded-full",initial:{width:"100%"},animate:{width:`${a/120*100}%`},transition:{duration:.1}})})]})})}):null}function L4({isOpen:e,onClose:t,profile:s,onProfileUpdate:n}){const r=Ge();g.useState(null);const[a,o]=g.useState("maps"),[l,c]=g.useState(null),[u,d]=g.useState(""),[h,f]=g.useState(""),[p,w]=g.useState(null),{raidMaps:y,currentRoom:b,participants:m,raidInvites:x,chatMessages:v,loading:_,getTotalCompletions:k,createRoom:S,sendInvite:A,respondToInvite:C,startRaid:L,sendChatMessage:R,loadRaidData:D,loadRoomData:T,loadInvites:U,setCurrentRoom:V,leaveRoom:H}=ev((s==null?void 0:s.id)||null);g.useEffect(()=>{e&&s&&(D(),U())},[e,s]),g.useEffect(()=>{l&&T(l)},[l]),g.useEffect(()=>{(b==null?void 0:b.status)==="in_progress"&&b.room_uuid&&(console.log(`[RaidModal] Room status is 'in_progress'. Navigating all players to /raid/${b.room_uuid}`),setTimeout(()=>{r(`/raid/${b.room_uuid}`)},500))},[b==null?void 0:b.status,b==null?void 0:b.room_uuid,r]),g.useEffect(()=>{x.length>0&&!p&&w(x[0])},[x,p]);const te=async z=>{const G=await S(z);G.success&&G.room_uuid&&(c(G.room_uuid),o("room"),n())},Z=async()=>{if(!l||!u.trim())return;await A(l,u.trim())&&d("")},N=async z=>{const G=await C(z,"accepted");G.success&&G.room_uuid&&(c(G.room_uuid),o("room"),n(),w(null))},j=async z=>{await C(z,"rejected"),w(null)},P=async()=>{l&&await L(l)},O=async()=>{if(!b||!h.trim())return;await R(b.id,h.trim())&&f("")};return e?i.jsxs(De,{children:[i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rpg-card w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Zt,{className:"w-8 h-8 text-red-500"}),i.jsx("h2",{className:"text-3xl font-bold text-white",children:"RAID MODE"}),i.jsxs("div",{className:"flex items-center gap-2 bg-red-900/30 px-3 py-1 rounded-lg border border-red-500/30",children:[i.jsx(We,{className:"w-5 h-5 text-red-400"}),i.jsxs("span",{className:"font-semibold text-red-300",children:[(s==null?void 0:s.raid_tickets)||0,"/5"]})]})]}),i.jsx("button",{onClick:t,className:"btn-secondary btn-sm",children:i.jsx(et,{className:"w-4 h-4"})})]}),a==="maps"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-white mb-6 text-center",children:"Select Raid Map"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:y.map(z=>i.jsx(W.div,{className:"rpg-card-accent cursor-pointer hover:shadow-lg transition-all",onClick:()=>te(z.id),whileHover:{scale:1.02},whileTap:{scale:.98},children:i.jsxs("div",{className:"text-center",children:[i.jsx("img",{src:z.background_url,alt:z.name,className:"w-full h-32 object-cover rounded-lg mb-4 border-2 border-gray-600"}),i.jsx("h4",{className:"text-xl font-bold text-white mb-2",children:z.name}),i.jsx("p",{className:"text-gray-300 text-sm mb-3",children:z.description}),i.jsxs("div",{className:"rpg-card-light p-3 mb-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-gray-300",children:"Boss:"}),i.jsx("span",{className:"font-bold text-red-400",children:z.boss_name})]}),i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-gray-300",children:"Difficulty:"}),i.jsx("span",{className:`font-bold ${ka.getDifficultyColor(z.difficulty_level)}`,children:ka.getDifficultyName(z.difficulty_level)})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"Rewards:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"w-4 h-4 text-yellow-500"}),i.jsxs("span",{className:"font-bold",children:[z.base_reward_exp," EXP"]})]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600/30",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-gray-300 text-sm",children:"Master Progress:"}),i.jsxs("span",{className:"text-yellow-400 font-bold text-sm",children:[k(z.id),"/50"]})]}),i.jsx("div",{className:"progress-modern",children:i.jsx("div",{className:"progress-fill bg-gradient-to-r from-yellow-400 to-yellow-600",style:{width:`${Math.min(k(z.id)/50*100,100)}%`}})}),k(z.id)>=50&&i.jsx("div",{className:"mt-2 text-center",children:i.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-600 text-gray-900 px-3 py-1 rounded-lg font-bold text-sm",children:"Master Title Unlocked!"})})]})]}),i.jsx("button",{disabled:!s||s.raid_tickets<1,className:"btn-danger w-full",children:!s||s.raid_tickets<1?"Need 1 Ticket":"Create Room"})]})},z.id))})]}),a==="room"&&b&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-white",children:b.raid_maps.name}),i.jsxs("p",{className:"text-gray-300",children:["Room: ",b.room_uuid]})]}),i.jsx("button",{onClick:()=>{H(),o("maps"),c(null),V(null)},className:"btn-secondary",children:"Leave Room"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"rpg-card-light",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h4",{className:"text-xl font-bold text-white flex items-center",children:[i.jsx(Bt,{className:"w-5 h-5 mr-2"}),"Team (",m.length,"/",b.max_players,")"]}),i.jsx("button",{onClick:()=>T(b.room_uuid),disabled:_,className:"btn-secondary btn-sm p-2",children:i.jsx(bx,{className:`w-4 h-4 ${_?"animate-spin":""}`})})]}),i.jsx("div",{className:"space-y-3 mb-4",children:[1,2,3].map(z=>{const G=m.find(ae=>ae.slot_number===z);return i.jsx("div",{className:`p-4 rounded-lg border-2 ${G?"bg-green-900/30 border-green-500/50":"bg-gray-700/30 border-gray-600/50 border-dashed"}`,children:G?i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:G.profiles.profile_image_url,alt:G.profiles.username,className:"w-12 h-12 rounded-full object-cover border-2 border-green-400"}),i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 text-white text-xs font-semibold px-1 rounded-full",children:G.profiles.level})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-bold text-white",children:G.profiles.username}),i.jsxs("div",{className:"text-sm text-gray-300 capitalize",children:[G.profiles.character_type," • Level ",G.profiles.level]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(fr,{className:"w-4 h-4 text-blue-400"}),i.jsxs("span",{className:"text-sm",children:[G.current_hp,"/",G.max_hp," HP"]}),i.jsx(Ri,{className:"w-4 h-4 text-orange-400"}),i.jsxs("span",{className:"text-sm",children:[G.profiles.strength," STR"]})]})]}),G.profile_id===b.creator_id&&i.jsx(We,{className:"w-5 h-5 text-yellow-500","aria-label":"Room Creator"})]}):i.jsxs("div",{className:"text-center py-4",children:[i.jsx(Bt,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),i.jsx("p",{className:"text-gray-400",children:"Waiting for player..."})]})},z)})}),b.status==="waiting"&&m.length<b.max_players&&i.jsxs("div",{className:"rpg-card-accent p-4",children:[i.jsx("h5",{className:"font-bold text-white mb-3",children:"Invite Friends"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:u,onChange:z=>d(z.target.value),placeholder:"Enter username...",className:"input-modern flex-1 text-sm",onKeyPress:z=>z.key==="Enter"&&Z()}),i.jsx("button",{onClick:Z,disabled:!u.trim(),className:"btn-success btn-sm",children:i.jsx(kd,{className:"w-4 h-4"})})]})]}),b.creator_id===(s==null?void 0:s.id)&&b.status==="waiting"&&i.jsxs("button",{onClick:P,disabled:m.length<2,className:"btn-danger w-full btn-lg mt-4 rpg-glow",children:[i.jsx(Zt,{className:"w-5 h-5 mr-2"}),m.length<2?"Need 2+ Players":"START BATTLE"]}),b.creator_id!==(s==null?void 0:s.id)&&b.status==="waiting"&&m.length>=2&&i.jsxs("button",{onClick:P,className:"btn-success w-full btn-lg mt-4 rpg-glow",children:[i.jsx(Zt,{className:"w-5 h-5 mr-2"}),"JOIN BATTLE"]}),b.status==="in_progress"&&i.jsxs("div",{className:"rpg-card-accent p-4 mt-4 text-center",children:[i.jsx(Zt,{className:"w-6 h-6 mx-auto mb-2 text-red-500 animate-pulse"}),i.jsx("p",{className:"text-white font-semibold",children:"Battle Starting!"}),i.jsx("p",{className:"text-gray-300 text-sm",children:"Entering battlefield..."})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"rpg-card-light",children:[i.jsx("h4",{className:"text-xl font-bold text-white mb-4",children:"Map Details"}),i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("img",{src:b.raid_maps.background_url,alt:b.raid_maps.name,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-600 mb-3"}),i.jsx("h5",{className:"text-lg font-bold text-white",children:b.raid_maps.name}),i.jsx("p",{className:"text-gray-300 text-sm",children:b.raid_maps.description})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"Final Boss:"}),i.jsx("span",{className:"font-bold text-red-400",children:b.raid_maps.boss_name})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"Difficulty:"}),i.jsx("span",{className:`font-bold ${ka.getDifficultyColor(b.raid_maps.difficulty_level)}`,children:ka.getDifficultyName(b.raid_maps.difficulty_level)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"Base Rewards:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"w-4 h-4 text-yellow-500"}),i.jsxs("span",{className:"font-bold",children:[b.raid_maps.base_reward_exp," EXP"]})]})]})]})]}),i.jsxs("div",{className:"rpg-card-light",children:[i.jsx("h4",{className:"text-lg font-bold text-white mb-4",children:"Room Chat"}),i.jsx("div",{className:"bg-gray-800/50 rounded-lg p-3 h-40 overflow-y-auto mb-3",children:v.length>0?i.jsx("div",{className:"space-y-2",children:v.map(z=>i.jsxs("div",{className:"text-sm",children:[i.jsxs("span",{className:"font-semibold text-purple-400",children:[z.username,":"]}),i.jsx("span",{className:"text-white ml-2",children:z.message})]},z.id))}):i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-gray-400",children:"No messages yet..."})})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:h,onChange:z=>f(z.target.value),placeholder:"Type a message...",className:"input-modern flex-1 text-sm",maxLength:100,onKeyPress:z=>z.key==="Enter"&&O()}),i.jsx("button",{onClick:O,disabled:!h.trim(),className:"btn-primary btn-sm",children:i.jsx(jx,{className:"w-4 h-4"})})]})]})]})]})]}),i.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:i.jsxs("div",{className:"rpg-card-accent p-4",children:[i.jsxs("h4",{className:"font-semibold text-white mb-2 flex items-center",children:[i.jsx(qe,{className:"w-4 h-4 mr-2 text-yellow-400"}),"RAID Rules"]}),i.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[i.jsx("p",{children:"• 2-3 players cooperative mode"}),i.jsx("p",{children:"• 1 Raid Ticket required per session"}),i.jsx("p",{children:"• 3 rounds with progressive difficulty"}),i.jsx("p",{children:"• Turn-based team combat system"}),i.jsx("p",{children:"• Mini-game card rewards on victory"}),i.jsx("p",{children:"• Master titles for 50 completions"})]})]})})]})}),p&&i.jsx(A4,{invite:p,onAccept:()=>N(p.id),onReject:()=>j(p.id),onTimeout:()=>w(null),onNavigateToRoom:z=>{c(z),o("room"),w(null)}})]}):null}function tv(e){const[t,s]=g.useState([]),[n,r]=g.useState([]),[a,o]=g.useState(!1),l=async()=>{if(e)try{o(!0);const{data:w,error:y}=await E.rpc("get_friend_list",{p_player_profile_id:e});if(y)throw y;s(w||[])}catch(w){console.error("Error loading friends:",w),M.error("Failed to load friends")}finally{o(!1)}},c=async()=>{if(e)try{const{data:w,error:y}=await E.from("friendships").select(`
          id,
          requester_id,
          created_at,
          profiles!friendships_requester_id_fkey (
            username,
            profile_image_url,
            character_type,
            level
          )
        `).eq("addressee_id",e).eq("status","pending").order("created_at",{ascending:!1});if(y)throw y;const b=(w||[]).map(m=>{var x,v,_,k;return{id:m.id,requester_id:m.requester_id,requester_username:((x=m.profiles)==null?void 0:x.username)||"Unknown",requester_profile_image_url:((v=m.profiles)==null?void 0:v.profile_image_url)||"",requester_character_type:((_=m.profiles)==null?void 0:_.character_type)||"male",requester_level:((k=m.profiles)==null?void 0:k.level)||1,created_at:m.created_at}});r(b)}catch(w){console.error("Error loading friend requests:",w),M.error("Failed to load friend requests")}},u=async w=>{if(!e)return!1;try{o(!0);const{data:y,error:b}=await E.rpc("send_friend_request",{p_requester_profile_id:e,p_target_username:w});if(b)throw b;return y.success?(M.success(y.message),!0):(M.error(y.message),!1)}catch(y){return console.error("Error sending friend request:",y),M.error("Failed to send friend request"),!1}finally{o(!1)}},d=async(w,y)=>{if(!e)return!1;try{o(!0);const{data:b,error:m}=await E.rpc("respond_to_friend_request",{p_addressee_profile_id:e,p_friendship_id:w,p_response:y});if(m)throw m;return b.success?(M.success(b.message),await c(),y==="accepted"&&await l(),!0):(M.error(b.message),!1)}catch(b){return console.error("Error responding to friend request:",b),M.error("Failed to respond to friend request"),!1}finally{o(!1)}},h=async w=>{if(!e)return!1;try{o(!0);const{data:y,error:b}=await E.rpc("send_clover",{p_sender_profile_id:e,p_receiver_profile_id:w});if(b)throw b;return y.success?(M.success(y.message),await l(),!0):(M.error(y.message),!1)}catch(y){return console.error("Error sending clover:",y),M.error("Failed to send clover"),!1}finally{o(!1)}},f=async w=>{if(!e||!w.trim())return[];try{const{data:y,error:b}=await E.rpc("search_users_for_friends",{p_searcher_profile_id:e,p_search_term:w.trim()});if(b)throw b;return y||[]}catch(y){return console.error("Error searching users:",y),M.error("Failed to search users"),[]}},p=async(w="general")=>{if(e)try{const{error:y}=await E.rpc("update_user_activity",{p_profile_id:e,p_activity_type:w});if(y)throw y}catch(y){console.error("Error updating user activity:",y)}};return g.useEffect(()=>{if(e){l(),c(),p(e);const w=setInterval(()=>{p(e)},2*60*1e3);return()=>clearInterval(w)}},[e]),{friends:t,friendRequests:n,loading:a,loadFriends:l,loadFriendRequests:c,sendFriendRequest:u,respondToFriendRequest:d,sendClover:h,searchUsers:f,updateUserActivity:p,getUserProfileById:w=>M4(w),unfriendUser:(w,y)=>sv(w,y)}}async function M4(e){try{const{data:t,error:s}=await E.rpc("get_user_profile_by_id",{p_profile_id:e});if(s)throw s;return t}catch(t){throw console.error("Error getting user profile:",t),t}}async function sv(e,t){try{const{data:s,error:n}=await E.rpc("unfriend_user",{p_current_user_id:e,p_friend_id:t});if(n)throw n;return s}catch(s){throw console.error("Error unfriending user:",s),s}}function D4({friendId:e,username:t,profileImageUrl:s,characterType:n,level:r,canSendClover:a,isOnline:o,lastSeen:l,onSendClover:c,onViewProfile:u,onUnfriend:d}){const{title:h}=Qi(e),f=p=>{const w=new Date(p),b=Math.floor((new Date().getTime()-w.getTime())/(1e3*60));return b<1?"Just now":b<60?`${b}m ago`:b<1440?`${Math.floor(b/60)}h ago`:`${Math.floor(b/1440)}d ago`};return i.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border transition-all duration-200 ${o?"bg-green-900/20 border-green-500/30 shadow-md shadow-green-500/10":"bg-gray-700/30 border-gray-600/30 opacity-75"}`,onClick:()=>u(e),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:s,alt:t,className:`w-12 h-12 rounded-full object-cover border-2 transition-all ${o?"border-green-400 shadow-md shadow-green-400/30":"border-gray-600"}`}),i.jsx("div",{className:`absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-gray-800 ${o?"bg-green-400":"bg-gray-500"}`}),i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 text-white text-xs font-semibold px-1 rounded-full",children:r})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:`font-semibold ${o?"text-white":"text-gray-400"}`,children:t}),h&&i.jsx(Vt,{title:h,size:"small",showIcon:!0})]}),i.jsxs("div",{className:`text-xs capitalize ${o?"text-gray-300":"text-gray-500"}`,children:[n," • Level ",r," • ",o?"Online":f(l)]})]})]}),i.jsx("div",{className:"flex gap-2",children:i.jsx("button",{onClick:p=>{p.stopPropagation(),c(e)},disabled:!a,className:`p-2 rounded-lg transition-all ${a?o?"bg-green-600 hover:bg-green-700 text-white shadow-md":"bg-green-700 hover:bg-green-800 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,title:a?"Send Clover":"Already sent today",children:i.jsx("img",{src:I.CLOVER,alt:"Clover",className:"w-5 h-5"})})})]})}function $4({request:e,onAccept:t,onReject:s}){const{title:n}=Qi(e.requester_id);return i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg border border-gray-600/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:e.requester_profile_image_url,alt:e.requester_username,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-600"}),i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 text-white text-xs font-semibold px-1 rounded-full",children:e.requester_level})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"font-semibold text-white",children:e.requester_username}),n&&i.jsx(Vt,{title:n,size:"small",showIcon:!0})]}),i.jsxs("div",{className:"text-xs text-gray-400 capitalize",children:[e.requester_character_type," • Level ",e.requester_level]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>t(e.id),className:"btn-success btn-sm",children:i.jsx(_d,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>s(e.id),className:"btn-danger btn-sm",children:i.jsx(et,{className:"w-4 h-4"})})]})]})}function O4({isOpen:e,onClose:t,profile:s,onProfileUpdate:n}){const[r,a]=g.useState("friends"),[o,l]=g.useState(""),[c,u]=g.useState([]),[d,h]=g.useState(!1),[f,p]=g.useState(null),[w,y]=g.useState(!1),[b,m]=g.useState(!1),{friends:x,friendRequests:v,loading:_,loadFriends:k,loadFriendRequests:S,sendFriendRequest:A,respondToFriendRequest:C,sendClover:L,searchUsers:R}=tv((s==null?void 0:s.id)||null);g.useEffect(()=>{e&&s&&(k(),S())},[e,s]);const D=async()=>{if(o.trim()){h(!0);try{const N=await R(o);u(N)}catch(N){console.error("Search error:",N)}finally{h(!1)}}},T=async N=>{await A(N)&&D()},U=async N=>{await C(N,"accepted")&&n()},V=async N=>{await C(N,"rejected")},H=async N=>{await L(N)&&n()},te=async N=>{m(!0);try{const{data:j,error:P}=await E.rpc("get_user_profile_by_id",{p_profile_id:N});if(P){console.error("Error loading profile:",P),M.error("Failed to load profile");return}j&&j.length>0?(p(j[0]),y(!0)):M.error("Profile not found")}catch(j){console.error("Error loading profile:",j),M.error("Failed to load profile")}finally{m(!1)}},Z=async N=>{if(!(!s||!window.confirm("Are you sure you want to remove this friend?")))try{const P=await sv(s.id,N);P.success?(M.success(P.message),await k(),n()):M.error(P.message)}catch(P){console.error("Error unfriending user:",P),M.error("Failed to unfriend user")}};return e?i.jsxs(De,{children:[i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rpg-card w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Bt,{className:"w-6 h-6 text-purple-400"}),i.jsx("h2",{className:"text-2xl font-bold text-white",children:"TEMAN"})]}),i.jsx("button",{onClick:t,className:"btn-secondary btn-sm",children:i.jsx(et,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex gap-2 mb-6",children:[i.jsxs("button",{onClick:()=>a("friends"),className:`px-4 py-2 rounded-lg font-medium transition-all ${r==="friends"?"bg-purple-600 text-white":"bg-gray-700/50 text-gray-300 hover:bg-gray-600/50"}`,children:[i.jsx(Bt,{className:"w-4 h-4 inline mr-2"}),"(",x.length,")"]}),i.jsx("button",{onClick:()=>a("search"),className:`px-4 py-2 rounded-lg font-medium transition-all ${r==="search"?"bg-purple-600 text-white":"bg-gray-700/50 text-gray-300 hover:bg-gray-600/50"}`,children:i.jsx(Br,{className:"w-4 h-4 inline mr-2"})}),i.jsxs("button",{onClick:()=>a("requests"),className:`px-4 py-2 rounded-lg font-medium transition-all relative ${r==="requests"?"bg-purple-600 text-white":"bg-gray-700/50 text-gray-300 hover:bg-gray-600/50"}`,children:[i.jsx(Ml,{className:"w-4 h-4 inline mr-2"}),v.length>0&&i.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:v.length})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-green-900/30 px-3 py-1 rounded-lg border border-green-500/30",children:[i.jsx("img",{src:I.CLOVER,alt:"Clover",className:"w-5 h-5"}),i.jsx("span",{className:"font-semibold text-green-300",children:s.clover})]})]}),i.jsxs("div",{className:"min-h-[400px]",children:[r==="friends"&&i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[i.jsx(Nd,{className:"w-5 h-5 mr-2 text-red-400"}),"Your Friends (",x.length,")"]}),_?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-400",children:"Loading friends..."})]}):x.length>0?i.jsx("div",{className:"space-y-3",children:x.map(N=>i.jsx(D4,{friendId:N.friend_id,username:N.friend_username,profileImageUrl:N.friend_profile_image_url,characterType:N.friend_character_type,level:N.friend_level,canSendClover:N.can_send_clover,isOnline:N.is_online,lastSeen:N.last_seen,onSendClover:H,onViewProfile:te,onUnfriend:Z},N.friend_id))}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Bt,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium text-white mb-2",children:"No friends yet"}),i.jsx("p",{className:"text-gray-400",children:"Search for players to add as friends!"})]}),x.length>0&&i.jsx("div",{className:"mt-4 p-3 bg-gray-800/50 rounded-lg border border-gray-600/30",children:i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-300",children:"Status:"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("span",{className:"text-green-400",children:["🟢 ",x.filter(N=>N.is_online).length," Online"]}),i.jsxs("span",{className:"text-gray-500",children:["⚫ ",x.filter(N=>!N.is_online).length," Offline"]})]})]})})]}),r==="search"&&i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[i.jsx(Br,{className:"w-5 h-5 mr-2 text-blue-400"}),"Find Friends"]}),i.jsxs("div",{className:"flex gap-2 mb-6",children:[i.jsx("input",{type:"text",value:o,onChange:N=>l(N.target.value),placeholder:"Search by username or UUID...",className:"input-modern flex-1",onKeyPress:N=>N.key==="Enter"&&D()}),i.jsx("button",{onClick:D,disabled:d||!o.trim(),className:"btn-primary",children:d?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):i.jsx(Br,{className:"w-4 h-4"})})]}),c.length>0?i.jsx("div",{className:"space-y-3",children:c.map(N=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg border border-gray-600/50 cursor-pointer hover:bg-gray-600/50 transition-all",onClick:()=>te(N.user_id),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:N.profile_image_url,alt:N.username,className:"w-12 h-12 rounded-full object-cover border-2 border-gray-600"}),i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 text-white text-xs font-semibold px-1 rounded-full",children:N.level})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-white",children:N.username}),i.jsxs("div",{className:"text-xs text-gray-400 capitalize",children:[N.character_type," • Level ",N.level]})]})]}),i.jsxs("div",{children:[N.friendship_status==="none"&&i.jsx("button",{onClick:j=>{j.stopPropagation(),T(N.username)},className:"btn-success btn-sm",children:i.jsx(kd,{className:"w-4 h-4 mr-1"})}),N.friendship_status==="accepted"&&i.jsx("button",{onClick:j=>{j.stopPropagation(),Z(N.user_id)},className:"btn-danger btn-sm",children:i.jsx(et,{className:"w-4 h-4 mr-1"})}),(N.friendship_status==="pending"||N.friendship_status==="rejected")&&i.jsx("div",{className:"badge badge-warning",children:"Pending"})]})]},N.user_id))}):o&&!d?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Br,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),i.jsx("p",{className:"text-gray-400",children:"No users found"})]}):null]}),r==="requests"&&i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[i.jsx(Ml,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Friend Requests (",v.length,")"]}),_?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-400",children:"Loading requests..."})]}):v.length>0?i.jsx("div",{className:"space-y-3",children:v.map(N=>i.jsx($4,{request:N,onAccept:U,onReject:V},N.id))}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ml,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsx("p",{className:"text-lg font-medium text-white mb-2",children:"No friend requests"}),i.jsx("p",{className:"text-gray-400",children:"You'll see incoming friend requests here"})]})]})]}),i.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:i.jsxs("div",{className:"rpg-card-accent p-3",children:[i.jsxs("h4",{className:"font-semibold text-white mb-2 flex items-center",children:[i.jsx(qe,{className:"w-4 h-4 mr-2 text-yellow-400"}),"Clover System"]}),i.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[i.jsx("p",{children:"• Kirim 🍀 ke teman sekali per hari"}),i.jsx("p",{children:"• Gunakan 🍀 di Toko 🍀 khusus"}),i.jsx("p",{children:"• 🟢 Hijau = Teman online"}),i.jsx("p",{children:"• ⚫ Abu-abu = Teman offline"})]})]})})]})}),i.jsx(oh,{isOpen:w,onClose:()=>y(!1),profile:f,loading:b})]}):null}function I4({request:e,onAccept:t,onReject:s,onTimeout:n}){const[r,a]=g.useState(10),{title:o}=Qi((e==null?void 0:e.requester_id)||null);return g.useEffect(()=>{if(!e)return;a(10);const l=setInterval(()=>{a(c=>c<=1?(clearInterval(l),n(),0):c-1)},1e3);return()=>clearInterval(l)},[e,n]),e?i.jsx(De,{children:i.jsx(W.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 right-4 z-50",children:i.jsxs("div",{className:"rpg-card-accent max-w-sm border-2 border-purple-500 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Bt,{className:"w-5 h-5 text-purple-400"}),i.jsx("span",{className:"font-semibold text-white",children:"Friend Request"})]}),i.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[i.jsx(bn,{className:"w-4 h-4"}),i.jsxs("span",{className:"text-sm font-bold",children:[r,"s"]})]})]}),i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:e.requester_profile_image_url,alt:e.requester_username,className:"w-12 h-12 rounded-full object-cover border-2 border-purple-400"}),i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 text-white text-xs font-semibold px-1 rounded-full",children:e.requester_level})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"font-semibold text-white",children:e.requester_username}),o&&i.jsx(Vt,{title:o,size:"small",showIcon:!0})]}),i.jsxs("div",{className:"text-xs text-gray-300 capitalize",children:[e.requester_character_type," • Level ",e.requester_level]})]})]}),i.jsx("p",{className:"text-center text-gray-300 mb-4",children:"wants to be your friend!"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>t(e.id),className:"btn-success flex-1 btn-sm",children:[i.jsx(_d,{className:"w-4 h-4 mr-1"}),"Accept"]}),i.jsxs("button",{onClick:()=>s(e.id),className:"btn-danger flex-1 btn-sm",children:[i.jsx(et,{className:"w-4 h-4 mr-1"}),"Reject"]})]}),i.jsx("div",{className:"mt-3",children:i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:i.jsx(W.div,{className:"bg-yellow-400 h-1 rounded-full",initial:{width:"100%"},animate:{width:`${r/10*100}%`},transition:{duration:.1}})})})]})})}):null}function z4(){const[e,t]=g.useState(null),[s,n]=g.useState(!1),[r,a]=g.useState(!1),[o,l]=g.useState(!1),[c,u]=g.useState(!1),[d,h]=g.useState(!1);g.useState(!1);const[f,p]=g.useState(!1),[w,y]=g.useState(!1),[b,m]=g.useState(!1);g.useState(null);const[x,v]=g.useState(""),[_,k]=g.useState(null);g.useState(!1);const[S,A]=g.useState(!1),[C,L]=g.useState(null),{equippedCostume:R}=xs((e==null?void 0:e.id)||null),{friends:D,friendRequests:T,respondToFriendRequest:U,updateUserActivity:V}=tv((e==null?void 0:e.id)||null),H=Ge(),te=[{name:"Adventure",image:"https://pomf2.lain.la/f/qgi7zos.png",path:"/adventure",color:"from-red-400 to-red-600"},{name:"RAID",image:"https://i.pinimg.com/736x/d4/5e/6f/d45e6f7g8h9i0j1k2l3m4n5o6p7q8r9s.jpg",color:"from-red-500 to-red-700",action:()=>{u(!1),setTimeout(()=>{m(!0)},150)}},{name:"Dungeon",image:"https://i.pinimg.com/736x/81/c9/76/81c976d54a8c3f67cf606465dba75c24.jpg",color:"from-purple-400 to-purple-600",action:()=>{u(!1),setTimeout(()=>{p(!0)},150)}},{name:"Fishing",image:"https://pomf2.lain.la/f/wl60b1iv.png",path:"/fishing",color:"from-blue-400 to-blue-600"},{name:"Farming",image:"https://pomf2.lain.la/f/gq7oi9dj.png",path:"/farming",color:"from-green-400 to-green-600"},{name:"Building",image:"https://pomf2.lain.la/f/yvzzev23.png",comingSoon:!0,color:"from-yellow-400 to-yellow-600"},{name:"Trading",image:"https://pomf2.lain.la/f/5bshu1x1.png",comingSoon:!0,color:"from-purple-400 to-purple-600"},{name:"Mining",image:"https://pomf2.lain.la/f/h53dcc8z.png",comingSoon:!0,color:"from-orange-400 to-orange-600"},{name:"Hunting",image:"https://pomf2.lain.la/f/76tj5lxa.png",comingSoon:!0,color:"from-pink-400 to-pink-600"}],Z=()=>{e!=null&&e.id&&V(e.id,"interaction")};g.useEffect(()=>{O(),T.length>0&&!C&&L(T[0])},[]),g.useEffect(()=>{T.length>0&&!C&&L(T[0])},[T,C]);const N=async K=>{await U(K,"accepted"),L(null),await O()},j=async K=>{await U(K,"rejected"),L(null)},P=()=>{L(null)},O=async()=>{try{const{data:{user:K}}=await E.auth.getUser();if(!K){H("/login");return}const{data:we,error:he}=await E.from("profiles").select("*").eq("user_id",K.id).single();if(he)throw he;t(we)}catch{M.error("Failed to load profile")}},z=async()=>{if(e)try{const{data:K,error:we}=await E.from("redeem_codes").select("*").eq("code",x.trim()).eq("is_active",!0).single();if(we||!K){M.error("Invalid or inactive code");return}const{data:he,error:pe}=await E.from("claimed_codes").select("*").eq("user_id",e.user_id).eq("code_id",K.id).maybeSingle();if(he){M.error("Code already used");return}const{error:_t}=await E.from("profiles").update({zgold:e.zgold+K.zgold,ztoken:e.ztoken+K.ztoken,exp:e.exp+K.exp}).eq("id",e.id);if(_t)throw _t;const{error:En}=await E.from("claimed_codes").insert({user_id:e.user_id,code_id:K.id});if(En)throw En;t(Ys=>Ys?{...Ys,zgold:Ys.zgold+K.zgold,ztoken:Ys.ztoken+K.ztoken,exp:Ys.exp+K.exp}:null),k({zgold:K.zgold,ztoken:K.ztoken,exp:K.exp}),a(!1),l(!0),v(""),M.success("Code redeemed successfully!")}catch(K){console.error("Redeem error:",K),M.error("Failed to redeem code")}},G=async()=>{if(!e)return;const K=fp(e.level),we=mp(e.level),he=pp(e.level);if(e.exp<K){M.error(`Not enough EXP! Need ${K} EXP to level up`);return}if(e.zgold<we){M.error(`Not enough ZGold! Need ${we} ZGold to level up`);return}try{const{error:pe}=await E.from("profiles").update({level:e.level+1,exp:e.exp-K,zgold:e.zgold-we,strength:e.strength+he}).eq("id",e.id);if(pe)throw pe;n(!0),setTimeout(()=>n(!1),2e3),t(_t=>_t?{..._t,level:_t.level+1,exp:_t.exp-K,zgold:_t.zgold-we,strength:_t.strength+he}:null),M.success(`Level Up! Now level ${e.level+1}`)}catch{M.error("Failed to level up")}},ae=K=>{if(K.comingSoon){M.success(`${K.name} coming soon!`);return}if(K.action){K.action();return}K.path&&H(K.path)},de=async()=>{try{await E.auth.signOut(),H("/login")}catch{M.error("Failed to logout")}};if(!e)return null;const Q=fp(e.level),re=mp(e.level),Pe=e.exp/Q*100;return i.jsx("div",{className:"min-h-screen rpg-bg",children:i.jsxs("div",{className:"min-h-screen pb-20 px-4",children:[i.jsxs("div",{className:"pt-6 pb-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:e.profile_image_url,alt:e.username,className:"avatar avatar-lg"}),i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-500 text-white text-xs font-semibold px-2 py-1 rounded-full",children:e.level})]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:e.username}),i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsxs("span",{className:"text-sm text-gray-300",children:[e.exp,"/",Q," EXP"]})}),i.jsx("div",{className:"progress-modern",children:i.jsx("div",{className:"progress-fill bg-gradient-to-r from-blue-500 to-purple-500",style:{width:`${Math.min(Pe,100)}%`}})})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{className:"btn-secondary btn-sm",onClick:()=>H("/profile"),children:i.jsx("img",{src:I.SETTING,alt:"Setting",className:"w-4 h-4"})}),i.jsx("button",{className:"btn-danger btn-sm",onClick:de,children:i.jsx(zN,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"grid grid-cols-3 lg:grid-cols-4 gap-4 mb-2",children:[i.jsx("div",{className:"rpg-card-light",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:i.jsx("p",{className:"text-xl font-semibold text-white",children:e.zgold.toLocaleString()})}),i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-8 h-8"})]})}),i.jsx("div",{className:"rpg-card-light cursor-pointer hover:shadow-md transition-shadow",onClick:()=>y(!0),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:i.jsx("p",{className:"text-xl font-semibold text-white",children:e.ztoken})}),i.jsx("img",{src:I.ZTOKEN,alt:"ZToken",className:"w-8 h-8"})]})}),i.jsx("div",{className:"rpg-card-light",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:i.jsxs("p",{className:"text-xl font-semibold text-white",children:[e.raid_tickets,"/5"]})}),i.jsx(We,{className:"w-8 h-8 text-red-500"})]})}),i.jsx("div",{className:"rpg-card-light",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:i.jsx("p",{className:"text-xl font-semibold text-white",children:e.clover})}),i.jsx("img",{src:I.CLOVER,alt:"Clover",className:"w-8 h-9"})]})})]}),i.jsxs("div",{className:"flex justify-center sm:justify-start flex-wrap gap-4 mb-4",children:[i.jsxs("button",{className:"text-center hover:shadow-md transition-shadow p-4 bg-[#2c2c2c] rounded-xl relative",onClick:()=>A(!0),children:[i.jsx("img",{src:I.FRIENDS,alt:"Friends",className:"w-8 h-8"}),T.length>0&&i.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:T.length})]}),i.jsx("button",{className:"text-center hover:shadow-md transition-shadow p-4 bg-[#2c2c2c] rounded-xl",onClick:()=>{H("/leaderboard"),Z()},children:i.jsx("img",{src:I.LB,alt:"LB",className:"w-8 h-8"})}),i.jsx("button",{className:"text-center hover:shadow-md transition-shadow p-4 bg-[#2c2c2c] rounded-xl",onClick:()=>{h(!0),Z()},children:i.jsx("img",{src:I.GLOBAL_CHAT,alt:"Global Chat",className:"w-8 h-8"})}),i.jsx("button",{className:"text-center hover:shadow-md transition-shadow p-4 bg-[#2c2c2c] rounded-xl",onClick:()=>{a(!0),Z()},children:i.jsx("img",{src:I.RCODE,alt:"Rcode",className:"w-8 h-8"})})]})]}),i.jsxs("div",{className:"flex flex-col items-center justify-center mb-8",children:[i.jsx(De,{children:s&&i.jsx(W.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:2},className:"absolute inset-0 flex items-center justify-center z-20 px-4",children:i.jsxs("div",{className:"rpg-card-accent p-8 text-center animate-pulse",children:[i.jsx(We,{className:"w-16 h-16 mx-auto mb-4 text-yellow-500"}),i.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:"Level Up!"}),i.jsxs("div",{className:"text-xl text-gray-300",children:["Level ",e.level]})]})})}),i.jsxs("div",{className:"text-center mb-6 max-w-sm",children:[i.jsx(W.img,{src:I.getCharacterImage(e.character_type,R),alt:"Character",className:"w-40 h-40 object-contain mx-auto mb-4",animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),i.jsxs("div",{className:"flex items-center justify-center text-gray-300",children:[i.jsx(Ri,{className:"w-4 h-4 mr-1"}),i.jsxs("span",{children:["Strength: ",e.strength]})]})]}),i.jsxs("button",{onClick:G,className:"flex items-center justify-center btn-primary btn-lg mb-4",children:[i.jsx(iu,{className:"w-4 h-4 mr-1"}),"(",re.toLocaleString(),i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-4 h-4"}),")"]}),i.jsxs("p",{className:"text-sm text-gray-300 text-center max-w-xs",children:["Strength +",pp(e.level)," on next level"]})]}),i.jsx(T4,{profile:e,showChat:d,setShowChat:h}),i.jsx(O4,{isOpen:S,onClose:()=>A(!1),profile:e,onProfileUpdate:O}),C&&i.jsx(I4,{request:C,onAccept:()=>N(C.id),onReject:()=>j(C.id),onTimeout:P}),i.jsx(P4,{isOpen:f,onClose:()=>p(!1),profile:e,onProfileUpdate:O}),i.jsx(R4,{isOpen:w,onClose:()=>y(!1)}),i.jsx(L4,{isOpen:b,onClose:()=>m(!1),profile:e,onProfileUpdate:O}),i.jsx("div",{className:"fixed bottom-0 left-0 right-0 nav-modern p-4",children:i.jsxs("div",{className:"flex justify-between max-w-md mx-auto",children:[i.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-700/50 transition-colors",onClick:()=>H("/inventory"),children:[i.jsx("img",{src:I.INVENTORY,alt:"Inventory",className:"w-8 h-8"}),i.jsx("span",{className:"text-xs text-gray-300 mt-1",children:"Inventory"})]}),i.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-700/50 transition-colors",onClick:()=>H("/shop"),children:[i.jsx("img",{src:I.SHOP,alt:"Shop",className:"w-8 h-8"}),i.jsx("span",{className:"text-xs text-gray-300 mt-1",children:"Shop"})]}),i.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-700/50 transition-colors",onClick:()=>u(!0),children:[i.jsx("img",{src:I.GAME_MODE,alt:"Game Mode",className:"w-8 h-8"}),i.jsx("span",{className:"text-xs text-gray-300 mt-1",children:"Games"})]}),i.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-700/50 transition-colors",onClick:()=>H("/battle"),children:[i.jsx("img",{src:I.BATTLE,alt:"Battle",className:"w-9 h-8"}),i.jsx("span",{className:"text-xs text-gray-300 mt-1",children:"Battle"})]})]})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 overflow-y-auto z-50",children:i.jsxs("div",{className:"rpg-card max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Game Modes"}),i.jsx("button",{onClick:()=>u(!1),className:"btn-secondary btn-sm",children:i.jsx(et,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-3 gap-2",children:te.map((K,we)=>i.jsxs(W.button,{className:`text-center p-4 hover:shadow-lg transition-all ${K.comingSoon?"opacity-50":""}`,onClick:()=>ae(K),whileHover:{scale:1.02},whileTap:{scale:.98},children:[i.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${K.color} rounded-2xl p-3 mb-3 mx-auto shadow-lg`,children:i.jsx("img",{src:K.image,alt:K.name,className:"w-full h-full object-contain"})}),i.jsx("p",{className:"font-medium text-white text-sm",children:K.name}),K.comingSoon&&i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Coming Soon"})]},we))})]})}),r&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"rpg-card max-w-md w-full mx-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"Redeem Code"}),i.jsx("button",{onClick:()=>a(!1),className:"btn-secondary btn-sm",children:i.jsx(et,{className:"w-4 h-4"})})]}),i.jsx("input",{type:"text",value:x,onChange:K=>v(K.target.value),placeholder:"Enter redeem code",className:"input-modern w-full mb-4"}),i.jsx("button",{onClick:z,className:"btn-success w-full",children:"Redeem"})]})}),o&&_&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"rpg-card max-w-md w-full mx-4 text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Congratulations!"}),i.jsxs("div",{className:"space-y-4 mb-6",children:[_.zgold>0&&i.jsxs("div",{className:"rpg-card-light flex items-center justify-center",children:[i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-8 h-8 mr-3"}),i.jsxs("span",{className:"text-xl font-semibold",children:["+",_.zgold.toLocaleString()]})]}),_.ztoken>0&&i.jsxs("div",{className:"rpg-card-light flex items-center justify-center",children:[i.jsx("img",{src:I.ZTOKEN,alt:"ZToken",className:"w-8 h-8 mr-3"}),i.jsxs("span",{className:"text-xl font-semibold",children:["+",_.ztoken]})]}),_.exp>0&&i.jsxs("div",{className:"rpg-card-light flex items-center justify-center",children:[i.jsx(qe,{className:"w-8 h-8 mr-3 text-yellow-500"}),i.jsxs("span",{className:"text-xl font-semibold",children:["+",_.exp," EXP"]})]})]}),i.jsx("button",{onClick:()=>l(!1),className:"btn-primary w-full",children:"Claim Rewards"})]})})]})})}function F4({isOpen:e,onClose:t,costume:s,isEquipped:n,onEquip:r,onUnequip:a,loading:o}){return s?i.jsx(De,{children:e&&i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rpg-card w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center",children:[i.jsx(BN,{className:"w-6 h-6 mr-2 text-purple-500"}),"Costume Details"]}),i.jsx("button",{onClick:t,className:"btn-secondary btn-sm",children:i.jsx(et,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"text-center mb-2",children:i.jsxs("div",{className:"rpg-card-accent p-4 inline-block mb-2",children:[i.jsx("img",{src:s.icon_url,alt:s.name,className:"w-10 h-10 object-contain mx-auto mb-2"}),i.jsx("h2",{className:"text-sm font-bold text-white",children:s.name})]})}),i.jsxs("div",{className:"mb-2",children:[i.jsxs("h4",{className:"text-lg font-semibold text-white text-center mb-2 flex items-center justify-center",children:[i.jsx(Bt,{className:"w-5 h-5 mr-2"}),"Character Preview"]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-6",children:[i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"rpg-card-light p-4",children:[i.jsxs("div",{className:"flex items-center justify-center mb-3",children:[i.jsx(Pi,{className:"w-5 h-5 text-purple-400 mr-2"}),i.jsx("span",{className:"font-semibold text-purple-400",children:"Male"})]}),i.jsx("div",{className:"bg-gray-900/80 border-4 border-purple-400 rounded-lg p-4 mb-3",children:i.jsx("img",{src:s.male_image_url,alt:"Male Costume",className:"w-32 h-32 mx-auto object-contain"})})]})}),i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"rpg-card-light p-4",children:[i.jsxs("div",{className:"flex items-center justify-center mb-3",children:[i.jsx(Pi,{className:"w-5 h-5 text-pink-400 mr-2"}),i.jsx("span",{className:"font-semibold text-pink-400",children:"Female"})]}),i.jsx("div",{className:"bg-gray-900/80 border-4 border-pink-400 rounded-lg p-4 mb-3",children:i.jsx("img",{src:s.female_image_url,alt:"Female Costume",className:"w-32 h-32 mx-auto object-contain"})})]})})]})]}),i.jsx("div",{className:"text-center mb-2",children:i.jsx("div",{className:`rpg-card-light p-4 inline-block ${n?"bg-green-900/30 border-green-500/30":""}`,children:i.jsxs("span",{className:`font-semibold ${n?"text-green-300":"text-white"}`,children:["Status: ",n?"Equipped":"Not Equipped"]})})}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n?i.jsx("button",{onClick:a,disabled:o,className:"btn-danger flex-1",children:o?"Unequipping...":"Unequip Costume"}):i.jsx("button",{onClick:r,disabled:o,className:"btn-success flex-1",children:o?"Equipping...":"Equip Costume"}),i.jsx("button",{onClick:t,className:"btn-secondary flex-1",children:"Close"})]})]})})}):null}function U4({isOpen:e,onClose:t,item:s,onSell:n,loading:r}){const[a,o]=ci.useState(1);if(ci.useEffect(()=>{s&&o(1)},[s]),!s)return null;const l=async()=>{a>0&&a<=s.quantity&&(await n(s.id,a),t())},c=h=>{switch(h){case"fishing":return"text-blue-400";case"farming":return"text-green-400";case"mining":return"text-orange-400";case"hunting":return"text-red-400";case"potion":return"text-purple-400";default:return"text-gray-400"}},u=h=>{switch(h){case"fishing":return"🎣";case"farming":return"🌱";case"mining":return"⛏️";case"hunting":return"🏹";case"potion":return"🧪";default:return"📦"}},d=Math.floor(gp(s.game_items.name)*a);return i.jsx(De,{children:e&&i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rpg-card w-full max-w-md max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center",children:[i.jsx(wx,{className:"w-5 h-5 mr-2 text-purple-400"}),"Item Details"]}),i.jsx("button",{onClick:t,className:"btn-secondary btn-sm",children:i.jsx(et,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"text-center mb-6",children:i.jsxs("div",{className:"rpg-card-accent p-6 mb-4",children:[i.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-4 inline-block",children:i.jsx("img",{src:s.game_items.image_url,alt:s.game_items.name,className:"w-20 h-20 object-contain mx-auto"})}),i.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:s.game_items.name}),i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[i.jsx("span",{className:"text-2xl",children:u(s.game_items.type)}),i.jsx("span",{className:`font-semibold capitalize ${c(s.game_items.type)}`,children:s.game_items.type})]}),i.jsxs("div",{className:"badge badge-primary text-lg px-4 py-2",children:["Owned: ",s.quantity]})]})}),i.jsxs("div",{className:"rpg-card-light mb-6",children:[i.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center",children:[i.jsx(yx,{className:"w-4 h-4 mr-2"}),"Item Information"]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"Type:"}),i.jsx("span",{className:`font-medium capitalize ${c(s.game_items.type)}`,children:s.game_items.type})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"Quantity:"}),i.jsx("span",{className:"font-medium text-white",children:s.quantity})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-300",children:"Sell Price (each):"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-4 h-4"}),i.jsx("span",{className:"font-medium text-white",children:gp(s.game_items.name).toLocaleString()})]})]})]})]}),i.jsxs("div",{className:"rpg-card-light mb-6",children:[i.jsxs("h4",{className:"font-semibold text-white mb-4 flex items-center",children:[i.jsx(_x,{className:"w-4 h-4 mr-2"}),"Sell Item"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Quantity to Sell"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>o(Math.max(1,a-1)),disabled:a<=1,className:"btn-secondary btn-sm w-10 h-10 flex items-center justify-center",children:"-"}),i.jsx("input",{type:"number",value:a,onChange:h=>{const f=parseInt(h.target.value)||1;o(Math.max(1,Math.min(s.quantity,f)))},min:"1",max:s.quantity,className:"input-modern text-center w-20"}),i.jsx("button",{onClick:()=>o(Math.min(s.quantity,a+1)),disabled:a>=s.quantity,className:"btn-secondary btn-sm w-10 h-10 flex items-center justify-center",children:"+"}),i.jsx("button",{onClick:()=>o(s.quantity),className:"btn-secondary btn-sm",children:"Max"})]})]}),i.jsx("div",{className:"rpg-card-accent p-4 mb-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium text-white",children:"Total Price:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-6 h-6"}),i.jsx("span",{className:"text-xl font-bold text-white",children:d.toLocaleString()})]})]})}),i.jsx("button",{onClick:l,disabled:r||a<=0,className:"btn-success w-full",children:r?"Selling...":`Sell ${a} Item${a>1?"s":""}`})]}),i.jsx("button",{onClick:t,className:"btn-secondary w-full",children:"Close"})]})})})}function gp(e){return{"Ikan Emas":4400,"Ikan Lele":2e3,"Ikan Arwana":2e3,"Ikan Nila":2e3,Umpan:400,Pancingan:3200,Apel:2e3,Anggur:2400,Semangka:2e3,Nanas:1600,Pisang:1600,"Bibit Apel":2e3,"Bibit Anggur":2400,"Bibit Semangka":2e3,"Bibit Nanas":1600,"Bibit Pisang":1600,Kayu:560,Batu:680,PickAxe:4800,Monyet:3600,Beruang:4800,Babi:4400,Burung:4800,Ayam:2e3,Panah:4e3,"Big Potion":2e3,"Small Potion":800}[e]||100}function B4(){const[e,t]=g.useState(null),[s,n]=g.useState([]),[r,a]=g.useState(null),[o,l]=g.useState(!1),[c,u]=g.useState(null),[d,h]=g.useState(!1),[f,p]=g.useState(!1),[w,y]=g.useState(!0),b=Ge(),{playerCostumes:m,equipCostume:x,unequipCostume:v,loading:_,loadCostumes:k}=xs((e==null?void 0:e.id)||null);g.useEffect(()=>{S()},[]);const S=async()=>{try{const{data:{user:T}}=await E.auth.getUser();if(!T){b("/login");return}const{data:U,error:V}=await E.from("profiles").select("id, user_id, username, zgold, ztoken").eq("user_id",T.id).single();if(V)throw V;t(U);const{data:H,error:te}=await E.from("player_inventory").select(`
          id,
          item_id,
          quantity,
          game_items (
            name,
            image_url,
            type
          )
        `).eq("profile_id",U.id);if(te)throw te;n(H)}catch{M.error("Failed to load profile and inventory")}finally{y(!1)}},A=T=>{a(T),l(!0)},C=async()=>{r&&(await x(r.costume_id),l(!1))},L=async()=>{await v(),l(!1)},R=T=>{u(T),h(!0)},D=async(T,U)=>{if(!(!e||!c)){p(!0);try{const H=V4(c.game_items.name)*U,{error:te}=await E.from("profiles").update({zgold:e.zgold+H}).eq("id",e.id);if(te)throw te;const Z=c.quantity-U;if(Z<=0){const{error:N}=await E.from("player_inventory").delete().eq("id",T);if(N)throw N}else{const{error:N}=await E.from("player_inventory").update({quantity:Z}).eq("id",T);if(N)throw N}t(N=>N?{...N,zgold:N.zgold+H}:null),await S(),M.success(`Sold ${U} ${c.game_items.name} for ${H.toLocaleString()} ZGold!`)}catch(V){console.error("Error selling item:",V),M.error("Failed to sell item")}finally{p(!1)}}};return w?i.jsx("div",{className:"min-h-screen rpg-bg flex items-center justify-center",children:i.jsxs("div",{className:"rpg-card p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),i.jsx("div",{className:"text-xl font-semibold text-white",children:"Loading Inventory..."})]})}):e?i.jsx("div",{className:"min-h-screen rpg-bg",children:i.jsxs("div",{className:"min-h-screen pb-20",children:[i.jsxs("div",{className:"sticky top-0 bg-gray-900/95 backdrop-blur-sm border-b border-gray-700/50 p-4 z-10",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("button",{onClick:()=>b("/lobby"),className:"btn-secondary",children:i.jsx(Lt,{className:"w-5 h-5 mr-2"})}),i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Inventory"}),i.jsx("div",{className:"w-20"})]}),i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsxs("div",{className:" p-4 flex items-center",children:[i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-8 h-8 mr-3"}),i.jsx("span",{className:"text-xl font-semibold",children:e.zgold.toLocaleString()})]}),i.jsxs("div",{className:" p-4 flex items-center",children:[i.jsx("img",{src:I.ZTOKEN,alt:"ZToken",className:"w-8 h-8 mr-3"}),i.jsx("span",{className:"text-xl font-semibold",children:e.ztoken})]})]})]}),i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"rpg-card",children:[i.jsxs("h2",{className:"text-xl font-semibold text-white text-center mb-6 flex items-center justify-center",children:[i.jsx(RN,{className:"w-6 h-6 mr-2 text-purple-400"}),"Your Items"]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-4",children:[m.map(T=>i.jsxs("div",{className:"inventory-item text-center cursor-pointer hover:shadow-lg transition-all",onClick:()=>A(T),children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3 relative",children:[i.jsx("img",{src:T.costumes.icon_url,alt:T.costumes.name,className:"w-12 h-12 mx-auto object-contain"}),T.is_equipped&&i.jsx("div",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-xs font-semibold px-1 py-0.5 rounded-full",children:"E"})]}),i.jsx("h3",{className:"font-medium text-xs mb-2 text-white",children:T.costumes.name}),i.jsx("div",{className:`badge text-xs ${T.is_equipped?"badge-success":"badge-primary"}`,children:T.is_equipped?"Equipped":"Costume"})]},T.id)),s.map(T=>i.jsxs("div",{className:"inventory-item text-center cursor-pointer hover:shadow-lg transition-all",onClick:()=>R(T),children:[i.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:i.jsx("img",{src:T.game_items.image_url,alt:T.game_items.name,className:"w-12 h-12 mx-auto object-contain"})}),i.jsx("h3",{className:"font-medium text-xs mb-2 text-white",children:T.game_items.name}),i.jsxs("div",{className:"badge badge-primary text-xs",children:["x",T.quantity]})]},T.id)),[...Array(Math.max(0,24-s.length-m.length))].map((T,U)=>i.jsxs("div",{className:"inventory-item text-center opacity-50",children:[i.jsx("div",{className:"bg-gray-100 rounded-lg p-3 mb-3 h-16 flex items-center justify-center",children:i.jsx(wx,{className:"w-6 h-6 text-gray-400"})}),i.jsx("span",{className:"text-xs text-gray-400",children:"Empty"})]},`empty-${U}`))]})]})}),i.jsx(F4,{isOpen:o,onClose:()=>l(!1),costume:(r==null?void 0:r.costumes)||null,isEquipped:(r==null?void 0:r.is_equipped)||!1,onEquip:C,onUnequip:L,loading:_}),i.jsx(U4,{isOpen:d,onClose:()=>h(!1),item:c,onSell:D,loading:f}),i.jsx("div",{className:"fixed bottom-0 left-0 right-0 nav-modern p-4",children:i.jsxs("div",{className:"flex justify-between max-w-md mx-auto",children:[i.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg bg-purple-900/30 text-purple-400 border border-purple-500/30",onClick:()=>b("/inventory"),children:[i.jsx("img",{src:I.INVENTORY,alt:"Inventory",className:"w-8 h-8"}),i.jsx("span",{className:"text-xs mt-1",children:"Inventory"})]}),i.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-700/50 transition-colors",onClick:()=>b("/lobby"),children:[i.jsx("img",{src:I.LOBBY,alt:"Lobby",className:"w-8 h-8"}),i.jsx("span",{className:"text-xs text-gray-300 mt-1",children:"Lobby"})]}),i.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-700/50 transition-colors",onClick:()=>b("/lobby"),children:[i.jsx("img",{src:I.GAME_MODE,alt:"Game Mode",className:"w-8 h-8"}),i.jsx("span",{className:"text-xs text-gray-300 mt-1",children:"Games"})]}),i.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-700/50 transition-colors",onClick:()=>b("/battle"),children:[i.jsx("img",{src:I.BATTLE,alt:"Battle",className:"w-8 h-8"}),i.jsx("span",{className:"text-xs text-gray-300 mt-1",children:"Battle"})]})]})})]})}):null}function V4(e){return{"Ikan Emas":4400,"Ikan Lele":2e3,"Ikan Arwana":2e3,"Ikan Nila":2e3,Umpan:400,Pancingan:3200,Apel:2e3,Anggur:2400,Semangka:2e3,Nanas:1600,Pisang:1600,"Bibit Apel":2e3,"Bibit Anggur":2400,"Bibit Semangka":2e3,"Bibit Nanas":1600,"Bibit Pisang":1600,Kayu:560,Batu:680,PickAxe:4800,Monyet:3600,Beruang:4800,Babi:4400,Burung:4800,Ayam:2e3,Panah:4e3,"Big Potion":2e3,"Small Potion":800}[e]||100}function q4(){var L;const[e,t]=g.useState(null),[s,n]=g.useState([]),[r,a]=g.useState([]),[o,l]=g.useState(!0),[c,u]=g.useState(""),[d,h]=g.useState("items"),[f,p]=g.useState(!1),w=Ge(),{purchaseCostume:y,loadCostumes:b}=xs((e==null?void 0:e.id)||null);g.useEffect(()=>{m(),x(),v()},[]);const m=async()=>{try{const{data:{user:R}}=await E.auth.getUser();if(!R){w("/login");return}const{data:D,error:T}=await E.from("profiles").select("id, user_id, username, zgold, ztoken").eq("user_id",R.id).single();if(T)throw T;t(D)}catch{M.error("Failed to load profile")}},x=async()=>{try{const{data:R,error:D}=await E.from("game_items").select("*").order("type",{ascending:!0});if(D)throw D;n(R)}catch{M.error("Failed to load items")}finally{l(!1)}},v=async()=>{try{const{data:R,error:D}=await E.from("costumes").select("*").eq("is_active",!0).order("name");if(D)throw D;a(R||[])}catch{M.error("Failed to load costumes")}},_=async R=>{if(e&&!f){if(e.zgold<R.sell_price){M.error("Not enough ZGold!");return}p(!0);try{const{data:D,error:T}=await E.from("player_inventory").select("*").eq("profile_id",e.id).eq("item_id",R.id).maybeSingle();if(T)throw T;const{error:U}=await E.from("profiles").update({zgold:e.zgold-R.sell_price}).eq("id",e.id);if(U)throw U;if(D){const{error:V}=await E.from("player_inventory").update({quantity:D.quantity+1}).eq("id",D.id);if(V)throw V}else{const{error:V}=await E.from("player_inventory").insert({profile_id:e.id,item_id:R.id,quantity:1});if(V)throw V}t(V=>V?{...V,zgold:V.zgold-R.sell_price}:null),M.success("Item purchased successfully!")}catch(D){M.error("Failed to purchase item"),console.error("Purchase error:",D)}finally{p(!1)}}},k=async R=>{if(e&&!f){p(!0);try{await y(R,e.id,e.zgold)&&t(T=>T?{...T,zgold:T.zgold-R.price}:null)}catch(D){console.error("Purchase error:",D)}finally{p(!1)}}},S=s.filter(R=>{const D=R.name.toLowerCase().includes(c.toLowerCase()),T=d==="items"||R.type===d;return D&&T}),A=r.filter(R=>R.name.toLowerCase().includes(c.toLowerCase())&&d==="costumes"),C=["items","costumes","fishing","farming","mining","hunting","potion"];return o?i.jsx("div",{className:"min-h-screen rpg-bg flex items-center justify-center",children:i.jsxs("div",{className:"rpg-card p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),i.jsx("div",{className:"text-xl font-semibold text-white",children:"Loading Shop..."})]})}):i.jsx("div",{className:"min-h-screen rpg-bg",children:i.jsxs("div",{className:"min-h-screen pb-20",children:[i.jsxs("div",{className:"sticky top-0 bg-gray-900/95 backdrop-blur-sm border-b border-gray-700/50 p-4 z-10",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("button",{onClick:()=>w("/lobby"),className:"btn-secondary",children:i.jsx(Lt,{className:"w-5 h-5"})}),i.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center",children:[i.jsx("img",{src:I.SHOP,alt:"Shop",className:"w-8 h-8"}),"Shop"]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:" p-1 flex items-center",children:[i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-6 h-6 mr-2"}),i.jsx("span",{className:"font-semibold",children:((L=e==null?void 0:e.zgold)==null?void 0:L.toLocaleString())||0})]}),i.jsxs("div",{className:" p-1 flex items-center",children:[i.jsx("img",{src:I.ZTOKEN,alt:"ZToken",className:"w-6 h-6 mr-2"}),i.jsx("span",{className:"font-semibold",children:(e==null?void 0:e.ztoken)||0})]})]})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Br,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{type:"text",placeholder:"Search items...",value:c,onChange:R=>u(R.target.value),className:"input-modern pl-10 w-full"})]}),i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 md:pb-0",children:C.map(R=>i.jsx("button",{onClick:()=>h(R),className:`px-4 py-2 rounded-lg font-medium whitespace-nowrap transition-all duration-200 ${d===R?"bg-purple-600 text-white shadow-md rpg-glow":"bg-gray-700/80 text-gray-200 border border-gray-600/50 hover:border-gray-500 hover:shadow-sm"}`,children:R.charAt(0).toUpperCase()+R.slice(1)},R))})]})]}),i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"rpg-card",children:[i.jsxs("h2",{className:"text-xl font-semibold text-white text-center mb-6 flex items-center justify-center",children:[i.jsx(qe,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Available Items"]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:d==="costumes"?A.map(R=>i.jsxs(W.div,{className:"inventory-item text-center",whileHover:{scale:1.02},whileTap:{scale:.98},children:[i.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:i.jsx("img",{src:R.icon_url,alt:R.name,className:"w-12 h-12 mx-auto object-contain"})}),i.jsx("h3",{className:"font-medium text-sm mb-2 text-white",children:R.name}),i.jsxs("div",{className:"rpg-card-light p-2 mb-3 flex items-center justify-center",children:[i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"font-semibold text-sm",children:R.price.toLocaleString()})]}),i.jsx("button",{onClick:()=>k(R),disabled:f||((e==null?void 0:e.zgold)||0)<R.price,className:"btn-success btn-sm w-full",children:"Buy"})]},R.id)):S.map(R=>i.jsxs(W.div,{className:"inventory-item text-center",whileHover:{scale:1.02},whileTap:{scale:.98},children:[i.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:i.jsx("img",{src:R.image_url,alt:R.name,className:"w-12 h-12 mx-auto object-contain"})}),i.jsx("h3",{className:"font-medium text-sm mb-2 text-white",children:R.name}),i.jsxs("div",{className:"rpg-card-light p-2 mb-3 flex items-center justify-center",children:[i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"font-semibold text-sm",children:R.sell_price.toLocaleString()})]}),i.jsx("button",{onClick:()=>_(R),disabled:f||((e==null?void 0:e.zgold)||0)<R.sell_price,className:"btn-success btn-sm w-full",children:"Buy"})]},R.id))}),(d==="costumes"&&A.length===0||d!=="costumes"&&S.length===0)&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(_x,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),i.jsxs("p",{className:"text-lg font-medium text-white mb-2",children:["No ",d==="costumes"?"costumes":"items"," found"]}),i.jsx("p",{className:"text-gray-300",children:"Try adjusting your search or filter"})]})]})}),i.jsx("div",{className:"fixed bottom-0 left-0 right-0 nav-modern p-4",children:i.jsxs("div",{className:"flex justify-between max-w-md mx-auto",children:[i.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-700/50 transition-colors",onClick:()=>w("/inventory"),children:[i.jsx("img",{src:I.INVENTORY,alt:"Inventory",className:"w-8 h-8"}),i.jsx("span",{className:"text-xs text-gray-300 mt-1",children:"Inventory"})]}),i.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-700/50 transition-colors",onClick:()=>w("/lobby"),children:[i.jsx("img",{src:I.LOBBY,alt:"Lobby",className:"w-8 h-8"}),i.jsx("span",{className:"text-xs text-gray-300 mt-1",children:"Lobby"})]}),i.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-700/50 transition-colors",onClick:()=>w("/lobby"),children:[i.jsx("img",{src:I.GAME_MODE,alt:"Game Mode",className:"w-8 h-8"}),i.jsx("span",{className:"text-xs text-gray-300 mt-1",children:"Games"})]}),i.jsxs("button",{className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-700/50 transition-colors",onClick:()=>w("/battle"),children:[i.jsx("img",{src:I.BATTLE,alt:"Battle",className:"w-8 h-8"}),i.jsx("span",{className:"text-xs text-gray-300 mt-1",children:"Battle"})]})]})})]})})}const H4=({rewards:e,onClose:t,onClaim:s})=>i.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-blue-900 p-6 rounded-xl max-w-md w-full mx-4 relative border-2 border-yellow-400",children:[i.jsx("button",{onClick:t,className:"absolute top-2 right-2 text-gray-400 hover:text-white",children:i.jsx(et,{className:"w-6 h-6"})}),i.jsx("h2",{className:"text-2xl font-bold text-center text-white mb-4",children:"Stage Complete!"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-black/30 p-4 rounded-lg",children:[i.jsx("h3",{className:"text-xl text-center text-yellow-400 mb-4",children:"Rewards"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-white flex justify-between",children:[i.jsx("span",{children:"Gold"}),i.jsxs("span",{className:"text-yellow-400",children:["+",e.gold]})]}),i.jsxs("p",{className:"text-white flex justify-between",children:[i.jsx("span",{children:"ZGold"}),i.jsxs("span",{className:"text-blue-400",children:["+",e.zgold]})]}),i.jsxs("p",{className:"text-white flex justify-between",children:[i.jsx("span",{children:"Experience"}),i.jsxs("span",{className:"text-green-400",children:["+",e.exp]})]})]})]}),e.title&&i.jsxs("div",{className:"bg-yellow-500/20 p-4 rounded-lg animate-pulse",children:[i.jsx("h3",{className:"text-center text-yellow-400 mb-2",children:"🎉 New Title Unlocked!"}),i.jsxs("p",{className:"text-white text-center font-bold",children:['"',e.title,'"']})]})]}),i.jsxs("button",{onClick:s,className:"w-full mt-6 bg-yellow-600 hover:bg-yellow-700 text-white py-2 rounded-lg font-bold flex items-center justify-center gap-2",children:[i.jsx(mr,{className:"w-5 h-5"}),"Claim Rewards"]})]})}),tt=[{id:1,name:"AETHERION",color:"from-blue-500 to-purple-600",stageRange:{start:1,end:10},background:"https://i.pinimg.com/1200x/0e/90/7b/0e907b5878565080d7e224b60ff71d81.jpg",description:"Langit yang kita pijak adalah puing dari dunia yang kita hancurkan sendiri."},{id:2,name:"THALASSIA",color:"from-cyan-500 to-blue-600",stageRange:{start:11,end:20},background:"https://i.pinimg.com/736x/5e/57/c5/5e57c5eaab0526ba7ee6b78dfd7ee068.jpg",description:"Lautan bukan hanya rumah, tapi memori yang terus bergelombang."},{id:3,name:"EMBERWASTE",color:"from-green-500 to-blue-600",stageRange:{start:21,end:30},background:"https://i.pinimg.com/736x/00/cc/a9/00cca9ae2f6dba205c4f4137218b53e4.jpg",description:"Di tanah yang terbakar, dosa tak pernah hilang—ia hanya meleleh, mengalir, lalu jatuh lagi bersama hujan abu."},{id:4,name:"CRYNTAR",color:"from-orange-500 to-purple-600",stageRange:{start:31,end:40},background:"https://i.pinimg.com/736x/c6/02/34/c602347e967919e0d25056ff58a79740.jpg",description:"Di dunia yang tak pernah mencair, waktu membeku bersama harapan."},{id:5,name:"SYLVARAN",color:"from-emerald-400 to-green-600",stageRange:{start:41,end:50},background:"https://i.pinimg.com/1200x/d0/81/20/d08120c23350d318eedb3e9b2c8762f1.jpg",description:"Hutan ini tidak dilalui waktu. Ia mengingat setiap langkah, luka, dan kebohongan."},{id:6,name:"MECHAVELL",color:"from-gray-500 to-blue-600",stageRange:{start:51,end:60},background:"https://i.pinimg.com/1200x/f1/06/fd/f106fde3d90023109abe164523d8b01e.jpg",description:""},{id:7,name:"DRAKARHIM",color:"from-purple-600 to-indigo-800",stageRange:{start:61,end:70},background:"https://i.pinimg.com/1200x/3f/89/ca/3f89ca6dd6f0038cfe565fc82ff7e297.jpg",description:""},{id:8,name:"NOCTHERRA",color:"from-purple-400 to-blue-400",stageRange:{start:71,end:80},background:"https://i.pinimg.com/736x/b6/5f/18/b65f183a1db8acffa8d31441ab99f641.jpg",description:""},{id:9,name:"NECROSALEM",color:"from-yellow-600 to-orange-700",stageRange:{start:81,end:90},background:"https://i.pinimg.com/1200x/5b/8d/84/5b8d8470cc700f04f600fe50a2dd531e.jpg",description:""},{id:10,name:"ASTRALUNE",color:"from-purple-400 to-pink-600",stageRange:{start:91,end:100},background:"https://i.pinimg.com/1200x/0d/87/7e/0d877ec22454b0e5d9e6ddad1430f15b.jpg",description:""}],W4={AETHERION:{npc1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753958220777-gh3omj.png",npc2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753958228008-jloonu.png",npc3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753958238825-056u6o.png",npc4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753958246632-iev7xs.png",boss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753958392303-b5glsc.png"},THALASSIA:{npc1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753960948915-oiijj6.png",npc2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753960940043-al0twb.png",npc3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753960933612-a5ivvz.png",npc4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753960955211-gayvwn.png",boss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753960960851-j6fphw.png"},EMBERWASTE:{npc1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753961033419-6ylqvf.png",npc2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753961041619-m8sd5y.png",npc3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753961048923-axgxiu.png",npc4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753961056683-rzij4n.png",boss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753961062371-omhdtr.png"},CRYNTAR:{npc1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753961170428-whwtek.png",npc2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753961176268-y98z0s.png",npc3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753961181804-vqwyf9.png",npc4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753961187419-9cp481.png",boss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753961192971-9oa29r.png"},SYLVARAN:{npc1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985672711-gprpwu.png",npc2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985678628-5oi4y6.png",npc3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985685980-scenoc.png",npc4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985691996-hydpcu.png",boss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985697980-ggqb5w.png"},MECHAVELL:{npc1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985783372-ykljv4.png",npc2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985789436-el4cd4.png",npc3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985795756-0b84x7.png",npc4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985801612-ah3x9n.png",boss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985807484-32dof2.png"},DRAKARHIM:{npc1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985828524-ug36ae.png",npc2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985834196-7ledmr.png",npc3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985840317-f9k47g.png",npc4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985845724-wvi3we.png",boss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985852076-hu1tp7.png"},NOCTHERRA:{npc1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985865876-1ls6zh.png",npc2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985871532-h1ge44.png",npc3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985877108-q7zsti.png",npc4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985882476-b1qswl.png",boss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753985888181-4dwbzl.png"},NECROSALEM:{npc1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753986679029-2qgikl.png",npc2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753986684493-6uxw7i.png",npc3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753986690054-76ubrq.png",npc4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753986695453-saz8mm.png",boss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753986700885-fft15m.png"},ASTRALUNE:{npc1:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753986710109-qwtudx.png",npc2:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753986715493-oasyfa.png",npc3:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753986721149-t00vuq.png",npc4:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753986726653-jmtoyu.png",boss:"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1753986731885-tzrpfy.png"}},G4={AETHERION:{normal:{hp:100,attack:5},boss:{hp:100,attack:10}},THALASSIA:{normal:{hp:100,attack:10},boss:{hp:100,attack:20}},EMBERWASTE:{normal:{hp:100,attack:20},boss:{hp:100,attack:30}},CRYNTAR:{normal:{hp:100,attack:30},boss:{hp:100,attack:40}},SYLVARAN:{normal:{hp:100,attack:40},boss:{hp:100,attack:50}},MECHAVELL:{normal:{hp:100,attack:50},boss:{hp:100,attack:60}},DRAKARHIM:{normal:{hp:100,attack:60},boss:{hp:100,attack:70}},NOCTHERRA:{normal:{hp:100,attack:70},boss:{hp:100,attack:80}},NECROSALEM:{normal:{hp:100,attack:80},boss:{hp:100,attack:90}},ASTRALUNE:{normal:{hp:100,attack:90},boss:{hp:100,attack:95}}},K4={AETHERION:{normal:{gold:100,zgold:10,exp:50},boss:{gold:150,zgold:20,exp:80},post_boss:{gold:120,zgold:12,exp:60},final:{gold:500,zgold:40,exp:100},title:"Guardian of Aetherion"},THALASSIA:{normal:{gold:140,zgold:14,exp:70},boss:{gold:200,zgold:25,exp:100},post_boss:{gold:160,zgold:16,exp:80},final:{gold:550,zgold:45,exp:120},title:"Tidebreaker"},EMBERWASTE:{normal:{gold:180,zgold:18,exp:90},boss:{gold:250,zgold:30,exp:120},post_boss:{gold:200,zgold:20,exp:100},final:{gold:600,zgold:50,exp:150},title:"Emberwaste Master"},CRYNTAR:{normal:{gold:220,zgold:22,exp:110},boss:{gold:300,zgold:35,exp:140},post_boss:{gold:240,zgold:24,exp:120},final:{gold:650,zgold:55,exp:160},title:"Frostborn Slayer"},SYLVARAN:{normal:{gold:260,zgold:26,exp:130},boss:{gold:350,zgold:40,exp:160},post_boss:{gold:280,zgold:28,exp:140},final:{gold:700,zgold:60,exp:170},title:"Verdant Warden"},MECHAVELL:{normal:{gold:300,zgold:30,exp:150},boss:{gold:400,zgold:50,exp:180},post_boss:{gold:320,zgold:32,exp:160},final:{gold:750,zgold:65,exp:180},title:"Clockwork Strategist"},DRAKARHIM:{normal:{gold:340,zgold:34,exp:170},boss:{gold:450,zgold:55,exp:200},post_boss:{gold:360,zgold:36,exp:180},final:{gold:800,zgold:70,exp:200},title:"Drakebane"},NOCTHERRA:{normal:{gold:380,zgold:38,exp:190},boss:{gold:500,zgold:60,exp:220},post_boss:{gold:400,zgold:40,exp:200},final:{gold:850,zgold:75,exp:220},title:"Shadowrender"},NECROSALEM:{normal:{gold:420,zgold:42,exp:210},boss:{gold:550,zgold:65,exp:250},post_boss:{gold:440,zgold:44,exp:240},final:{gold:900,zgold:80,exp:250},title:"Soul Reaper"},ASTRALUNE:{normal:{gold:460,zgold:46,exp:230},boss:{gold:520,zgold:65,exp:250},post_boss:{gold:500,zgold:50,exp:240},final:{gold:1e3,zgold:100,exp:300},title:"Eclipse Ascendant"}},Z4=()=>{var lh,ch,uh,dh,hh,fh;const e=Ge(),[t,s]=g.useState(null),[n,r]=g.useState(null),[a,o]=g.useState([]),[l,c]=g.useState(!0),[u,d]=g.useState(1),[h,f]=g.useState(null),[p,w]=g.useState(null),[y,b]=g.useState(!1),[m,x]=g.useState(1),[v,_]=g.useState(null),[k,S]=g.useState(100),[A,C]=g.useState([]),[L,R]=g.useState("map"),[D,T]=g.useState(!1),[U,V]=g.useState(null),[H,te]=g.useState(!1),[Z,N]=g.useState(!1),{equippedCostume:j}=xs((t==null?void 0:t.id)||null),P=async()=>{if(!(!U||!t))try{let $=0,B="";if(U.title)try{const{data:Y,error:se}=await E.from("titles").select("id").eq("name",U.title).single();if(se)console.warn("Title not found:",U.title);else if(Y){const{data:ge}=await E.from("player_titles").select("id").match({profile_id:t.id,title_id:Y.id}).maybeSingle();if(ge)$=2e3,B="Duplicate title converted to 2000 ZGold!";else{const{error:oe}=await E.from("player_titles").insert({profile_id:t.id,title_id:Y.id,is_equipped:!1});oe?(console.error("Error inserting title:",oe),$=2e3,B="Title converted to 2000 ZGold!"):B=`Title "${U.title}" obtained!`}}}catch(Y){console.error("Title processing error:",Y),$=2e3,B="Title converted to 2000 ZGold!"}const{error:ee}=await E.from("profiles").update({zgold:t.zgold+U.zgold+$,exp:t.exp+U.exp}).eq("id",t.id);if(ee)throw ee;B&&M.success(B),M.success("Rewards claimed!"),T(!1),b(!1),await de()}catch($){console.error("Error claiming rewards:",$),M.error("Failed to claim rewards")}},O=$=>{Pe($.id)&&(d($.id),f($))},[z,G]=g.useState(null),ae=g.useMemo(()=>(n==null?void 0:n.completed_stages.length)||0,[n==null?void 0:n.completed_stages]);g.useMemo(()=>ae/100*100,[ae]),g.useEffect(()=>{de()},[]);const de=async()=>{try{const{data:{user:$}}=await E.auth.getUser();if(!$){e("/login");return}const{data:B,error:ee}=await E.from("profiles").select("*").eq("user_id",$.id).single();if(ee)throw ee;s(B),S(100);let{data:Y,error:se}=await E.from("player_adventure_progress").select("*").eq("profile_id",B.id).maybeSingle();if(Y){if(se&&se.code!=="PGRST116")throw se}else{const{data:Ji,error:Qs}=await E.from("player_adventure_progress").upsert({profile_id:B.id,completed_stages:[],current_stage:1,unlocked_worlds:["AETHERION"]}).select().single();if(Qs)throw Qs;Y=Ji}r(Y);const{data:ge,error:oe}=await E.from("player_inventory").select(`
          id,
          item_id,
          quantity,
          game_items (
            name,
            image_url,
            type
          )
        `).eq("profile_id",B.id).eq("game_items.type","potion");if(oe)throw oe;o(ge||[]);let{data:$e,error:Sr}=await E.from("adventure_sessions").select("*").eq("profile_id",B.id).maybeSingle();if($e){if(Sr&&Sr.code!=="PGRST116")throw Sr}else{const Ji=`ADV-${B.id.substring(0,6)}`,{data:Qs,error:mh}=await E.from("adventure_sessions").upsert({profile_id:B.id,room_code:Ji}).select().single();if(mh)throw mh;$e=Qs}G($e)}catch($){console.error("Error loading data:",$),M.error("Failed to load adventure data")}finally{c(!1)}},Q=async $=>{try{const{data:B,error:ee}=await E.from("player_inventory").select(`
          id,
          item_id,
          quantity,
          game_items (
            name,
            image_url,
            type
          )
        `).eq("profile_id",$).eq("game_items.type","potion");if(ee)throw ee;o(B||[])}catch(B){console.error("Error loading potions:",B),M.error("Failed to load potions")}},re=$=>tt.find(B=>$>=B.stageRange.start&&$<=B.stageRange.end)||null,Pe=$=>{if($===1)return!0;if(!n)return!1;const B=tt.find(ee=>ee.id===$-1);return B?n.completed_stages.includes(B.stageRange.end):!1},K=$=>(n==null?void 0:n.completed_stages.includes($))||!1,we=$=>$===1?!0:n?n.completed_stages.includes($-1)||n.current_stage>=$:!1,he=$=>$%10===0?"final":$%5===0?"boss":"normal",pe=$=>{switch(he($)){case"final":return 5;case"boss":return 5;default:return 3}},_t=($,B)=>{const ee=re($);if(!ee)return console.error("Invalid world for stage:",$),null;const Y=he($),se=B===pe($),ge=G4[ee.name],oe=se?ge.boss:ge.normal,$e=W4[ee.name];if(!$e)return console.error("No enemies defined for world:",ee.name),null;const Sr=se?$e.boss:$e[`npc${Math.min(B,4)}`],Qs={name:se?`${ee.name} ${Y==="final"?"Final Boss":"Boss"}`:`${ee.name} Guardian ${B}`,hp:oe.hp,maxHp:oe.hp,attack:oe.attack,defense:0,image:Sr||""};return _(Qs),Qs},En=async $=>{if(!t||!we($)){M.error("Stage not available");return}try{w($),b(!0),x(1),S(100),C([]);const B=_t($,1);if(!B)throw new Error("Failed to generate enemy");C([`Battle started against ${B.name}!`])}catch(B){console.error("Battle initialization error:",B),M.error("Failed to start battle"),b(!1),w(null),_(null)}},Ys=($,B)=>{const ee=re($);if(!ee)return null;const Y=K4[ee.name],se=he($);return se==="final"&&B?{...Y.final,title:Y.title}:se==="boss"&&B?Y.boss:$%5>0&&$%5===1?Y.post_boss:Y.normal},nv=async()=>{if(!p||!t)return;const $=pe(p);try{if(m<$){const B=m+1;if(x(B),!_t(p,B)){M.error("Failed to generate enemy for next round"),b(!1);return}C(Y=>[...Y,`Round ${B} begins!`])}else{C(oe=>[...oe,"Stage complete!"]);const B=n!=null&&n.completed_stages.includes(p)?n.completed_stages:[...(n==null?void 0:n.completed_stages)||[],p],{error:ee}=await E.from("player_adventure_progress").update({completed_stages:B,current_stage:Math.max(p+1,(n==null?void 0:n.current_stage)||1)}).eq("profile_id",t.id);if(ee)throw ee;const Y=Ys(p,!0);if(!Y)return;const{error:se}=await E.from("profiles").update({zgold:t.zgold+Y.zgold,exp:t.exp+Y.exp}).eq("id",t.id);if(se)throw se;const ge=re(p);if(ge&&p===ge.stageRange.end&&Y.title)try{const{data:oe}=await E.from("titles").select("id").eq("name",Y.title).single();if(oe){const{data:$e}=await E.from("player_titles").select("id").match({profile_id:t.id,title_id:oe.id}).maybeSingle();$e||await E.from("player_titles").upsert({profile_id:t.id,title_id:oe.id,is_equipped:!1}).select().single()}}catch(oe){console.warn("Title award error:",oe)}V(Y),T(!0),b(!1),r(oe=>oe?{...oe,completed_stages:B,current_stage:Math.max(p+1,oe.current_stage)}:null),M.success("Stage completed!")}}catch(B){console.error("Error updating progress:",B),M.error("Failed to save progress"),b(!1)}},rv=async()=>{if(!(!v||!t||k<=0))try{te(!0);const $=Math.max(t.strength,0),B=Math.max(0,v.hp-$);if(C(se=>[...se,`You dealt ${$} damage to ${v.name}!`]),_({...v,hp:B}),await new Promise(se=>setTimeout(se,500)),te(!1),B<=0){C(se=>[...se,`${v.name} has been defeated!`]),await nv();return}N(!0);const ee=Math.max(v.attack,0),Y=Math.max(0,k-ee);C(se=>[...se,`${v.name} dealt ${ee} damage to you!`]),S(Y),await new Promise(se=>setTimeout(se,500)),N(!1),Y<=0&&(C(se=>[...se,"You have been defeated!"]),M.error("Battle lost!"),b(!1))}catch($){console.error("Attack error:",$),M.error("Error during attack")}},iv=async $=>{if(!(!t||k>=100||!$.game_items))try{const B=$.quantity-1;if(B>=0){const{error:ee}=await E.from("player_inventory").update({quantity:B}).eq("id",$.id);if(ee)throw ee;if(B===0){const{error:ge}=await E.from("player_inventory").delete().eq("id",$.id);if(ge)throw ge}const Y=$.game_items.name.includes("Big")?50:15,se=Math.min(100,k+Y);S(se),C(ge=>[...ge,`Used ${$.game_items.name} and recovered ${Y} HP!`]),o(ge=>ge.map(oe=>oe.id===$.id?{...oe,quantity:B}:oe).filter(oe=>oe.quantity>0)),await Q(t.id)}else M.error("Not enough potions")}catch(B){console.error("Error using potion:",B),M.error("Failed to use potion")}},av=()=>a.length===0?i.jsx("p",{className:"text-gray-400 text-xs",children:"No potions available"}):a.filter($=>$.game_items!==null).map($=>i.jsxs("button",{onClick:()=>iv($),disabled:k>=100||l,className:"flex-shrink-0 bg-green-900/30...",children:[i.jsx("img",{src:$.game_items.image_url,alt:$.game_items.name,className:"w-6 h-6 mx-auto mb-1"}),i.jsx("p",{className:"text-xs font-medium text-white text-center",children:$.game_items.name.includes("Big")?"Big":"Small"}),i.jsxs("p",{className:"text-xs text-gray-300 text-center",children:["x",$.quantity]})]},$.id));if(y){if(!v||!p||!t)return i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 to-slate-800 p-4",children:i.jsx("div",{className:"max-w-4xl mx-auto text-center",children:i.jsxs("div",{className:"bg-red-900/30 backdrop-blur-sm border border-red-700 rounded-lg p-6",children:[i.jsx("h3",{className:"text-white text-lg font-bold",children:"Error Starting Battle"}),i.jsx("p",{className:"text-gray-300 mt-2",children:"Failed to initialize battle data."}),i.jsx("button",{onClick:()=>{b(!1),w(null),_(null)},className:"mt-4 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg",children:"Return to Map"})]})})});const $=re(p);return $?i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 to-slate-800 p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex justify-between items-center text-white",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold",children:($==null?void 0:$.name)||"Unknown World"}),i.jsxs("p",{children:["Stage ",p," - Round ",m,"/",pe(p)]})]}),i.jsxs("button",{onClick:()=>b(!1),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[i.jsx(Lt,{className:"w-4 h-4"}),"Retreat"]})]})}),i.jsx("div",{className:"relative w-full max-w-4xl mx-auto rounded-xl overflow-hidden mb-8 p-4",style:{backgroundImage:`url(${$.background})`,backgroundSize:"cover",backgroundPosition:"center"},children:i.jsxs("div",{className:"rpg-card-light w-full max-w-md mx-auto bg-black/60 backdrop-blur-sm rounded-xl p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{className:"flex flex-col items-center w-1/2",children:[i.jsx(W.div,{animate:{x:H?[0,20,0]:0},transition:{duration:.5},className:"mb-2",children:i.jsx("img",{src:I.getCharacterImage(t.character_type,j),alt:"Player",className:"w-20 h-20 object-contain"})}),i.jsx("p",{className:"text-white text-sm font-bold",children:t.username})]}),i.jsxs("div",{className:"flex flex-col items-center w-1/2",children:[i.jsx(W.div,{animate:{x:v.hp===0?0:-20,opacity:v.hp===0?0:1},transition:{duration:.5},className:"mb-2",children:i.jsx("img",{src:v.image,alt:v.name,className:"w-20 h-20 object-contain rounded-lg"})}),i.jsx("p",{className:"text-white text-sm font-bold",children:v.name})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("div",{className:"w-1/2 pr-2",children:[i.jsxs("div",{className:"flex justify-between text-xs text-white mb-1",children:[i.jsxs("span",{children:["HP: ",k,"/100"]}),i.jsxs("span",{children:["⚔ ",t.strength]})]}),i.jsx("div",{className:"h-2 bg-gray-700 rounded relative overflow-hidden",children:i.jsx(W.div,{className:`h-2 rounded ${k>60?"bg-green-500":k>30?"bg-yellow-500":"bg-red-500"}`,animate:{width:`${k}%`},transition:{duration:.5}})})]}),i.jsxs("div",{className:"w-1/2 pl-2",children:[i.jsxs("div",{className:"flex justify-between text-xs text-white mb-1",children:[i.jsxs("span",{children:["HP: ",v.hp,"/",v.maxHp]}),i.jsxs("span",{children:["⚔ ",v.attack]})]}),i.jsx("div",{className:"h-2 bg-gray-700 rounded relative overflow-hidden",children:i.jsx(W.div,{className:"h-2 bg-red-500 rounded",animate:{width:`${v.hp/v.maxHp*100}%`},transition:{duration:.5}})})]})]})]})}),i.jsx("div",{className:"w-full px-4 pb-4 flex justify-center",children:i.jsxs("button",{onClick:rv,disabled:k<=0,className:"btn-danger w-full max-w-xs transition-all duration-300",children:[i.jsx(VN,{className:"w-5 h-5 inline-block mr-2"}),"ATTACK"]})}),a.length>0&&i.jsx("div",{className:"max-w-4xl mx-auto mb-4",children:i.jsxs("div",{className:"rpg-card-light p-3",children:[i.jsxs("h3",{className:"text-sm font-semibold text-white mb-2 flex items-center",children:[i.jsx(Nd,{className:"w-4 h-4 mr-2 text-green-400"}),"Potions"]}),i.jsx("div",{className:"flex gap-2 overflow-x-auto",children:av()})]})}),i.jsxs("div",{className:"rpg-card-light p-4 max-w-4xl mx-auto",children:[i.jsx("h4",{className:"text-white font-bold mb-3",children:"Battle Log"}),i.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:A.map((B,ee)=>i.jsx("p",{className:"text-gray-300 text-sm",children:B},ee))})]})]})}):(b(!1),w(null),_(null),null)}return i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 to-slate-800 p-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("div",{children:i.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center gap-3",children:[i.jsx($l,{className:"w-8 h-8"}),"Adventure"]})}),i.jsx("button",{onClick:()=>e("/lobby"),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:i.jsx(Lt,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex gap-2 mb-6",children:[i.jsxs("button",{onClick:()=>R("map"),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${L==="map"?"bg-purple-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:[i.jsx($l,{className:"w-4 h-4"}),"World Map"]}),i.jsxs("button",{onClick:()=>R("stages"),className:`px-4 py-2 rounded-lg flex items-center gap-2 ${L==="stages"?"bg-purple-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"}`,children:[i.jsx(Nx,{className:"w-4 h-4"}),"Stage List"]})]}),L==="map"?i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:[i.jsx("div",{className:"lg:col-span-1 grid grid-cols-1 lg:grid-cols-1",children:tt.map(($,B)=>{const ee=Pe($.id),Y=(n==null?void 0:n.completed_stages.filter(ge=>ge>=$.stageRange.start&&ge<=$.stageRange.end).length)||0,se=Y===10;return i.jsx("div",{className:`relative group cursor-pointer transition-all duration-300 ${ee?"hover:scale-105":"opacity-50"}`,onClick:()=>O($),children:i.jsxs("div",{className:`
        relative overflow-hidden rounded-xl border-2 transition-all duration-300
        ${ee?`border-transparent bg-gradient-to-br ${$.color} ${u===$.id?"ring-4 ring-yellow-400 shadow-2xl":""}`:"border-gray-600 bg-gray-800"}
      `,children:[i.jsxs("div",{className:"h-20 lg:h-20 bg-cover bg-center relative",style:{backgroundImage:ee?`url(${$.background})`:"none",backgroundColor:ee?"transparent":"#374151"},children:[i.jsx("div",{className:`absolute inset-0 ${ee?"bg-black/60":"bg-gray-700/80"}`}),!ee&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx(go,{className:"w-8 h-8 text-gray-400"})}),se&&i.jsx("div",{className:"absolute top-2 right-2",children:i.jsx("img",{src:I.complate_adventure,alt:"Global Chat",className:"w-5 h-5"})}),i.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:[i.jsx("h3",{className:"text-sm lg:text-base font-bold text-white mb-2 drop-shadow-lg",children:$.name}),i.jsxs("div",{className:"flex justify-between items-center text-xs mb-2",children:[i.jsx("span",{className:"text-gray-200 drop-shadow",children:"Progress"}),i.jsxs("span",{className:"text-white font-semibold drop-shadow",children:[Y,"/10"]})]}),i.jsx("div",{className:"w-full bg-black/40 rounded-full h-1.5 backdrop-blur-sm",children:i.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${se?"bg-yellow-400":"bg-blue-500"}`,style:{width:`${Y/10*100}%`}})})]})]}),B<tt.length-1&&i.jsx("div",{className:"absolute -bottom-2 left-1/2 w-0.5 h-4 bg-gradient-to-b from-purple-400 to-transparent transform -translate-x-1/2 hidden lg:block"})]})},$.id)})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsx("div",{className:"bg-slate-800/90 backdrop-blur-sm border border-slate-700 rounded-xl p-6 h-full min-h-[600px]",children:u?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"h-20 bg-cover bg-center rounded-lg relative overflow-hidden",style:{backgroundImage:`url(${(lh=tt.find($=>$.id===u))==null?void 0:lh.background})`||"none",backgroundColor:"#374151"},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),(()=>{const $=tt.find(Y=>Y.id===u);return((n==null?void 0:n.completed_stages.filter(Y=>Y>=($==null?void 0:$.stageRange.start)&&Y<=($==null?void 0:$.stageRange.end)).length)||0)===10&&i.jsx("div",{className:"absolute top-4 right-4",children:i.jsx("img",{src:I.complate_adventure,alt:"Global Chat",className:"w-10 h-10"})})})()]})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-1xl font-bold text-white mb-2",children:(ch=tt.find($=>$.id===u))==null?void 0:ch.name}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-300",children:[i.jsxs("span",{children:["Stages ",(uh=tt.find($=>$.id===u))==null?void 0:uh.stageRange.start,"-",(dh=tt.find($=>$.id===u))==null?void 0:dh.stageRange.end]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full bg-gradient-to-r ${(hh=tt.find($=>$.id===u))==null?void 0:hh.color}`}),i.jsx("span",{children:(()=>{const $=tt.find(Y=>Y.id===u),B=(n==null?void 0:n.completed_stages.filter(Y=>Y>=($==null?void 0:$.stageRange.start)&&Y<=($==null?void 0:$.stageRange.end)).length)||0;return B===10?"":`${B}/10`})()})]})]})]}),i.jsx("div",{className:"bg-slate-700/50 rounded-lg p-2",children:i.jsx("p",{className:"text-gray-300 text-[8px] leading-relaxed",children:(fh=tt.find($=>$.id===u))==null?void 0:fh.description})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Stages"}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:Array.from({length:10},($,B)=>{const Y=tt.find($e=>$e.id===u).stageRange.start+B,se=we(Y),ge=K(Y),oe=he(Y);return i.jsxs("button",{onClick:()=>se&&En(Y),disabled:!se,className:`
                        relative p-4 rounded-lg font-bold transition-all duration-300 group hover:scale-105
                        ${ge?"bg-green-600 text-white shadow-lg shadow-green-600/25":se?oe==="final"?"bg-purple-600 hover:bg-purple-700 text-white shadow-lg shadow-purple-600/25":oe==="boss"?"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-600/25":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-600/25":"bg-gray-600 text-gray-400 cursor-not-allowed"}
                      `,children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-xl font-bold",children:Y}),i.jsx("div",{className:"text-xs opacity-75 mt-1",children:oe==="final"?"Final":oe==="boss"?"Boss":"Stage"})]}),i.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-black text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:[pe(Y)," Rounds"]})]},Y)})})]}),i.jsx("div",{className:"flex gap-3 pt-4",children:i.jsx("button",{onClick:()=>{const $=tt.find(ee=>ee.id===u),B=Array.from({length:10},(ee,Y)=>$.stageRange.start+Y).find(ee=>we(ee)&&!K(ee));B&&En(B)},className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-all duration-300 hover:scale-105 shadow-lg",children:"Continue"})})]}):i.jsx("div",{className:"flex items-center justify-center h-full text-center",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"w-20 h-20 bg-slate-700 rounded-full flex items-center justify-center mx-auto",children:i.jsx($l,{className:"w-10 h-10 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Select a World"}),i.jsx("p",{className:"text-gray-400",children:"Choose a world from the left to view details and stages"})]})]})})})})]}):i.jsx("div",{className:"grid gap-4",children:tt.map($=>Pe($.id)?i.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:`w-4 h-4 rounded-full bg-gradient-to-r ${$.color}`}),i.jsx("h3",{className:"text-xl font-bold text-white",children:$.name}),i.jsxs("span",{className:"text-gray-400",children:["Stages ",$.stageRange.start,"-",$.stageRange.end]})]}),i.jsx("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-3",children:Array.from({length:10},(ee,Y)=>{const se=$.stageRange.start+Y,ge=we(se),oe=K(se),$e=he(se);return i.jsxs("button",{onClick:()=>ge&&En(se),disabled:!ge,className:`
                    relative p-3 rounded-lg font-bold transition-all duration-300 group
                    ${oe?"bg-green-600 text-white shadow-lg":ge?$e==="final"?"bg-purple-600 hover:bg-purple-700 text-white shadow-lg":$e==="boss"?"bg-red-600 hover:bg-red-700 text-white shadow-lg":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg":"bg-gray-600 text-gray-400 cursor-not-allowed"}
                  `,children:[oe&&i.jsx(qe,{className:"w-3 h-3 absolute top-0.5 right-0.5 text-yellow-400"}),$e==="final"&&i.jsx(IN,{className:"w-3 h-3 absolute top-0.5 left-0.5 text-yellow-400"}),$e==="boss"&&i.jsx(We,{className:"w-3 h-3 absolute top-0.5 left-0.5 text-yellow-400"}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg font-bold",children:se}),i.jsx("div",{className:"text-xs opacity-75",children:$e==="final"?"Final":$e==="boss"?"Boss":"Stage"})]}),i.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-black text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:[pe(se)," Rounds"]})]},se)})})]},$.id):null)}),y&&i.jsx("div",{className:"battle-container"}),D&&U&&i.jsx(H4,{rewards:U,onClose:()=>{T(!1),b(!1),de()},onClaim:P})]})})},Yl=[{name:"Ikan Emas",image:"https://pomf2.lain.la/f/92i7wgsz.PNG",chance:10},{name:"Ikan Arwana",image:"https://pomf2.lain.la/f/yvi11i3d.PNG",chance:15},{name:"Ikan Lele",image:"https://pomf2.lain.la/f/7ycg37d8.PNG",chance:35},{name:"Ikan Nila",image:"https://pomf2.lain.la/f/piib5hyy.PNG",chance:30},{name:"Zonk",image:"",chance:10}];function Y4(){const[e,t]=g.useState(null),[s,n]=g.useState([]),[r,a]=g.useState(!1),[o,l]=g.useState(0),[c,u]=g.useState(!1),[d,h]=g.useState(!1),[f,p]=g.useState(null),[w,y]=g.useState(!0),[b,m]=g.useState(5),x=Ge();g.useEffect(()=>{v(),_()},[]),g.useEffect(()=>{let C;return d&&b>0?C=setInterval(()=>{m(L=>L-1)},1e3):b===0&&d&&S(),()=>clearInterval(C)},[d,b]);const v=async()=>{try{const{data:{user:C}}=await E.auth.getUser();if(!C){x("/login");return}const{data:L,error:R}=await E.from("profiles").select("id, username, exp").eq("user_id",C.id).single();if(R)throw R;t(L)}catch{M.error("Failed to load profile")}},_=async()=>{try{const{data:{user:C}}=await E.auth.getUser();if(!C)return;const{data:L}=await E.from("profiles").select("id").eq("user_id",C.id).single();if(!L)return;const{data:R,error:D}=await E.from("player_inventory").select(`
          id,
          item_id,
          quantity,
          game_items (
            name,
            image_url,
            type
          )
        `).eq("profile_id",L.id);if(D)throw D;n(R||[]);const T=R==null?void 0:R.find(V=>V.game_items.name==="Pancingan"),U=R==null?void 0:R.find(V=>V.game_items.name==="Umpan");a(!!T),l((U==null?void 0:U.quantity)||0)}catch{M.error("Failed to load inventory")}finally{y(!1)}},k=async()=>{if(!r){M.error("You need a fishing rod to fish!");return}if(o<=0){M.error("You need bait to fish!");return}if(!e)return;u(!0);const C=Math.floor(Math.random()*2e4+1e4);setTimeout(async()=>{const L=Math.random()*100;let R=0,D=Yl[Yl.length-1];for(const U of Yl)if(R+=U.chance,L<=R){D=U;break}const T=Math.floor(Math.random()*5)+1;D.exp=T,p(D),h(!0),u(!1),m(5)},C)},S=async()=>{if(!(!e||!f))try{const C=s.find(L=>L.game_items.name==="Umpan");if(C){const{error:L}=await E.from("player_inventory").update({quantity:C.quantity-1}).eq("id",C.id);if(L)throw L;const{error:R}=await E.from("profiles").update({exp:e.exp+(f.exp||0)}).eq("id",e.id);if(R)throw R;if(t(D=>D?{...D,exp:D.exp+(f.exp||0)}:null),f.name!=="Zonk"){const D=s.find(T=>T.game_items.name===f.name);if(D){const{error:T}=await E.from("player_inventory").update({quantity:D.quantity+1}).eq("id",D.id);if(T)throw T}else{const{data:T}=await E.from("game_items").select("id").eq("name",f.name).single();if(T){const{error:U}=await E.from("player_inventory").insert({profile_id:e.id,item_id:T.id,quantity:1});if(U)throw U}}}_(),h(!1),p(null)}}catch{M.error("Failed to update inventory")}},A=async C=>{if(e)try{const{error:L}=await E.from("player_inventory").update({quantity:C.quantity}).eq("id",C.id);if(L)throw L;M.success("Item moved to main inventory"),_()}catch{M.error("Failed to move item")}};return w?i.jsx("div",{className:"min-h-screen rpg-bg flex items-center justify-center",children:i.jsxs("div",{className:"rpg-card p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),i.jsx("div",{className:"text-xl font-semibold text-white",children:"Loading Fishing..."})]})}):i.jsx("div",{className:"min-h-screen rpg-bg",children:i.jsxs("div",{className:"min-h-screen flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4",children:[i.jsxs("button",{onClick:()=>x("/lobby"),className:"btn-secondary",children:[i.jsx(Lt,{className:"w-5 h-5 mr-2"}),"Back"]}),i.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center",children:[i.jsx(Dl,{className:"w-6 h-6 mr-2 text-purple-400"}),"Fishing"]}),i.jsx("div",{className:"w-20"})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-between p-4",children:[i.jsx("div",{className:"relative w-full max-w-md aspect-video mt-4",children:i.jsxs("div",{className:"rpg-card h-full overflow-hidden",children:[i.jsx("img",{src:"https://i.pinimg.com/originals/bb/7e/18/bb7e1847a42c9e0760b90c9577f7f586.gif",alt:"Fishing",className:"w-full h-full object-cover rounded-lg"}),(!r||o<=0)&&i.jsx("div",{className:"absolute inset-0 bg-black/80 flex flex-col items-center justify-center rounded-lg",children:i.jsxs("div",{className:"rpg-card-light p-6 text-center",children:[i.jsx("h3",{className:"font-bold text-white mb-4",children:"Missing Equipment:"}),i.jsxs("ul",{className:"space-y-2 mb-6",children:[!r&&i.jsx("li",{className:"text-red-400 font-medium",children:"• Fishing Rod"}),o<=0&&i.jsx("li",{className:"text-red-400 font-medium",children:"• Bait"})]}),i.jsx("button",{onClick:()=>x("/shop"),className:"btn-primary",children:"Go to Shop"})]})})]})}),r&&o>0&&i.jsx("div",{className:"my-6",children:i.jsx(De,{children:c?i.jsxs(W.div,{initial:{opacity:0},animate:{opacity:1},className:"rpg-card-accent p-6 text-center",children:[i.jsx(Dl,{className:"w-8 h-8 mx-auto mb-2 animate-pulse text-purple-400"}),i.jsx("div",{className:"text-xl font-bold text-white",children:"Fishing..."}),i.jsx("p",{className:"text-gray-300 text-sm mt-2",children:"Wait for a bite!"})]}):i.jsxs(W.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},onClick:k,className:"btn-primary btn-lg",children:[i.jsx(qN,{className:"w-6 h-6 mr-2"}),"Start Fishing"]})})}),i.jsxs("div",{className:"w-full rpg-card",children:[i.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 text-center flex items-center justify-center",children:[i.jsx(Dl,{className:"w-5 h-5 mr-2 text-purple-400"}),"Fishing Inventory"]}),i.jsx("div",{className:"grid grid-cols-4 gap-3",children:s.filter(C=>["Ikan Emas","Ikan Arwana","Ikan Lele","Ikan Nila","Pancingan","Umpan"].includes(C.game_items.name)).map(C=>i.jsxs("div",{className:"inventory-item text-center",children:[i.jsx("div",{className:"bg-gray-50 rounded-lg p-2 mb-2",children:i.jsx("img",{src:C.game_items.image_url,alt:C.game_items.name,className:"w-8 h-8 mx-auto object-contain"})}),i.jsx("p",{className:"text-xs font-medium mb-1 text-white",children:C.game_items.name}),i.jsxs("div",{className:"badge badge-primary text-xs mb-2",children:["x",C.quantity]}),["Ikan Emas","Ikan Arwana","Ikan Lele","Ikan Nila"].includes(C.game_items.name)&&i.jsx("button",{onClick:()=>A(C),className:"btn-success btn-sm w-full text-xs",children:"Move"})]},C.id))})]})]}),d&&f&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"rpg-card max-w-md w-full mx-4 text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:f.name==="Zonk"?"Nothing Caught!":"Fish Caught!"}),i.jsxs("div",{className:"mb-6",children:[f.name!=="Zonk"&&i.jsxs("div",{className:"rpg-card-accent p-4 mb-4",children:[i.jsx("img",{src:f.image,alt:f.name,className:"w-24 h-24 mx-auto object-contain mb-2"}),i.jsx("p",{className:"font-bold text-xl text-white",children:f.name})]}),i.jsxs("div",{className:"rpg-card-light p-3 flex items-center justify-center",children:[i.jsx(qe,{className:"w-6 h-6 mr-2 text-yellow-500"}),i.jsxs("span",{className:"text-lg font-bold",children:["+",f.exp," EXP"]})]})]}),i.jsxs("button",{onClick:S,className:"btn-primary w-full",children:[i.jsx(bn,{className:"w-4 h-4 mr-2"}),"Claim (",b,"s)"]})]})})]})})}const xp=[{id:"wheat",name:"Wheat",icon:i.jsx(HN,{className:"w-8 h-8"}),growTime:5,sellPrice:10,expGain:5,cost:5},{id:"carrot",name:"Carrot",icon:i.jsx(AN,{className:"w-8 h-8"}),growTime:10,sellPrice:25,expGain:12,cost:15},{id:"apple",name:"Apple",icon:i.jsx(PN,{className:"w-8 h-8"}),growTime:20,sellPrice:50,expGain:25,cost:30}];function Q4(){const[e,t]=g.useState(null),[s,n]=g.useState([]),[r,a]=g.useState(null),[o,l]=g.useState(!0);g.useEffect(()=>{c(),u();const y=setInterval(()=>{h()},1e3);return()=>clearInterval(y)},[]);const c=async()=>{try{const{data:{user:y}}=await E.auth.getUser();if(!y)return;const{data:b}=await E.from("user_profiles").select("*").eq("user_id",y.id).single();b&&t({id:b.user_id,username:b.username,level:b.level,coins:b.coins,farming_level:b.farming_level||1,farming_exp:b.farming_exp||0})}catch(y){console.error("Error loading user data:",y)}finally{l(!1)}},u=async()=>{const y=localStorage.getItem("plantedCrops");if(y){const m=JSON.parse(y).map(x=>({...x,plantedAt:new Date(x.plantedAt),readyAt:new Date(x.readyAt)}));n(m)}},d=y=>{localStorage.setItem("plantedCrops",JSON.stringify(y))},h=()=>{n(y=>y.map(m=>({...m,isReady:new Date>=m.readyAt})))},f=async y=>{if(!e||e.coins<y.cost)return;const b=new Date,m=new Date(b.getTime()+y.growTime*60*1e3),x={id:Date.now().toString(),crop:y,plantedAt:b,readyAt:m,isReady:!1},v=[...s,x];n(v),d(v);const _={...e,coins:e.coins-y.cost};t(_),await E.from("user_profiles").update({coins:_.coins}).eq("user_id",e.id),a(null)},p=async y=>{const b=s.find(S=>S.id===y);if(!b||!b.isReady||!e)return;const m=s.filter(S=>S.id!==y);n(m),d(m);const x=e.coins+b.crop.sellPrice,v=e.farming_exp+b.crop.expGain,_=Math.floor(v/100)+1,k={...e,coins:x,farming_exp:v,farming_level:_};t(k),await E.from("user_profiles").update({coins:x,farming_exp:v,farming_level:_}).eq("user_id",e.id)},w=y=>{const b=new Date,m=y.getTime()-b.getTime();if(m<=0)return"Ready!";const x=Math.floor(m/(1e3*60)),v=Math.floor(m%(1e3*60)/1e3);return`${x}:${v.toString().padStart(2,"0")}`};return o?i.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Loading..."})}):i.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center gap-2 px-4 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(Lt,{className:"w-5 h-5"}),"Back"]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2 justify-center",children:[i.jsx(Zf,{className:"w-8 h-8 text-green-400"}),"Farming"]}),i.jsx("p",{className:"text-gray-400",children:"Grow crops and earn coins!"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Gf,{className:"w-5 h-5 text-yellow-400"}),i.jsx("span",{className:"font-bold",children:(e==null?void 0:e.coins)||0})]}),i.jsxs("div",{className:"text-sm text-gray-400",children:["Farming Lv. ",(e==null?void 0:e.farming_level)||1]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"rpg-card p-6",children:[i.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[i.jsx(Zf,{className:"w-6 h-6 text-green-400"}),"Your Farm"]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:Array.from({length:6}).map((y,b)=>{const m=s[b];return i.jsx("div",{className:"aspect-square bg-gray-800 rounded-lg border-2 border-gray-700 flex flex-col items-center justify-center p-4 hover:border-gray-600 transition-colors",children:m?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-2xl mb-2",children:m.crop.icon}),i.jsxs("div",{className:"text-xs text-center",children:[i.jsx("div",{className:"font-semibold",children:m.crop.name}),i.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[i.jsx(bn,{className:"w-3 h-3"}),i.jsx("span",{className:m.isReady?"text-green-400":"text-gray-400",children:w(m.readyAt)})]}),m.isReady&&i.jsx("button",{onClick:()=>p(m.id),className:"mt-2 px-2 py-1 bg-green-600 hover:bg-green-700 rounded text-xs transition-colors",children:"Harvest"})]})]}):i.jsxs("button",{onClick:()=>a(xp[0]),className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-gray-400 transition-colors",children:[i.jsx("div",{className:"text-3xl mb-2",children:"+"}),i.jsx("div",{className:"text-xs",children:"Plant Crop"})]})},b)})})]}),i.jsxs("div",{className:"rpg-card p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Crop Shop"}),i.jsx("div",{className:"space-y-3",children:xp.map(y=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"text-2xl",children:y.icon}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:y.name}),i.jsxs("div",{className:"text-sm text-gray-400",children:[y.growTime,"min • +",y.expGain," EXP"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx(Gf,{className:"w-4 h-4 text-yellow-400"}),i.jsx("span",{className:"font-bold",children:y.cost})]}),i.jsx("button",{onClick:()=>f(y),disabled:!e||e.coins<y.cost||s.length>=6,className:"px-3 py-1 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed rounded text-sm transition-colors",children:"Plant"})]})]},y.id))})]})]}),i.jsxs("div",{className:"mt-6 rpg-card p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Farming Progress"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-400",children:(e==null?void 0:e.farming_level)||1}),i.jsx("div",{className:"text-sm text-gray-400",children:"Farming Level"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-400",children:(e==null?void 0:e.farming_exp)||0}),i.jsx("div",{className:"text-sm text-gray-400",children:"Total EXP"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-400",children:s.length}),i.jsx("div",{className:"text-sm text-gray-400",children:"Active Crops"})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsxs("span",{children:["Progress to Level ",((e==null?void 0:e.farming_level)||1)+1]}),i.jsxs("span",{children:[((e==null?void 0:e.farming_exp)||0)%100,"/100"]})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-green-400 h-2 rounded-full transition-all duration-300",style:{width:`${((e==null?void 0:e.farming_exp)||0)%100}%`}})})]})]})]})})}const yp=["WarriorBot","KnightBot","ShadowBot","DragonBot","PhoenixBot","ThunderBot","IceBot","FireBot","WindBot","EarthBot","SteelBot","MysticBot","ChaosBot","OrderBot","VoidBot"];function J4(){const[e,t]=g.useState(null),[s,n]=g.useState(null),[r,a]=g.useState(!1),[o,l]=g.useState(null),[c,u]=g.useState(null),[d,h]=g.useState(60),[f,p]=g.useState(!1),[w,y]=g.useState(null),b=Ge(),{equippedCostume:m}=xs((e==null?void 0:e.id)||null);g.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:{user:D}}=await E.auth.getUser();if(!D){b("/login");return}const{data:T,error:U}=await E.from("profiles").select("id, username, level, strength, character_type").eq("user_id",D.id).single();if(U)throw U;t(T);const{data:V,error:H}=await E.from("player_ranks").select(`
          id,
          stars,
          battles_won,
          battles_lost,
          battle_ranks (
            name,
            level,
            image_url
          )
        `).eq("profile_id",T.id).maybeSingle();if(H)throw H;if(V)n(V);else{const{data:te}=await E.from("battle_ranks").select("id").eq("name","Trainee").single();if(te){const{error:Z}=await E.from("player_ranks").upsert({profile_id:T.id,rank_id:te.id,stars:0,battles_won:0,battles_lost:0},{onConflict:"profile_id",ignoreDuplicates:!1});if(Z)throw Z;const{data:N,error:j}=await E.from("player_ranks").select(`
              id,
              stars,
              battles_won,
              battles_lost,
              battle_ranks (
                name,
                level,
                image_url
              )
            `).eq("profile_id",T.id).single();if(j)throw j;n(N)}}(V||T)&&await v(T.id)}catch(D){console.error("Error loading profile:",D),M.error("Failed to load profile")}},v=async D=>{try{const{data:T,error:U}=await E.from("player_ranks").select("profile_id, battles_won, stars").order("battles_won",{ascending:!1}).order("stars",{ascending:!1});if(U)throw U;const V=(T==null?void 0:T.findIndex(H=>H.profile_id===D))+1;V&&V>0&&n(H=>H?{...H,leaderboard_position:V}:null)}catch(T){console.error("Error loading leaderboard position:",T)}},_=()=>{a(!0),h(30);const D=setInterval(()=>{h(T=>T<=1?(clearInterval(D),A(),0):T-1)},1e3);k()},k=async()=>{if(!e)return;const D=setInterval(async()=>{if(!r){clearInterval(D);return}try{const{data:T,error:U}=await E.from("profiles").select("id, username, level, strength, character_type, user_id").neq("id",e.id).gte("level",Math.max(1,e.level-3)).lte("level",e.level+3).limit(10);if(U)throw U;const V=(T==null?void 0:T.filter(H=>{const te=Math.abs(H.strength-e.strength),Z=e.strength*.4;return te<=Z}))||[];if(V.length>0){const H=V[Math.floor(Math.random()*V.length)];if(await S(H.user_id)){l({...H,is_bot:!1}),a(!1),clearInterval(D),M.success(`Found opponent: ${H.username}!`);return}}}catch(T){console.log("Search attempt failed:",T)}},3e3)},S=async D=>{try{const{data:T,error:U}=await E.from("global_chat").select("created_at").eq("user_id",D).gte("created_at",new Date(Date.now()-3e5).toISOString()).limit(1);return U?!0:T&&T.length>0}catch{return!0}},A=async()=>{if(!e)return;try{const{data:T,error:U}=await E.from("profiles").select("id, username, level, strength, character_type, user_id").neq("id",e.id).gte("level",Math.max(1,e.level-5)).lte("level",e.level+5).limit(20);if(!U&&T&&T.length>0){const V=T.filter(H=>{const te=Math.abs(H.strength-e.strength),Z=e.strength*.6;return te<=Z});if(V.length>0){const H=V[Math.floor(Math.random()*V.length)];l({...H,is_bot:!1}),a(!1),M.success(`Found opponent: ${H.username}!`);return}}}catch(T){console.log("Final search failed:",T)}const D=C(e);l(D),a(!1),M(`No players available. Fighting ${D.username}!`)},C=D=>{const U=Math.floor(D.strength*.8),V=Math.floor(D.strength*(1+.2)),H=Math.floor(Math.random()*(V-U+1))+U,te=2,Z=Math.max(1,D.level-te),N=D.level+te,j=Math.floor(Math.random()*(N-Z+1))+Z,P=yp[Math.floor(Math.random()*yp.length)],O=["male","female"],z=O[Math.floor(Math.random()*O.length)];return{id:`bot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,username:`${P}${Math.floor(Math.random()*999)+1}`,level:j,strength:H,is_bot:!0,character_type:z}},L=async()=>{if(!e||!o||!s)return;const D=s.leaderboard_position||999,T=e.strength>o.strength;u(T?"win":"lose");try{await E.from("battle_history").insert({winner_id:T?e.id:o.is_bot?null:o.id,loser_id:T?o.is_bot?null:o.id:e.id,winner_strength:T?e.strength:o.strength,loser_strength:T?o.strength:e.strength,is_bot:o.is_bot});let U=s.stars+(T?1:-1),V=!1;if(U>=5){const{data:H}=await E.from("battle_ranks").select("id").gt("level",s.battle_ranks.level).order("level",{ascending:!0}).limit(1).single();H&&(await E.from("player_ranks").update({rank_id:H.id,stars:0,battles_won:s.battles_won+(T?1:0),battles_lost:s.battles_lost+(T?0:1)}).eq("id",s.id),V=!0,M.success("Rank Up! 🎉"))}else if(U<0&&s.battle_ranks.level>1){const{data:H}=await E.from("battle_ranks").select("id").lt("level",s.battle_ranks.level).order("level",{ascending:!1}).limit(1).single();H&&(await E.from("player_ranks").update({rank_id:H.id,stars:4,battles_won:s.battles_won+(T?1:0),battles_lost:s.battles_lost+(T?0:1)}).eq("id",s.id),V=!0,M.error("Rank Down 📉"))}V||await E.from("player_ranks").update({stars:Math.max(0,U),battles_won:s.battles_won+(T?1:0),battles_lost:s.battles_lost+(T?0:1)}).eq("id",s.id),x(),T&&setTimeout(async()=>{await v(e.id);const H=s.leaderboard_position||999;H<D&&(y({from:D,to:H}),p(!0),setTimeout(()=>{p(!1),y(null)},3e3))},1e3)}catch(U){console.error("Error updating battle results:",U),M.error("Failed to update battle results")}},R=()=>{l(null),u(null),a(!1)};return i.jsx("div",{className:"min-h-screen rpg-bg",children:i.jsxs("div",{className:"min-h-screen p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("button",{onClick:()=>b("/lobby"),className:"btn-secondary",children:i.jsx(Lt,{className:"w-5 h-5 mr-2"})}),i.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center",children:[i.jsx("img",{src:I.BATTLE,alt:"Battle",className:"w-8 h-8"}),"Battle"]}),i.jsx("div",{className:"w-32"})]}),i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs("div",{className:"rpg-card p-3 mb-2",children:[!r&&!o&&i.jsxs("div",{className:"text-center py-9",children:[i.jsxs("h2",{className:"text-2xl font-bold text-white mb-8 flex items-center justify-center",children:[i.jsx(mr,{className:"w-8 h-8 mr-2 text-yellow-500"}),"Ready for Battle?"]}),i.jsx("button",{onClick:_,className:"btn-primary btn-lg",children:"Start Battle"})]}),r&&!o&&i.jsxs("div",{className:"text-center py-12",children:[i.jsxs("div",{className:"rpg-card-accent p-8 mb-6",children:[i.jsx("div",{className:"text-2xl font-bold mb-4 text-white",children:d>30?"Searching for Players...":d>10?"Expanding Search...":"Ready..."}),i.jsxs("div",{className:"text-4xl font-bold text-purple-400",children:[d,"s"]})]}),i.jsx("div",{className:"rpg-card-light p-4",children:i.jsx("p",{className:"text-white",children:d>30?"Searching for online players in your level range...":d>10?"Waitting for players to join...":"Ready..."})})]}),o&&i.jsxs("div",{className:"py-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-white text-center mb-8",children:"Battle Ready!"}),i.jsx("div",{className:"rpg-card-light p-4 sm:p-6 mb-8",style:{backgroundImage:`url(${I.battle_bg})`,backgroundSize:"cover",backgroundPosition:"center"},children:i.jsx("div",{className:"bg-black bg-opacity-50 rounded-lg backdrop-blur-sm p-4 sm:p-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:gap-6 md:gap-8 items-center",children:[i.jsx("div",{className:"text-center",children:i.jsxs(W.div,{animate:{x:c==="win"?[0,50,0]:0},transition:{duration:.5},children:[i.jsx("img",{src:I.getCharacterImage(e==null?void 0:e.character_type,m),alt:"Player",className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 object-contain mx-auto mb-3"}),i.jsx("div",{className:"font-semibold text-white text-sm sm:text-base md:text-lg truncate mb-2",children:e==null?void 0:e.username}),i.jsxs("div",{className:"flex items-center justify-center mb-2",children:[i.jsx(fr,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 text-purple-400"}),i.jsxs("span",{className:"font-medium text-sm sm:text-base",children:["LV.",e==null?void 0:e.level]})]}),i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(Ri,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 text-orange-500"}),i.jsx("span",{className:"font-medium text-sm sm:text-base",children:e==null?void 0:e.strength})]})]})}),i.jsx("div",{className:"text-center",children:i.jsxs(W.div,{animate:{x:c==="lose"?[0,-50,0]:0},transition:{duration:.5},children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:(o.is_bot,I.getCharacterImage(o.character_type)),alt:"Opponent",className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 object-contain mx-auto mb-3"}),o.is_bot&&i.jsx("div",{className:"absolute -top-2 -right-2 badge badge-danger text-xs",children:"BOT"})]}),i.jsx("div",{className:"font-semibold text-white text-sm sm:text-base md:text-lg truncate mb-2",children:o.username}),i.jsxs("div",{className:"flex items-center justify-center mb-2",children:[i.jsx(fr,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 text-purple-400"}),i.jsxs("span",{className:"font-medium text-sm sm:text-base",children:["LV.",o.level]})]}),i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(Ri,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 text-orange-500"}),i.jsx("span",{className:"font-medium text-sm sm:text-base",children:o.strength})]})]})})]})})}),!c&&i.jsx("div",{className:"text-center",children:i.jsx("button",{onClick:L,className:"btn-danger btn-lg w-full max-w-xs",children:"Fight!"})})]})]})}),s&&i.jsxs("div",{className:"mb-8",children:[i.jsx("div",{className:"rpg-card mb-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[s.leaderboard_position&&i.jsx(cs,{position:s.leaderboard_position,size:"large"}),i.jsxs("div",{children:[s.leaderboard_position&&i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(iu,{className:"w-4 h-4 text-purple-400"}),i.jsxs("span",{className:"font-medium text-purple-400",children:["Leaderboard: #",s.leaderboard_position]})]}),i.jsx("div",{className:"flex items-center",children:[...Array(5)].map((D,T)=>i.jsx(qe,{className:`w-5 h-5 ${T<s.stars?"text-yellow-400 fill-current":"text-gray-300"}`},T))})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:" p-2 mb-1",children:i.jsxs("span",{className:"font-semibold text-green-600",children:["Win: ",s.battles_won]})}),i.jsx("div",{className:" p-2",children:i.jsxs("span",{className:"font-semibold text-red-600",children:["Lose: ",s.battles_lost]})})]})]})}),s.leaderboard_position&&i.jsx(_4,{currentPosition:s.leaderboard_position,wins:s.battles_won,losses:s.battles_lost})]}),i.jsx(De,{children:c&&i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"rpg-card max-w-md w-full mx-4 text-center",children:[i.jsx("div",{className:`text-4xl font-bold mb-6 ${c==="win"?"text-green-600":"text-red-600"}`,children:c==="win"?"Victory!":"Defeated!"}),i.jsx("div",{className:"mb-6",children:c==="win"?i.jsxs("div",{className:"rpg-card-accent p-6",children:[i.jsx(mr,{className:"w-16 h-16 mx-auto mb-2 text-yellow-500"}),i.jsx("div",{className:"font-bold text-white",children:"+1 Star"})]}):i.jsxs("div",{className:"rpg-card-light p-6",children:[i.jsx(Zt,{className:"w-16 h-16 mx-auto mb-2 text-gray-500"}),i.jsx("div",{className:"font-bold text-white",children:"-1 Star"})]})}),i.jsx("button",{onClick:R,className:"btn-primary w-full",children:"Continue"})]})})}),i.jsx(De,{children:f&&w&&i.jsx(W.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:i.jsxs(W.div,{initial:{y:50},animate:{y:0},className:"rpg-card-accent p-8 text-center max-w-md",children:[i.jsx(W.div,{animate:{rotate:[0,360]},transition:{duration:2,repeat:1/0,ease:"linear"},className:"mb-4",children:i.jsx(We,{className:"w-16 h-16 mx-auto text-yellow-500"})}),i.jsx("h2",{className:"text-3xl font-bold mb-4 text-white",children:"Rank Up!"}),i.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx(cs,{position:w.from,size:"medium"}),i.jsxs("div",{className:"text-sm font-medium mt-1",children:["#",w.from]})]}),i.jsx(W.div,{animate:{x:[0,10,0]},transition:{duration:1,repeat:1/0},children:i.jsx(iu,{className:"w-8 h-8 text-green-500"})}),i.jsxs("div",{className:"text-center",children:[i.jsx(cs,{position:w.to,size:"medium"}),i.jsxs("div",{className:"text-sm font-medium mt-1",children:["#",w.to]})]})]}),i.jsx("p",{className:"font-semibold text-lg text-white",children:"New Leaderboard Position!"})]})})})]})})}function X4(){const[e,t]=g.useState(null),[s,n]=g.useState(!0),r=Ge(),{availableTitles:a,equippedTitle:o,loading:l,equipTitle:c,unequipTitle:u,loadTitles:d}=Xy((e==null?void 0:e.id)||null);g.useEffect(()=>{h()},[]);const h=async()=>{try{const{data:{user:w}}=await E.auth.getUser();if(!w){r("/login");return}const{data:y,error:b}=await E.from("profiles").select("id, username, equipped_title_id").eq("user_id",w.id).single();if(b)throw b;t(y)}catch{M.error("Failed to load profile")}finally{n(!1)}},f=async w=>{await c(w)},p=async()=>{await u()};return s?i.jsx("div",{className:"min-h-screen rpg-bg flex items-center justify-center",children:i.jsxs("div",{className:"rpg-card p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),i.jsx("div",{className:"text-xl font-semibold text-white",children:"Loading Titles..."})]})}):e?i.jsx("div",{className:"min-h-screen rpg-bg",children:i.jsxs("div",{className:"min-h-screen p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("button",{onClick:()=>r("/lobby"),className:"btn-secondary",children:[i.jsx(Lt,{className:"w-5 h-5 mr-2"}),"Back to Lobby"]}),i.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center",children:[i.jsx(We,{className:"w-6 h-6 mr-2 text-yellow-500"}),"Title Manager"]}),i.jsx("div",{className:"w-32"})]}),i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"rpg-card mb-8",children:[i.jsxs("h2",{className:"text-2xl font-bold text-white text-center mb-6 flex items-center justify-center",children:[i.jsx(qe,{className:"w-8 h-8 mr-2 text-yellow-500"}),"Title Preview"]}),i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"rpg-card-accent p-6 inline-block",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"How you appear to others:"}),i.jsxs("div",{className:"flex items-center justify-center gap-3 text-white",children:[i.jsx("span",{className:"text-2xl font-bold",children:e.username}),o&&i.jsx(Vt,{title:o,size:"large",showIcon:!0})]}),!o&&i.jsx("p",{className:"text-gray-300 font-medium mt-2",children:"No title equipped"})]})})]}),i.jsx("div",{className:"rpg-card",children:i.jsx(j4,{availableTitles:a,equippedTitle:o,onEquipTitle:f,onUnequipTitle:p,loading:l})}),i.jsxs("div",{className:"rpg-card mt-8",children:[i.jsxs("h3",{className:"text-xl font-bold text-white mb-6 text-center flex items-center justify-center",children:[i.jsx($N,{className:"w-6 h-6 mr-2 text-purple-500"}),"Title Rarity Guide"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"rpg-card-light p-4 mb-3",children:[i.jsx(qe,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),i.jsx("h4",{className:"font-bold text-white",children:"Common"}),i.jsx("p",{className:"text-xs text-gray-300",children:"Easy to obtain"})]})}),i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"rpg-card-light p-4 mb-3",children:[i.jsx(ri,{className:"w-8 h-8 mx-auto mb-2 text-purple-400"}),i.jsx("h4",{className:"font-bold text-white",children:"Rare"}),i.jsx("p",{className:"text-xs text-gray-300",children:"Requires effort"})]})}),i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"rpg-card-light p-4 mb-3",children:[i.jsx(fr,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),i.jsx("h4",{className:"font-bold text-white",children:"Epic"}),i.jsx("p",{className:"text-xs text-gray-300",children:"Challenging"})]})}),i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"rpg-card-light p-4 mb-3",children:[i.jsx(We,{className:"w-8 h-8 mx-auto mb-2 text-yellow-400"}),i.jsx("h4",{className:"font-bold text-white",children:"Legendary"}),i.jsx("p",{className:"text-xs text-gray-300",children:"Ultimate achievement"})]})})]})]})]}),i.jsxs("div",{className:"mt-8 flex justify-center space-x-2",children:[i.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),i.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),i.jsx("div",{className:"w-2 h-2 bg-purple-600 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})}):null}const e3=(e,t,s)=>{const n=e.toLowerCase().trim();console.log("Dungeon Name:",e,"Normalized:",n);const a=(o=>o.includes("inferno")||o.includes("fire")||o.includes("flame")?"inferno":o.includes("crystal")||o.includes("ice")||o.includes("frozen")?"crystal":o.includes("leafy")||o.includes("forest")||o.includes("nature")||o.includes("green")?"leafy":o.includes("machine")||o.includes("tech")||o.includes("robot")||o.includes("cyber")?"machine":"inferno")(n);if(console.log("Detected Dungeon Type:",a),s)switch(a){case"inferno":return{npcImage:I.npc_infernoBoss,background:I.inferno_bg1};case"crystal":return{npcImage:I.npc_crystalBoss,background:I.crystal_bg1};case"leafy":return{npcImage:I.npc_leafyBoss,background:I.leafy_bg1};case"machine":return{npcImage:I.npc_machineBoss,background:I.machine_bg1};default:return{npcImage:I.npc_infernoBoss,background:I.inferno_bg1}}else switch(a){case"inferno":return{npcImage:[I.npc_inferno1,I.npc_inferno2,I.npc_inferno3,I.npc_inferno4][t-1]||I.npc_inferno1,background:I.inferno_bg1};case"crystal":return{npcImage:[I.npc_crystal1,I.npc_crystal2,I.npc_crystal3,I.npc_crystal4][t-1]||I.npc_crystal1,background:I.crystal_bg1};case"leafy":return{npcImage:[I.npc_leafy1,I.npc_leafy2,I.npc_leafy3,I.npc_leafy4][t-1]||I.npc_leafy1,background:I.leafy_bg1};case"machine":return{npcImage:[I.npc_machine1,I.npc_machine2,I.npc_machine3,I.npc_machine4][t-1]||I.npc_machine1,background:I.machine_bg1};default:return{npcImage:I.npc_inferno1,background:I.inferno_bg1}}};function t3(){const{dungeonId:e}=B0(),t=Ge(),[s,n]=g.useState(null),[r,a]=g.useState([]),[o,l]=g.useState(null),[c,u]=g.useState(1),[d,h]=g.useState(100),[f]=g.useState(100),[p,w]=g.useState(null),[y,b]=g.useState(!1),[m,x]=g.useState(!1),[v,_]=g.useState("playing"),[k,S]=g.useState(!1),[A,C]=g.useState(null),[L,R]=g.useState(!0),[D,T]=g.useState(""),{equippedCostume:U}=xs((s==null?void 0:s.id)||null),V=5,H=50,te=10,Z=100,N=35;g.useEffect(()=>{j(),P()},[e]),g.useEffect(()=>{c<=V&&v==="playing"&&o&&z()},[c,v,o]);const j=async()=>{try{const{data:{user:Q}}=await E.auth.getUser();if(!Q){t("/login");return}const{data:re,error:Pe}=await E.from("profiles").select("id, username, character_type, strength, ztoken").eq("user_id",Q.id).single();if(Pe)throw Pe;n(re);const{data:K,error:we}=await E.from("dungeon_types").select("*").eq("id",e).eq("is_active",!0).single();if(we)throw we;if(l(K),re.ztoken<K.cost_ztoken){M.error("Not enough ZToken to enter this dungeon!"),t("/lobby");return}const{error:he}=await E.from("profiles").update({ztoken:re.ztoken-K.cost_ztoken}).eq("id",re.id);if(he)throw he;n(pe=>pe?{...pe,ztoken:pe.ztoken-K.cost_ztoken}:null)}catch(Q){console.error("Error loading game data:",Q),M.error("Failed to load dungeon data"),t("/lobby")}finally{R(!1)}},P=async()=>{try{const{data:{user:Q}}=await E.auth.getUser();if(!Q)return;const{data:re}=await E.from("profiles").select("id").eq("user_id",Q.id).single();if(!re)return;const{data:Pe,error:K}=await E.from("player_inventory").select(`
          id,
          item_id,
          quantity,
          game_items (
            name,
            image_url,
            type
          )
        `).eq("profile_id",re.id).eq("game_items.type","potion");if(K)throw K;a(Pe||[])}catch(Q){console.error("Error loading potions:",Q)}},O=async Q=>{var K,we;if(!s||d>=f||v!=="playing")return;const re=((K=Q.game_items)==null?void 0:K.name)==="Big Potion"?50:15,Pe=Math.min(f,d+re);try{if(Q.quantity<=1){const{error:he}=await E.from("player_inventory").delete().eq("id",Q.id);if(he)throw he}else{const{error:he}=await E.from("player_inventory").update({quantity:Q.quantity-1}).eq("id",Q.id);if(he)throw he}h(Pe),M.success(`Used ${(we=Q.game_items)==null?void 0:we.name}! Healed ${re} HP`),P()}catch{M.error("Failed to use potion")}},z=()=>{if(!o)return;const Q=c===V,re=e3(o.name,c,Q),Pe={name:Q?`${o.name} Boss`:`${o.name} Guardian`,hp:Q?Z:H,maxHp:Q?Z:H,attack:Q?N:te,isBoss:Q,imageUrl:re.npcImage};w(Pe),T(re.background)},G=async()=>{if(!s||!p||y||m||v!=="playing")return;b(!0),x(!0);const Q=s.strength,re=p.attack,Pe=Math.max(0,p.hp-Q),K=Math.max(0,d-re);await new Promise(pe=>setTimeout(pe,800)),w(pe=>pe?{...pe,hp:Pe}:null),h(K),b(!1),x(!1),await new Promise(pe=>setTimeout(pe,500));const we=Pe<=0,he=K<=0;if(we&&he){M.success("Victory! You defeated the enemy with your final strike!"),c<V?(u(pe=>pe+1),h(f),M.success(`Round ${c} completed! HP restored!`)):(_("victory"),await ae(!0));return}if(we){c<V?(u(pe=>pe+1),M.success(`Round ${c} completed!`)):(_("victory"),await ae(!0));return}if(he){_("defeat"),await ae(!1);return}},ae=async Q=>{if(!(!s||!o))try{const{data:re,error:Pe}=await E.rpc("complete_dungeon",{player_profile_id:s.id,dungeon_type_id:o.id,rounds_completed:c,is_victory:Q});if(Pe)throw Pe;Q&&(C(re),S(!0),re.title_awarded&&M.success(`New title unlocked: ${re.title_awarded}!`))}catch(re){console.error("Error completing dungeon:",re),M.error("Failed to save dungeon results")}},de=()=>{t("/lobby")};return L?i.jsx("div",{className:"min-h-screen rpg-bg flex items-center justify-center",children:i.jsxs("div",{className:"rpg-card p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),i.jsx("div",{className:"text-xl font-semibold text-white",children:"Loading Dungeon..."})]})}):!s||!o?null:i.jsx("div",{className:"min-h-screen rpg-bg",children:i.jsxs("div",{className:"min-h-screen p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("button",{onClick:de,className:"btn-secondary w-10 h-10 flex items-center justify-center",children:i.jsx(Lt,{className:"w-5 h-5"})}),i.jsxs("h2",{className:"flex-1 text-center font-bold text-white text-sm whitespace-nowrap overflow-hidden text-ellipsis px-2",children:[o.name," - Round ",c,"/",V]}),i.jsx("div",{className:"w-10 h-10"})]}),i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("div",{className:"relative w-full max-w-4xl mx-auto rounded-xl overflow-hidden mb-8 p-4",style:{backgroundImage:`url(${D})`,backgroundSize:"cover",backgroundPosition:"center"},children:i.jsxs("div",{className:"rpg-card-light w-full max-w-md mx-auto bg-black/60 backdrop-blur-sm rounded-xl p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("div",{className:"flex flex-col items-center w-1/2",children:i.jsx(W.div,{animate:{x:y?[0,20,0]:0},transition:{duration:.5},className:"mb-2",children:i.jsx("img",{src:I.getCharacterImage(s.character_type,U),alt:"Player",className:"w-20 h-20 object-contain"})})}),i.jsx("div",{className:"flex flex-col items-center w-1/2",children:i.jsx(W.div,{animate:{x:m?[0,-20,0]:0,opacity:(p==null?void 0:p.hp)===0?0:1},transition:{duration:.5},className:`mb-2 ${p!=null&&p.isBoss?"scale-110 border-red-300 rpg-glow-red":""}`,children:i.jsx("img",{src:(p==null?void 0:p.imageUrl)||o.image_url,alt:"Enemy",className:"w-20 h-20 object-contain rounded-lg"})})})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("div",{className:"w-1/2 pr-2",children:[i.jsxs("div",{className:"flex justify-between text-xs text-white mb-1",children:[i.jsxs("span",{children:["HP: ",d,"/",f]}),i.jsxs("span",{children:["⚔ ",s.strength]})]}),i.jsxs("div",{className:"h-2 bg-gray-700 rounded relative overflow-hidden",children:[i.jsx(W.div,{className:`h-2 rounded ${d>60?"bg-green-500":d>30?"bg-yellow-500":"bg-red-500"}`,animate:{width:`${d/f*100}%`},transition:{duration:.5}}),m&&i.jsx(W.div,{initial:{opacity:0},animate:{opacity:[0,.8,0]},transition:{duration:.8},className:"absolute inset-0 bg-red-500 rounded"})]})]}),i.jsxs("div",{className:"w-1/2 pl-2",children:[i.jsxs("div",{className:"flex justify-between text-xs text-white mb-1",children:[i.jsxs("span",{children:["HP: ",p==null?void 0:p.hp,"/",p==null?void 0:p.maxHp]}),i.jsxs("span",{children:["⚔ ",p==null?void 0:p.attack]})]}),i.jsxs("div",{className:"h-2 bg-gray-700 rounded relative overflow-hidden",children:[i.jsx(W.div,{className:"h-2 bg-red-500 rounded",animate:{width:`${((p==null?void 0:p.hp)||0)/((p==null?void 0:p.maxHp)||1)*100}%`},transition:{duration:.5}}),y&&i.jsx(W.div,{initial:{opacity:0},animate:{opacity:[0,.8,0]},transition:{duration:.8},className:"absolute inset-0 bg-blue-500 rounded"})]})]})]})]})}),i.jsx("div",{className:"w-full px-4 pb-4 flex justify-center",children:v==="playing"?i.jsx("button",{onClick:G,disabled:y||m||d<=0,className:`btn-danger w-full max-w-xs transition-all duration-300 ${y&&m?"scale-110 shadow-lg":""}`,children:y&&m?"CLASHING...":"ATTACK"}):i.jsx("button",{onClick:de,className:"btn-primary w-full max-w-xs",children:"Return to Lobby"})})]}),i.jsx("div",{className:"max-w-4xl mx-auto mb-4",children:i.jsxs("div",{className:"rpg-card-light p-3",children:[i.jsxs("h3",{className:"text-sm font-semibold text-white mb-2 flex items-center",children:[i.jsx(UN,{className:"w-4 h-4 mr-2 text-green-400"}),"Potions"]}),i.jsx("div",{className:"flex gap-2 overflow-x-auto",children:r.length>0?r.filter(Q=>Q.game_items!==null).map(Q=>i.jsxs("button",{onClick:()=>O(Q),disabled:d>=f||v!=="playing",className:"flex-shrink-0 rpg-card-light p-2 hover:shadow-md transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx("img",{src:Q.game_items.image_url,alt:Q.game_items.name,className:"w-6 h-6 mx-auto mb-1"}),i.jsx("p",{className:"text-xs font-medium text-white text-center",children:Q.game_items.name==="Big Potion"?"Big":"Small"}),i.jsxs("p",{className:"text-xs text-gray-300 text-center",children:["x",Q.quantity]})]},Q.id)):i.jsx("p",{className:"text-gray-400 text-xs",children:"No potions available"})})]})}),i.jsx(De,{children:v!=="playing"&&i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rpg-card max-w-md w-full mx-4 text-center",children:[i.jsx("div",{className:`text-4xl font-bold mb-6 ${v==="victory"?"text-green-600":"text-red-600"}`,children:v==="victory"?"Victory!":"Defeat!"}),v==="victory"&&A&&i.jsxs("div",{className:"space-y-4 mb-4 w-full max-w-sm mx-auto",children:[i.jsxs("div",{className:"rpg-card-accent px-4 py-3 text-center",children:[i.jsx(mr,{className:"w-12 h-12 mx-auto mb-1 text-yellow-500"}),i.jsx("div",{className:"font-semibold text-white text-base",children:"Dungeon Completed!"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"rpg-card-light flex items-center justify-center p-2 text-sm",children:[i.jsx("img",{src:I.EXP,alt:"EXP",className:"w-6 h-5"}),i.jsxs("span",{className:"font-semibold",children:["+",A.exp_gained," EXP"]})]}),i.jsxs("div",{className:"rpg-card-light flex items-center justify-center p-2 text-sm",children:[i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-5 h-5 mr-1"}),i.jsxs("span",{className:"font-semibold",children:["+",A.zgold_gained.toLocaleString()]})]}),i.jsxs("div",{className:"rpg-card-light col-span-2 flex items-center justify-center p-2 text-sm",children:[i.jsx("img",{src:I.ZTOKEN,alt:"ZToken",className:"w-5 h-5 mr-1"}),i.jsxs("span",{className:"font-semibold",children:["+",A.ztoken_gained]})]})]}),A.title_awarded&&i.jsxs("div",{className:"rpg-card-accent text-center px-4 py-3",children:[i.jsx(We,{className:"w-10 h-10 mx-auto mb-1 text-yellow-400"}),i.jsx("div",{className:"text-yellow-400 font-bold text-sm mb-1",children:"New Title Unlocked!"}),i.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-600 text-gray-900 px-3 py-1 rounded-lg font-bold text-sm",children:A.title_awarded})]}),i.jsxs("div",{className:"rpg-card-light p-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("span",{className:"font-semibold text-white",children:["Total Completions: ",A.completion_count]}),i.jsxs("span",{className:"text-xs text-gray-300",children:[Math.min(A.completion_count,100),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(A.completion_count,100)}%`}})})]})]}),v==="defeat"&&i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"rpg-card-light p-6",children:[i.jsx(Zt,{className:"w-16 h-16 mx-auto mb-2 text-gray-500"}),i.jsx("div",{className:"font-bold text-white",children:"No Rewards"}),i.jsx("div",{className:"text-gray-300 text-sm mt-2",children:"You must complete all 5 rounds to earn rewards"})]})}),i.jsx("button",{onClick:de,className:"btn-primary w-full",children:"Return to Lobby"})]})})})]})})}function s3({isOpen:e,profile:t,cardRewards:s,participants:n,onComplete:r,markRewardsAsClaimed:a,roomUuid:o}){const[l,c]=g.useState([]),[u,d]=g.useState(!1),[h,f]=g.useState([]),[p,w]=g.useState(0),y=2;g.useEffect(()=>{if(!n||n.length===0)return;n.every(A=>A.claimed_rewards_at)&&(console.log("[RaidRewards] All players claimed rewards. Returning to lobby."),o&&E.channel(`raid-rewards:${o}`).send({type:"broadcast",event:"rewards-complete",payload:{message:"All rewards claimed! Returning to lobby..."}}),setTimeout(()=>{r()},1500))},[n,r,o]),g.useEffect(()=>{const S=n.find(A=>A.profile_id===(t==null?void 0:t.id));S&&S.claimed_rewards_at&&!u&&(d(!0),console.log(`[RaidRewards] Player ${t==null?void 0:t.username} has already claimed rewards.`))},[n,t,u]),g.useEffect(()=>{e&&o&&(console.log(`[RaidRewards] Modal opened for room ${o}. Broadcasting to all players...`),E.channel(`raid-rewards:${o}`).send({type:"broadcast",event:"show-rewards",payload:{message:"Victory! Claim your rewards!",roomUuid:o}}))},[e,o]);const b=S=>{u||l.length>=y||c(A=>A.includes(S)?A.filter(C=>C!==S):[...A,S])},m=async()=>{if(l.length!==y||u)return;if(console.log(`[RaidRewards] ${t==null?void 0:t.username} confirming card selection:`,l),await a()){d(!0);const A=s.filter(L=>l.includes(L.id));f(A),o&&E.channel(`raid-rewards:${o}`).send({type:"broadcast",event:"player-claimed",payload:{playerId:t==null?void 0:t.id,playerName:t==null?void 0:t.username,message:`${t==null?void 0:t.username} has claimed their rewards!`}}),x(`${t==null?void 0:t.username} claimed their rewards!`),w(5);const C=setInterval(()=>{w(L=>L<=1?(clearInterval(C),0):L-1)},1e3)}},x=S=>{console.log(`[RaidRewards] ${S}`)},v=S=>{switch(S){case"raid_ticket":return i.jsx(We,{className:"w-8 h-8 text-red-500"});case"ztoken":return i.jsx("img",{src:I.ZTOKEN,alt:"ZToken",className:"w-8 h-8"});case"exp":return i.jsx(qe,{className:"w-8 h-8 text-yellow-500"});case"zgold":return i.jsx("img",{src:I.ZGOLD,alt:"ZGold",className:"w-8 h-8"});default:return i.jsx(Kf,{className:"w-8 h-8 text-purple-500"})}},_=S=>{switch(S){case"raid_ticket":return"from-red-500 to-red-700";case"ztoken":return"from-blue-500 to-blue-700";case"exp":return"from-yellow-500 to-yellow-700";case"zgold":return"from-green-500 to-green-700";default:return"from-purple-500 to-purple-700"}},k=S=>{switch(S.type){case"raid_ticket":return`${S.value} Raid Ticket`;case"ztoken":return`${S.value} ZToken`;case"exp":return`${S.value} EXP`;case"zgold":return`${S.value.toLocaleString()} ZGold`;default:return"Mystery Reward"}};return e?i.jsx(De,{children:i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-[60]",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rpg-card w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"🎉 RAID REWARDS 🎉"}),i.jsxs("p",{className:"text-gray-300",children:["Select ",y," cards to claim your prize."]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-3 mb-6",children:s.map(S=>i.jsx(W.div,{className:`aspect-square cursor-pointer transition-all rounded-lg border-2 flex items-center justify-center relative overflow-hidden ${l.includes(S.id)?"border-yellow-400 scale-105 shadow-lg":"border-purple-400"} ${u?"opacity-50 cursor-not-allowed":"hover:scale-105"}`,onClick:()=>b(S.id),children:i.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-purple-600 to-purple-800",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/20 to-purple-900/20"}),i.jsx(Kf,{className:"w-8 h-8 text-purple-200 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"}),i.jsx("div",{className:"absolute bottom-1 right-1 text-xs font-bold text-purple-200",children:S.id})]})},S.id))}),!u&&i.jsx("div",{className:"text-center",children:i.jsxs("button",{onClick:m,disabled:l.length!==y,className:"btn-primary btn-lg",children:[i.jsx(mr,{className:"w-5 h-5 mr-2"}),"Confirm Selection (",l.length,"/",y,")"]})}),u&&h.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white text-center mb-4",children:"Your Claimed Rewards!"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h.map((S,A)=>i.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.2},className:`rpg-card-accent p-4 text-center bg-gradient-to-br ${_(S.type)}`,children:[i.jsx("div",{className:"mb-3",children:v(S.type)}),i.jsx("h4",{className:"font-bold text-white text-lg mb-1",children:k(S)}),i.jsxs("p",{className:"text-gray-200 text-sm capitalize",children:[S.type.replace("_"," ")," Reward"]})]},S.id))}),p>0&&i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("div",{className:"rpg-card-light p-3",children:[i.jsx(bn,{className:"w-6 h-6 mx-auto mb-2 text-yellow-400 animate-pulse"}),i.jsxs("p",{className:"text-white font-semibold",children:["Returning to lobby in ",p," seconds..."]}),i.jsx("button",{onClick:r,className:"btn-primary btn-sm mt-2",children:"Return Now"})]})})]})]}),i.jsxs("div",{className:"rpg-card-light",children:[i.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center",children:[i.jsx(Bt,{className:"w-5 h-5 mr-2"}),"Team Status"]}),i.jsx("div",{className:"space-y-3",children:n.map(S=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("span",{className:`font-semibold ${S.profile_id===(t==null?void 0:t.id)?"text-purple-400":"text-white"}`,children:[S.profiles.username,S.profile_id===(t==null?void 0:t.id)&&" (You)"]}),i.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Slot ",S.slot_number," • Level ",S.profiles.level]})]}),S.claimed_rewards_at?i.jsxs("div",{className:"flex items-center gap-2 text-green-400",children:[i.jsx(su,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm",children:"Claimed"})]}):i.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 animate-pulse",children:[i.jsx(bn,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm",children:"Selecting..."})]})]},S.id))}),i.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-600",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-sm text-gray-300",children:"Progress:"}),i.jsxs("span",{className:"text-sm font-semibold text-yellow-400",children:[n.filter(S=>S.claimed_rewards_at).length,"/",n.length," Claimed"]})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-yellow-600 h-2 rounded-full transition-all duration-500",style:{width:`${n.filter(S=>S.claimed_rewards_at).length/n.length*100}%`}})})]}),u&&i.jsxs("div",{className:"mt-6 text-center rpg-card-accent p-4",children:[i.jsx(su,{className:"w-8 h-8 mx-auto mb-2 text-green-400"}),i.jsx("h4",{className:"font-bold text-white mb-2",children:"Rewards Claimed!"}),i.jsx("p",{className:"text-gray-300 text-sm",children:"Waiting for teammates to finish selecting..."}),p>0&&i.jsxs("p",{className:"text-yellow-400 text-sm mt-2 font-semibold",children:["Auto-return in ",p,"s"]})]})]})]})]})})}):null}function n3(){var N;const{roomUuid:e}=B0(),t=Ge(),[s,n]=g.useState(null),[r,a]=g.useState(!0),{currentRoom:o,participants:l,loadRoomData:c,markRewardsAsClaimed:u}=ev((s==null?void 0:s.id)||null),[d,h]=g.useState(null),[f,p]=g.useState(!1),[w,y]=g.useState(!1),[b,m]=g.useState("loading"),[x,v]=g.useState(null),[_,k]=g.useState([]),{equippedCostume:S}=xs((s==null?void 0:s.id)||null),A=g.useCallback(()=>{t("/lobby")},[t]),C=g.useMemo(()=>b==="victory"&&x?i.jsx(s3,{isOpen:!0,profile:s,cardRewards:x,participants:l,onComplete:A,markRewardsAsClaimed:u,roomUuid:o==null?void 0:o.room_uuid}):null,[b,x,s,l,A,u,o==null?void 0:o.room_uuid]),L=[{name:"Shadow Minion",hp:150,attack:25},{name:"Dark Guardian",hp:200,attack:35},{name:"Shadow Harbinger",hp:300,attack:50}];g.useEffect(()=>{(async()=>{try{const{data:{user:P}}=await E.auth.getUser();if(!P){t("/login");return}const{data:O,error:z}=await E.from("profiles").select("id, username, character_type, strength").eq("user_id",P.id).single();if(z)throw z;n(O)}catch(P){console.error("Error fetching profile:",P),M.error("Failed to load your profile."),t("/lobby")}})()},[t]),g.useEffect(()=>{s&&e&&(console.log(`[Raid Room: ${e}] Profile loaded. Loading room data.`),c(e).then(()=>{a(!1)}))},[s,e,c]),g.useEffect(()=>()=>{v(null),m("loading"),p(!1),y(!1),k([]),h(null)},[e]),g.useEffect(()=>{e&&(v(null),m("loading"),p(!1),y(!1),k([]),h(null))},[e]),g.useEffect(()=>{if(r){m("loading");return}if(!o){M.error("Raid room not found."),t("/lobby");return}switch(o.status){case"in_progress":m("playing"),(!d||o.current_round!==d.round)&&(R(o),y(!1)),d&&o.current_round===d.round&&h(P=>P?{...P,hp:o.boss_hp||P.hp,maxHp:o.boss_max_hp||P.maxHp}:null);break;case"completed":const j=l.filter(P=>P.is_alive);j.length>0&&b!=="victory"?(console.log("[RaidGame] VICTORY! Setting game state to 'victory'"),m("victory"),U(!0)):j.length===0&&b!=="defeat"&&(console.log("[RaidGame] DEFEAT! Setting game state to 'defeat'"),m("defeat"),U(!1));break;case"waiting":M.error("Raid has not started yet."),t("/lobby");break;default:m("loading")}},[o==null?void 0:o.status,o==null?void 0:o.current_round,o==null?void 0:o.boss_hp,o==null?void 0:o.boss_max_hp,l,r,t,e,b]);const R=j=>{console.log(`[Raid Room: ${e}] Generating boss for round ${j.current_round}, HP: ${j.boss_hp}/${j.boss_max_hp}`);const P=L[j.current_round-1],O=1+(j.raid_maps.difficulty_level-1)*.5,z=j.boss_hp!==null?j.boss_hp:Math.floor(P.hp*O),G=j.boss_max_hp!==null?j.boss_max_hp:Math.floor(P.hp*O),ae={name:P.name,hp:z,maxHp:G,attack:Math.floor(P.attack*O),round:j.current_round,imageUrl:j.raid_maps.boss_image_url||"https://raw.githubusercontent.com/AquaCasaster/db_image/main/1752079455935-tzjifn.png"};h(ae),D(`Round ${j.current_round}: ${ae.name} appears! (${ae.hp}/${ae.maxHp} HP)`)},D=j=>{k(P=>[...P.slice(-4),j])},T=async()=>{if(!(!s||!o||f||!te())){console.log(`[Raid Room: ${e}] ${s.username} is attacking boss! Current turn: ${o.current_turn}`),p(!0);try{const{data:j,error:P}=await E.rpc("handle_raid_attack",{p_room_uuid:o.room_uuid,p_profile_id:s.id});if(P)throw console.error("Attack error:",P),P;if(j&&!j.success){M.error(j.message);return}j&&j.success&&(console.log(`[Raid Room: ${e}] Attack result:`,j),D(`${s.username} deals ${j.player_damage} damage!`),j.boss_damage&&D(`Boss counter-attacks for ${j.boss_damage} damage!`),j.round_completed&&(D(`Round ${j.current_round} completed!`),j.next_round&&(D(`Advancing to Round ${j.next_round}...`),y(!0),setTimeout(()=>{y(!1)},2e3))),j.raid_completed&&D("RAID COMPLETED! Victory!"),j.raid_failed&&D("All players defeated! RAID failed!"),j.player_defeated&&D(`${s.username} was defeated!`))}catch(j){console.error("Error during attack:",j),M.error("An error occurred during the attack.")}finally{p(!1)}}},U=g.useCallback(async j=>{if(!o){console.error("[RaidGame] completeRaid: currentRoom is null");return}if(x){console.log("[RaidGame] completeRaid: Rewards already generated, skipping...");return}console.log(`[RaidGame] completeRaid called - Victory: ${j}, Room: ${o.room_uuid}`);try{if(j){console.log("[RaidGame] Generating rewards for victory...");const P=V();v(P);try{const{data:O,error:z}=await E.rpc("complete_raid",{p_room_uuid:o.room_uuid,p_is_victory:!0,p_rounds_completed:o.current_round});z?console.warn("[RaidGame] complete_raid RPC warning (non-critical):",z):O&&O.success&&console.log("[RaidGame] Database updated successfully")}catch(O){console.warn("[RaidGame] RPC call failed (non-critical):",O)}}else console.log("[RaidGame] Defeat! Auto-returning to lobby in 3 seconds..."),setTimeout(()=>{t("/lobby")},3e3)}catch(P){console.error("Error in completeRaid:",P),M.error("Failed to complete raid"),setTimeout(()=>{t("/lobby")},2e3)}},[o,x,t]),V=()=>{console.log("[RaidGame] Generating fallback rewards...");const j=["raid_ticket","ztoken","exp","zgold"],P=[];for(let O=1;O<=6;O++){const z=j[Math.floor(Math.random()*j.length)];let G=100;switch(z){case"raid_ticket":G=1;break;case"ztoken":G=50+Math.floor(Math.random()*100);break;case"exp":G=200+Math.floor(Math.random()*300);break;case"zgold":G=500+Math.floor(Math.random()*1e3);break}P.push({id:O,type:z,value:G,claimed:!1})}return console.log("[RaidGame] Fallback rewards generated:",P),P},H=()=>{if(!o||!l.length)return null;const j=l.filter(O=>O.is_alive).sort((O,z)=>O.slot_number-z.slot_number);if(j.length===0)return null;const P=o.current_turn%j.length;return j[P]},te=()=>{const j=H();return(j==null?void 0:j.profile_id)===(s==null?void 0:s.id)};if(b==="loading"||!s||!o)return i.jsx("div",{className:"min-h-screen rpg-bg flex items-center justify-center",children:i.jsxs("div",{className:"rpg-card p-8 text-center max-w-md",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Loading Battlefield..."}),i.jsx("p",{className:"text-gray-300 mt-2",children:"Synchronizing with the team..."})]})});const Z=H();return i.jsx("div",{className:"min-h-screen rpg-bg",children:i.jsxs("div",{className:"min-h-screen p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("button",{onClick:A,className:"btn-secondary",children:i.jsx(Lt,{className:"w-5 h-5 mr-2"})}),i.jsxs("h2",{className:"text-xl font-bold text-white text-center",children:[o.raid_maps.name," - Round ",o.current_round,"/3"]}),i.jsx("div",{className:"w-32"})]}),b==="playing"&&Z&&i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:`rpg-card-accent p-3 text-center ${te()?"rpg-glow border-2 border-yellow-400":""}`,children:[i.jsx("h3",{className:"font-bold text-white",children:te()?"🎯 YOUR TURN!":`${Z.profiles.username}'s Turn`}),i.jsx("p",{className:"text-gray-300 text-sm",children:te()?"Click ATTACK to strike the boss!":"Wait for your turn..."}),i.jsxs("p",{className:"text-purple-300 text-xs mt-1",children:["Round ",o.current_round,"/3 • Turn ",o.current_turn+1]})]})}),i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx("div",{className:"relative w-full rounded-xl overflow-hidden mb-6 p-6",style:{backgroundImage:`url(${o.raid_maps.background_url})`,backgroundSize:"cover",backgroundPosition:"center"},children:i.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-xl p-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-8 items-center",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center",children:[i.jsx(Bt,{className:"w-5 h-5 mr-2 text-blue-400"}),"Team"]}),i.jsx("div",{className:"space-y-3",children:l.map(j=>i.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${j.is_alive?(Z==null?void 0:Z.profile_id)===j.profile_id?"bg-yellow-900/30 border border-yellow-500/50 shadow-md":"bg-green-900/30 border border-green-500/30":"bg-red-900/30 border border-red-500/30 opacity-50"}`,children:[i.jsx("img",{src:I.getCharacterImage(j.profiles.character_type,j.profile_id===s.id?S:null),alt:j.profiles.username,className:"w-12 h-12 object-contain"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"font-semibold text-white text-sm flex items-center gap-2",children:[j.profiles.username,j.profile_id===s.id&&i.jsx("span",{className:"text-purple-400",children:"(You)"}),(Z==null?void 0:Z.profile_id)===j.profile_id&&i.jsx("span",{className:"text-yellow-400",children:"⚡"})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Nd,{className:"w-3 h-3 text-red-400"}),i.jsxs("span",{children:[j.current_hp,"/",j.max_hp]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ri,{className:"w-3 h-3 text-orange-400"}),i.jsx("span",{children:j.profiles.strength})]})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-1",children:i.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${j.current_hp>60?"bg-green-500":j.current_hp>30?"bg-yellow-500":"bg-red-500"}`,style:{width:`${j.current_hp/j.max_hp*100}%`}})})]})]},j.id))})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center justify-center",children:[i.jsx(Nx,{className:"w-5 h-5 mr-2 text-red-400"}),d==null?void 0:d.name]}),d&&i.jsxs("div",{children:[i.jsx(W.img,{src:d.imageUrl,alt:d.name,className:"w-32 h-32 object-contain mx-auto mb-4 rounded-lg border-2 border-red-400",animate:{scale:f?[1,1.1,1]:1},transition:{duration:.5}}),i.jsxs("div",{className:"rpg-card-light p-3",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[i.jsxs("span",{children:["HP: ",d.hp,"/",d.maxHp]}),i.jsxs("span",{children:["⚔ ",d.attack]})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:i.jsx(W.div,{className:"h-3 bg-red-500 rounded-full",animate:{width:`${d.hp/d.maxHp*100}%`},transition:{duration:.5}})})]})]})]})]})})}),i.jsxs("div",{className:"rpg-card-light mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"Battle Log"}),i.jsx("div",{className:"bg-gray-800/50 rounded-lg p-3 h-24 overflow-y-auto",children:_.map((j,P)=>i.jsx("div",{className:"text-sm text-gray-300 mb-1",children:j},P))})]}),i.jsx("div",{className:"text-center",children:b==="playing"?i.jsx("button",{onClick:T,disabled:f||w||!((N=l.find(j=>j.profile_id===s.id))!=null&&N.is_alive)||!te(),className:`btn-danger btn-lg ${te()&&!w?"rpg-glow animate-pulse":"opacity-50"}`,children:w?"Next Round...":f?"Attacking...":te()?"ATTACK!":"Wait Your Turn..."}):i.jsx("button",{onClick:A,className:"btn-primary btn-lg",children:"Return to Lobby"})})]}),i.jsx(De,{children:(b==="victory"||b==="defeat")&&i.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:i.jsxs(W.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"rpg-card max-w-md w-full mx-4 text-center",children:[i.jsx("div",{className:`text-4xl font-bold mb-6 ${b==="victory"?"text-green-600":"text-red-600"}`,children:b==="victory"?"RAID SUCCESS!":"RAID FAILED!"}),b==="victory"?i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"rpg-card-accent p-6",children:[i.jsx(mr,{className:"w-16 h-16 mx-auto mb-2 text-yellow-500"}),i.jsx("div",{className:"font-bold text-white",children:"Team Victory!"}),i.jsx("div",{className:"text-gray-300 text-sm mt-2",children:"All 3 rounds completed successfully"}),i.jsx("div",{className:"text-yellow-400 text-sm mt-2",children:"🎉 Claim your rewards! 🎉"})]})}):i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"rpg-card-light p-6",children:[i.jsx(Zt,{className:"w-16 h-16 mx-auto mb-2 text-gray-500"}),i.jsx("div",{className:"font-bold text-white",children:"Team Defeated"}),i.jsx("div",{className:"text-gray-300 text-sm mt-2",children:"Better luck next time!"}),i.jsx("div",{className:"text-red-400 text-sm mt-2 animate-pulse",children:"⏰ Returning to lobby in 3 seconds..."})]})}),b==="victory"?i.jsx("button",{onClick:A,className:"btn-secondary w-full",children:"Return to Lobby"}):i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-gray-400 text-sm mb-2",children:"Auto-returning to lobby..."}),i.jsx("button",{onClick:A,className:"btn-primary w-full",children:"Return Now"})]})]})})}),C]})})}const Ql=5;function r3(){const[e,t]=g.useState([]),[s,n]=g.useState(null),[r,a]=g.useState(!0),[o,l]=g.useState(!1),[c,u]=g.useState(1),[d,h]=g.useState(null),[f,p]=g.useState(!1),[w,y]=g.useState(!1),b=Ge(),m=Math.ceil(e.length/Ql),x=e.slice((c-1)*Ql,c*Ql);g.useEffect(()=>{v(),_()},[]);const v=async()=>{try{const{data:{user:L}}=await E.auth.getUser();if(!L){b("/login");return}const{data:R,error:D}=await E.from("profiles").select("id, username, character_type, level, exp, strength, zgold, ztoken, created_at").eq("user_id",L.id).single();if(D)throw D;n(R)}catch{M.error("Failed to load profile")}},_=async()=>{try{l(!0);const{data:L,error:R}=await E.from("player_ranks").select(`
          id,
          profile_id,
          stars,
          battles_won,
          battles_lost,
          profiles!inner (
            username,
            character_type
          ),
          battle_ranks (
            name,
            level
          )
        `).order("battles_won",{ascending:!1}).order("stars",{ascending:!1}).limit(100);if(R)throw R;const D=(L||[]).map((T,U)=>({id:T.id,username:T.profiles.username,character_type:T.profiles.character_type,battles_won:T.battles_won,battles_lost:T.battles_lost,stars:T.stars,position:U+1,profile_id:T.profile_id,battle_ranks:T.battle_ranks}));t(D)}catch(L){console.error("Error loading leaderboard:",L),M.error("Failed to load leaderboard")}finally{a(!1),l(!1)}},k=()=>{_(),M.success("Leaderboard refreshed!")},S=async(L,R)=>{if(!w){y(!0);try{const{data:D,error:T}=await E.rpc("get_user_profile_by_id",{p_profile_id:R});if(T){console.error("Error loading profile:",T),M.error("Failed to load profile");return}D&&D.length>0?(h(D[0]),p(!0)):M.error("Profile not found")}catch(D){console.error("Error loading profile:",D),M.error("Failed to load player profile")}finally{y(!1)}}},C=s?e.find(L=>L.profile_id===s.id):null;return r?i.jsx("div",{className:"min-h-screen rpg-bg flex items-center justify-center",children:i.jsxs("div",{className:"rpg-card p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),i.jsx("div",{className:"text-xl font-semibold text-white",children:"Loading Leaderboard..."})]})}):i.jsx("div",{className:"min-h-screen rpg-bg",children:i.jsxs("div",{className:"min-h-screen flex flex-col p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("button",{onClick:()=>b("/lobby"),className:"btn-secondary",children:i.jsx(Lt,{className:"w-5 h-5 mr-2"})}),i.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center",children:[i.jsx("img",{src:I.LB,alt:"LB",className:"w-8 h-8"}),"Leaderboard"]}),i.jsx("button",{onClick:k,disabled:o,className:"btn-primary btn-sm",children:i.jsx(bx,{className:`w-4 h-4 ${o?"animate-spin":""}`})})]}),C&&i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"rpg-card-accent p-4",children:[i.jsxs("h3",{className:"font-semibold text-white mb-3 flex items-center",children:[i.jsx(qe,{className:"w-5 h-5 mr-2 text-yellow-400"}),"Your Position"]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-white",children:["#",C.position]}),i.jsx("div",{className:"text-xs text-gray-400",children:"Rank"})]}),i.jsx(cs,{position:C.position,size:"medium",showName:!0})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-white font-bold",children:[C.battles_won," Wins"]}),i.jsxs("div",{className:"text-gray-400 text-sm",children:[C.battles_lost," losses"]})]})]})]})}),i.jsxs("div",{className:"rpg-card flex-1 flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center",children:[i.jsx(Bt,{className:"w-6 h-6 mr-2 text-purple-400"}),"Rankings"]}),i.jsxs("div",{className:"text-sm text-gray-300",children:["Page ",c,"/",m]})]}),i.jsx("div",{className:"flex-1 space-y-3 mb-4",children:i.jsx(De,{mode:"wait",children:i.jsx(W.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-3",children:x.map((L,R)=>{const D=s&&L.profile_id===s.id,T=L.position<=3;return i.jsxs(W.div,{className:`
                        flex items-center justify-between p-4 rounded-xl cursor-pointer
                        transition-all duration-200 hover:shadow-md
                        ${D?"bg-gradient-to-r from-purple-900/50 to-purple-800/50 border-2 border-purple-500/50 rpg-glow":T?"bg-gradient-to-r from-yellow-900/30 to-orange-900/30 border-2 border-yellow-500/30":"bg-gray-700/50 border border-gray-600/50 hover:border-gray-500"}
                      `,onClick:()=>S(L.username,L.profile_id),whileHover:{scale:1.02},whileTap:{scale:.98},children:[i.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[i.jsx("div",{className:"text-center min-w-[40px]",children:i.jsxs("div",{className:`text-lg font-bold ${T?"text-yellow-400":D?"text-purple-400":"text-gray-300"}`,children:["#",L.position]})}),i.jsx(cs,{position:L.position,size:"medium"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:`font-semibold text-sm ${T?"text-yellow-300":D?"text-purple-300":"text-white"}`,children:i.jsx(i3,{profileId:L.profile_id,username:L.username})}),i.jsx("div",{className:`text-xs ${T?"text-yellow-400":D?"text-purple-400":"text-gray-300"}`,children:ah(L.position).name})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:`font-semibold text-sm ${T?"text-yellow-300":D?"text-purple-300":"text-white"}`,children:[L.battles_won,"W / ",L.battles_lost,"L"]}),i.jsxs("div",{className:`text-xs ${T?"text-yellow-400":D?"text-purple-400":"text-gray-300"}`,children:[L.stars," ⭐"]})]})]},L.id)})},c)})}),i.jsxs("div",{className:"flex items-center justify-center gap-4",children:[i.jsx("button",{onClick:()=>u(L=>Math.max(1,L-1)),disabled:c===1,className:"btn-secondary btn-sm",children:i.jsx(LN,{className:"w-4 h-4"})}),i.jsx("div",{className:"rpg-card-light px-4 py-2",children:i.jsxs("span",{className:"font-semibold",children:[c,"/",m]})}),i.jsx("button",{onClick:()=>u(L=>Math.min(m,L+1)),disabled:c===m,className:"btn-secondary btn-sm",children:i.jsx(MN,{className:"w-4 h-4"})})]})]}),i.jsx(oh,{isOpen:f,onClose:()=>p(!1),profile:d,loading:w})]})})}function i3({username:e}){return i.jsx("span",{className:"text-sm font-medium text-white",children:e})}function a3(){return i.jsx(Eb,{children:i.jsxs("div",{className:"min-h-screen rpg-bg text-white font-medieval",children:[i.jsxs(kb,{children:[i.jsx(Oe,{path:"/register",element:i.jsx(WN,{})}),i.jsx(Oe,{path:"/login",element:i.jsx(GN,{})}),i.jsx(Oe,{path:"/character-select",element:i.jsx(KN,{})}),i.jsx(Oe,{path:"/create-profile",element:i.jsx(k4,{})}),i.jsx(Oe,{path:"/profile",element:i.jsx(N4,{})}),i.jsx(Oe,{path:"/lobby",element:i.jsx(z4,{})}),i.jsx(Oe,{path:"/inventory",element:i.jsx(B4,{})}),i.jsx(Oe,{path:"/shop",element:i.jsx(q4,{})}),i.jsx(Oe,{path:"/adventure",element:i.jsx(Z4,{})}),i.jsx(Oe,{path:"/fishing",element:i.jsx(Y4,{})}),i.jsx(Oe,{path:"/farming",element:i.jsx(Q4,{})}),i.jsx(Oe,{path:"/battle",element:i.jsx(J4,{})}),i.jsx(Oe,{path:"/titles",element:i.jsx(X4,{})}),i.jsx(Oe,{path:"/dungeon/:dungeonId",element:i.jsx(t3,{})}),i.jsx(Oe,{path:"/raid/:roomUuid",element:i.jsx(n3,{})}),i.jsx(Oe,{path:"/leaderboard",element:i.jsx(r3,{})}),i.jsx(Oe,{path:"/",element:i.jsx(_b,{to:"/login",replace:!0})})]}),i.jsx(yj,{position:"top-center"})]})})}R0(document.getElementById("root")).render(i.jsx(g.StrictMode,{children:i.jsx(a3,{})}));export{lv as g};
